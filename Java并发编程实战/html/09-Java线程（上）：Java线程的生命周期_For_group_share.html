<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>09-Javaçº¿ç¨‹ï¼ˆä¸Šï¼‰ï¼šJavaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>09-Javaçº¿ç¨‹ï¼ˆä¸Šï¼‰ï¼šJavaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h1>
<p>åœ¨Javaé¢†åŸŸï¼Œå®ç°å¹¶å‘ç¨‹åºçš„ä¸»è¦æ‰‹æ®µå°±æ˜¯å¤šçº¿ç¨‹ã€‚çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿé‡Œçš„ä¸€ä¸ªæ¦‚å¿µï¼Œè™½ç„¶å„ç§ä¸åŒçš„å¼€å‘è¯­è¨€å¦‚Javaã€C#ç­‰éƒ½å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Œä½†æ˜¯ä¸‡å˜ä¸ç¦»æ“ä½œç³»ç»Ÿã€‚Javaè¯­è¨€é‡Œçš„çº¿ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œçº¿ç¨‹ä¹Ÿæœ‰â€œç”Ÿè€ç—…æ­»â€ï¼Œä¸“ä¸šçš„è¯´æ³•å«æœ‰ç”Ÿå‘½å‘¨æœŸã€‚å¯¹äºæœ‰ç”Ÿå‘½å‘¨æœŸçš„äº‹ç‰©ï¼Œè¦å­¦å¥½å®ƒï¼Œæ€è·¯éå¸¸ç®€å•ï¼Œåªè¦èƒ½ææ‡‚<strong>ç”Ÿå‘½å‘¨æœŸä¸­å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€è½¬æ¢æœºåˆ¶</strong>å°±å¯ä»¥äº†ã€‚</p><p>è™½ç„¶ä¸åŒçš„å¼€å‘è¯­è¨€å¯¹äºæ“ä½œç³»ç»Ÿçº¿ç¨‹è¿›è¡Œäº†ä¸åŒçš„å°è£…ï¼Œä½†æ˜¯å¯¹äºçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸè¿™éƒ¨åˆ†ï¼ŒåŸºæœ¬ä¸Šæ˜¯é›·åŒçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥äº†è§£ä¸€ä¸‹é€šç”¨çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ¨¡å‹ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¹Ÿé€‚ç”¨äºå¾ˆå¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼›ç„¶åå†è¯¦ç»†æœ‰é’ˆå¯¹æ€§åœ°å­¦ä¹ ä¸€ä¸‹Javaä¸­çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h2>é€šç”¨çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</h2><p>é€šç”¨çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸåŸºæœ¬ä¸Šå¯ä»¥ç”¨ä¸‹å›¾è¿™ä¸ªâ€œäº”æ€æ¨¡å‹â€æ¥æè¿°ã€‚è¿™äº”æ€åˆ†åˆ«æ˜¯ï¼š<strong>åˆå§‹çŠ¶æ€ã€å¯è¿è¡ŒçŠ¶æ€ã€è¿è¡ŒçŠ¶æ€ã€ä¼‘çœ çŠ¶æ€</strong>å’Œ<strong>ç»ˆæ­¢çŠ¶æ€</strong>ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/9b/e5/9bbc6fa7fb4d631484aa953626cf6ae5.png" alt=""></p><center><span class="reference">é€šç”¨çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾â€”â€”äº”æ€æ¨¡å‹</span></center><p>è¿™â€œäº”æ€æ¨¡å‹â€çš„è¯¦ç»†æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºã€‚</p><ol>
<li><strong>åˆå§‹çŠ¶æ€</strong>ï¼ŒæŒ‡çš„æ˜¯çº¿ç¨‹å·²ç»è¢«åˆ›å»ºï¼Œä½†æ˜¯è¿˜ä¸å…è®¸åˆ†é…CPUæ‰§è¡Œã€‚è¿™ä¸ªçŠ¶æ€å±äºç¼–ç¨‹è¯­è¨€ç‰¹æœ‰çš„ï¼Œä¸è¿‡è¿™é‡Œæ‰€è°“çš„è¢«åˆ›å»ºï¼Œä»…ä»…æ˜¯åœ¨ç¼–ç¨‹è¯­è¨€å±‚é¢è¢«åˆ›å»ºï¼Œè€Œåœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼ŒçœŸæ­£çš„çº¿ç¨‹è¿˜æ²¡æœ‰åˆ›å»ºã€‚</li>
<li><strong>å¯è¿è¡ŒçŠ¶æ€</strong>ï¼ŒæŒ‡çš„æ˜¯çº¿ç¨‹å¯ä»¥åˆ†é…CPUæ‰§è¡Œã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼ŒçœŸæ­£çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹å·²ç»è¢«æˆåŠŸåˆ›å»ºäº†ï¼Œæ‰€ä»¥å¯ä»¥åˆ†é…CPUæ‰§è¡Œã€‚</li>
<li>å½“æœ‰ç©ºé—²çš„CPUæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å…¶åˆ†é…ç»™ä¸€ä¸ªå¤„äºå¯è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œè¢«åˆ†é…åˆ°CPUçš„çº¿ç¨‹çš„çŠ¶æ€å°±è½¬æ¢æˆäº†<strong>è¿è¡ŒçŠ¶æ€</strong>ã€‚</li>
<li>è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹å¦‚æœè°ƒç”¨ä¸€ä¸ªé˜»å¡çš„APIï¼ˆä¾‹å¦‚ä»¥é˜»å¡æ–¹å¼è¯»æ–‡ä»¶ï¼‰æˆ–è€…ç­‰å¾…æŸä¸ªäº‹ä»¶ï¼ˆä¾‹å¦‚æ¡ä»¶å˜é‡ï¼‰ï¼Œé‚£ä¹ˆçº¿ç¨‹çš„çŠ¶æ€å°±ä¼šè½¬æ¢åˆ°<strong>ä¼‘çœ çŠ¶æ€</strong>ï¼ŒåŒæ—¶é‡Šæ”¾CPUä½¿ç”¨æƒï¼Œä¼‘çœ çŠ¶æ€çš„çº¿ç¨‹æ°¸è¿œæ²¡æœ‰æœºä¼šè·å¾—CPUä½¿ç”¨æƒã€‚å½“ç­‰å¾…çš„äº‹ä»¶å‡ºç°äº†ï¼Œçº¿ç¨‹å°±ä¼šä»ä¼‘çœ çŠ¶æ€è½¬æ¢åˆ°å¯è¿è¡ŒçŠ¶æ€ã€‚</li>
<li>çº¿ç¨‹æ‰§è¡Œå®Œæˆ–è€…å‡ºç°å¼‚å¸¸å°±ä¼šè¿›å…¥<strong>ç»ˆæ­¢çŠ¶æ€</strong>ï¼Œç»ˆæ­¢çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šåˆ‡æ¢åˆ°å…¶ä»–ä»»ä½•çŠ¶æ€ï¼Œè¿›å…¥ç»ˆæ­¢çŠ¶æ€ä¹Ÿå°±æ„å‘³ç€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ã€‚</li>
</ol><!-- [[[read_end]]] --><p>è¿™äº”ç§çŠ¶æ€åœ¨ä¸åŒç¼–ç¨‹è¯­è¨€é‡Œä¼šæœ‰ç®€åŒ–åˆå¹¶ã€‚ä¾‹å¦‚ï¼ŒCè¯­è¨€çš„POSIX Threadsè§„èŒƒï¼Œå°±æŠŠåˆå§‹çŠ¶æ€å’Œå¯è¿è¡ŒçŠ¶æ€åˆå¹¶äº†ï¼›Javaè¯­è¨€é‡Œåˆ™æŠŠå¯è¿è¡ŒçŠ¶æ€å’Œè¿è¡ŒçŠ¶æ€åˆå¹¶äº†ï¼Œè¿™ä¸¤ä¸ªçŠ¶æ€åœ¨æ“ä½œç³»ç»Ÿè°ƒåº¦å±‚é¢æœ‰ç”¨ï¼Œè€ŒJVMå±‚é¢ä¸å…³å¿ƒè¿™ä¸¤ä¸ªçŠ¶æ€ï¼Œå› ä¸ºJVMæŠŠçº¿ç¨‹è°ƒåº¦äº¤ç»™æ“ä½œç³»ç»Ÿå¤„ç†äº†ã€‚</p><p>é™¤äº†ç®€åŒ–åˆå¹¶ï¼Œè¿™äº”ç§çŠ¶æ€ä¹Ÿæœ‰å¯èƒ½è¢«ç»†åŒ–ï¼Œæ¯”å¦‚ï¼ŒJavaè¯­è¨€é‡Œå°±ç»†åŒ–äº†ä¼‘çœ çŠ¶æ€ï¼ˆè¿™ä¸ªä¸‹é¢æˆ‘ä»¬ä¼šè¯¦ç»†è®²è§£ï¼‰ã€‚</p><h2>Javaä¸­çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>ä»‹ç»å®Œé€šç”¨çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ¨¡å‹ï¼Œæƒ³å¿…ä½ å·²ç»å¯¹çº¿ç¨‹çš„â€œç”Ÿè€ç—…æ­»â€æœ‰äº†ä¸€ä¸ªå¤§è‡´çš„äº†è§£ã€‚é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è¯¦ç»†çœ‹çœ‹Javaè¯­è¨€é‡Œçš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><p>Javaè¯­è¨€ä¸­çº¿ç¨‹å…±æœ‰å…­ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol>
<li>NEWï¼ˆåˆå§‹åŒ–çŠ¶æ€ï¼‰</li>
<li>RUNNABLEï¼ˆå¯è¿è¡Œ/è¿è¡ŒçŠ¶æ€ï¼‰</li>
<li>BLOCKEDï¼ˆé˜»å¡çŠ¶æ€ï¼‰</li>
<li>WAITINGï¼ˆæ— æ—¶é™ç­‰å¾…ï¼‰</li>
<li>TIMED_WAITINGï¼ˆæœ‰æ—¶é™ç­‰å¾…ï¼‰</li>
<li>TERMINATEDï¼ˆç»ˆæ­¢çŠ¶æ€ï¼‰</li>
</ol><p>è¿™çœ‹ä¸Šå»æŒºå¤æ‚çš„ï¼ŒçŠ¶æ€ç±»å‹ä¹Ÿæ¯”è¾ƒå¤šã€‚ä½†å…¶å®åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼ŒJavaçº¿ç¨‹ä¸­çš„BLOCKEDã€WAITINGã€TIMED_WAITINGæ˜¯ä¸€ç§çŠ¶æ€ï¼Œå³å‰é¢æˆ‘ä»¬æåˆ°çš„ä¼‘çœ çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´<strong>åªè¦Javaçº¿ç¨‹å¤„äºè¿™ä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±æ°¸è¿œæ²¡æœ‰CPUçš„ä½¿ç”¨æƒ</strong>ã€‚</p><p>æ‰€ä»¥Javaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥ç®€åŒ–ä¸ºä¸‹å›¾ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/3f/8c/3f6c6bf95a6e8627bdf3cb621bbb7f8c.png" alt=""></p><center><span class="reference">Javaä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾</span></center><p>å…¶ä¸­ï¼ŒBLOCKEDã€WAITINGã€TIMED_WAITINGå¯ä»¥ç†è§£ä¸ºçº¿ç¨‹å¯¼è‡´ä¼‘çœ çŠ¶æ€çš„ä¸‰ç§åŸå› ã€‚é‚£å…·ä½“æ˜¯å“ªäº›æƒ…å½¢ä¼šå¯¼è‡´çº¿ç¨‹ä»RUNNABLEçŠ¶æ€è½¬æ¢åˆ°è¿™ä¸‰ç§çŠ¶æ€å‘¢ï¼Ÿè€Œè¿™ä¸‰ç§çŠ¶æ€åˆæ˜¯ä½•æ—¶è½¬æ¢å›RUNNABLEçš„å‘¢ï¼Ÿä»¥åŠNEWã€TERMINATEDå’ŒRUNNABLEçŠ¶æ€æ˜¯å¦‚ä½•è½¬æ¢çš„ï¼Ÿ</p><h3>1. RUNNABLEä¸BLOCKEDçš„çŠ¶æ€è½¬æ¢</h3><p>åªæœ‰ä¸€ç§åœºæ™¯ä¼šè§¦å‘è¿™ç§è½¬æ¢ï¼Œå°±æ˜¯çº¿ç¨‹ç­‰å¾…synchronizedçš„éšå¼é”ã€‚synchronizedä¿®é¥°çš„æ–¹æ³•ã€ä»£ç å—åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç­‰å¾…çš„çº¿ç¨‹å°±ä¼šä»RUNNABLEè½¬æ¢åˆ°BLOCKEDçŠ¶æ€ã€‚è€Œå½“ç­‰å¾…çš„çº¿ç¨‹è·å¾—synchronizedéšå¼é”æ—¶ï¼Œå°±åˆä¼šä»BLOCKEDè½¬æ¢åˆ°RUNNABLEçŠ¶æ€ã€‚</p><p>å¦‚æœä½ ç†Ÿæ‚‰æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçš„è¯ï¼Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼šçº¿ç¨‹è°ƒç”¨é˜»å¡å¼APIæ—¶ï¼Œæ˜¯å¦ä¼šè½¬æ¢åˆ°BLOCKEDçŠ¶æ€å‘¢ï¼Ÿåœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œçº¿ç¨‹æ˜¯ä¼šè½¬æ¢åˆ°ä¼‘çœ çŠ¶æ€çš„ï¼Œä½†æ˜¯åœ¨JVMå±‚é¢ï¼ŒJavaçº¿ç¨‹çš„çŠ¶æ€ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´Javaçº¿ç¨‹çš„çŠ¶æ€ä¼šä¾ç„¶ä¿æŒRUNNABLEçŠ¶æ€ã€‚<strong>JVMå±‚é¢å¹¶ä¸å…³å¿ƒæ“ä½œç³»ç»Ÿè°ƒåº¦ç›¸å…³çš„çŠ¶æ€</strong>ï¼Œå› ä¸ºåœ¨JVMçœ‹æ¥ï¼Œç­‰å¾…CPUä½¿ç”¨æƒï¼ˆæ“ä½œç³»ç»Ÿå±‚é¢æ­¤æ—¶å¤„äºå¯æ‰§è¡ŒçŠ¶æ€ï¼‰ä¸ç­‰å¾…I/Oï¼ˆæ“ä½œç³»ç»Ÿå±‚é¢æ­¤æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼‰æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯åœ¨ç­‰å¾…æŸä¸ªèµ„æºï¼Œæ‰€ä»¥éƒ½å½’å…¥äº†RUNNABLEçŠ¶æ€ã€‚</p><p>è€Œæˆ‘ä»¬å¹³æ—¶æ‰€è°“çš„Javaåœ¨è°ƒç”¨é˜»å¡å¼APIæ—¶ï¼Œçº¿ç¨‹ä¼šé˜»å¡ï¼ŒæŒ‡çš„æ˜¯æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯Javaçº¿ç¨‹çš„çŠ¶æ€ã€‚</p><h3>2. RUNNABLEä¸WAITINGçš„çŠ¶æ€è½¬æ¢</h3><p>æ€»ä½“æ¥è¯´ï¼Œæœ‰ä¸‰ç§åœºæ™¯ä¼šè§¦å‘è¿™ç§è½¬æ¢ã€‚</p><p>ç¬¬ä¸€ç§åœºæ™¯ï¼Œè·å¾—synchronizedéšå¼é”çš„çº¿ç¨‹ï¼Œè°ƒç”¨æ— å‚æ•°çš„Object.wait()æ–¹æ³•ã€‚å…¶ä¸­ï¼Œwait()æ–¹æ³•æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡è®²è§£ç®¡ç¨‹çš„æ—¶å€™å·²ç»æ·±å…¥ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p><p>ç¬¬äºŒç§åœºæ™¯ï¼Œè°ƒç”¨æ— å‚æ•°çš„Thread.join()æ–¹æ³•ã€‚å…¶ä¸­çš„join()æ˜¯ä¸€ç§çº¿ç¨‹åŒæ­¥æ–¹æ³•ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡thread Aï¼Œå½“è°ƒç”¨A.join()çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿™æ¡è¯­å¥çš„çº¿ç¨‹ä¼šç­‰å¾…thread Aæ‰§è¡Œå®Œï¼Œè€Œç­‰å¾…ä¸­çš„è¿™ä¸ªçº¿ç¨‹ï¼Œå…¶çŠ¶æ€ä¼šä»RUNNABLEè½¬æ¢åˆ°WAITINGã€‚å½“çº¿ç¨‹thread Aæ‰§è¡Œå®Œï¼ŒåŸæ¥ç­‰å¾…å®ƒçš„çº¿ç¨‹åˆä¼šä»WAITINGçŠ¶æ€è½¬æ¢åˆ°RUNNABLEã€‚</p><p>ç¬¬ä¸‰ç§åœºæ™¯ï¼Œè°ƒç”¨LockSupport.park()æ–¹æ³•ã€‚å…¶ä¸­çš„LockSupportå¯¹è±¡ï¼Œä¹Ÿè®¸ä½ æœ‰ç‚¹é™Œç”Ÿï¼Œå…¶å®Javaå¹¶å‘åŒ…ä¸­çš„é”ï¼Œéƒ½æ˜¯åŸºäºå®ƒå®ç°çš„ã€‚è°ƒç”¨LockSupport.park()æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹ä¼šé˜»å¡ï¼Œçº¿ç¨‹çš„çŠ¶æ€ä¼šä»RUNNABLEè½¬æ¢åˆ°WAITINGã€‚è°ƒç”¨LockSupport.unpark(Thread thread)å¯å”¤é†’ç›®æ ‡çº¿ç¨‹ï¼Œç›®æ ‡çº¿ç¨‹çš„çŠ¶æ€åˆä¼šä»WAITINGçŠ¶æ€è½¬æ¢åˆ°RUNNABLEã€‚</p><h3>3. RUNNABLEä¸TIMED_WAITINGçš„çŠ¶æ€è½¬æ¢</h3><p>æœ‰äº”ç§åœºæ™¯ä¼šè§¦å‘è¿™ç§è½¬æ¢ï¼š</p><ol>
<li>è°ƒç”¨<strong>å¸¦è¶…æ—¶å‚æ•°</strong>çš„Thread.sleep(long millis)æ–¹æ³•ï¼›</li>
<li>è·å¾—synchronizedéšå¼é”çš„çº¿ç¨‹ï¼Œè°ƒç”¨<strong>å¸¦è¶…æ—¶å‚æ•°</strong>çš„Object.wait(long timeout)æ–¹æ³•ï¼›</li>
<li>è°ƒç”¨<strong>å¸¦è¶…æ—¶å‚æ•°</strong>çš„Thread.join(long millis)æ–¹æ³•ï¼›</li>
<li>è°ƒç”¨<strong>å¸¦è¶…æ—¶å‚æ•°</strong>çš„LockSupport.parkNanos(Object blocker, long deadline)æ–¹æ³•ï¼›</li>
<li>è°ƒç”¨<strong>å¸¦è¶…æ—¶å‚æ•°</strong>çš„LockSupport.parkUntil(long deadline)æ–¹æ³•ã€‚</li>
</ol><p>è¿™é‡Œä½ ä¼šå‘ç°TIMED_WAITINGå’ŒWAITINGçŠ¶æ€çš„åŒºåˆ«ï¼Œä»…ä»…æ˜¯è§¦å‘æ¡ä»¶å¤šäº†<strong>è¶…æ—¶å‚æ•°</strong>ã€‚</p><h3>4. ä»NEWåˆ°RUNNABLEçŠ¶æ€</h3><p>Javaåˆšåˆ›å»ºå‡ºæ¥çš„Threadå¯¹è±¡å°±æ˜¯NEWçŠ¶æ€ï¼Œè€Œåˆ›å»ºThreadå¯¹è±¡ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç»§æ‰¿Threadå¯¹è±¡ï¼Œé‡å†™run()æ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// è‡ªå®šä¹‰çº¿ç¨‹å¯¹è±¡
class MyThread extends Thread {
  public void run() {
    // çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„ä»£ç 
    ......
  }
}
// åˆ›å»ºçº¿ç¨‹å¯¹è±¡
MyThread myThread = new MyThread();
</code></pre><p>å¦ä¸€ç§æ˜¯å®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œå¹¶å°†è¯¥å®ç°ç±»ä½œä¸ºåˆ›å»ºThreadå¯¹è±¡çš„å‚æ•°ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// å®ç°Runnableæ¥å£
class Runner implements Runnable {
  @Override
  public void run() {
    // çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„ä»£ç 
    ......
  }
}
// åˆ›å»ºçº¿ç¨‹å¯¹è±¡
Thread thread = new Thread(new Runner());
</code></pre><p>NEWçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸ä¼šè¢«æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œå› æ­¤ä¸ä¼šæ‰§è¡Œã€‚Javaçº¿ç¨‹è¦æ‰§è¡Œï¼Œå°±å¿…é¡»è½¬æ¢åˆ°RUNNABLEçŠ¶æ€ã€‚ä»NEWçŠ¶æ€è½¬æ¢åˆ°RUNNABLEçŠ¶æ€å¾ˆç®€å•ï¼Œåªè¦è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•å°±å¯ä»¥äº†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>MyThread myThread = new MyThread();
// ä»NEWçŠ¶æ€è½¬æ¢åˆ°RUNNABLEçŠ¶æ€
myThread.start()ï¼›
</code></pre><h3>5. ä»RUNNABLEåˆ°TERMINATEDçŠ¶æ€</h3><p>çº¿ç¨‹æ‰§è¡Œå®Œ run() æ–¹æ³•åï¼Œä¼šè‡ªåŠ¨è½¬æ¢åˆ°TERMINATEDçŠ¶æ€ï¼Œå½“ç„¶å¦‚æœæ‰§è¡Œrun()æ–¹æ³•çš„æ—¶å€™å¼‚å¸¸æŠ›å‡ºï¼Œä¹Ÿä¼šå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¼ºåˆ¶ä¸­æ–­run()æ–¹æ³•çš„æ‰§è¡Œï¼Œä¾‹å¦‚ run()æ–¹æ³•è®¿é—®ä¸€ä¸ªå¾ˆæ…¢çš„ç½‘ç»œï¼Œæˆ‘ä»¬ç­‰ä¸ä¸‹å»äº†ï¼Œæƒ³ç»ˆæ­¢æ€ä¹ˆåŠå‘¢ï¼ŸJavaçš„Threadç±»é‡Œé¢å€’æ˜¯æœ‰ä¸ªstop()æ–¹æ³•ï¼Œä¸è¿‡å·²ç»æ ‡è®°ä¸º@Deprecatedï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨äº†ã€‚æ­£ç¡®çš„å§¿åŠ¿å…¶å®æ˜¯è°ƒç”¨interrupt()æ–¹æ³•ã€‚</p><p><strong>é‚£stop()å’Œinterrupt()æ–¹æ³•çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</strong></p><p>stop()æ–¹æ³•ä¼šçœŸçš„æ€æ­»çº¿ç¨‹ï¼Œä¸ç»™çº¿ç¨‹å–˜æ¯çš„æœºä¼šï¼Œå¦‚æœçº¿ç¨‹æŒæœ‰ReentrantLocké”ï¼Œè¢«stop()çš„çº¿ç¨‹å¹¶ä¸ä¼šè‡ªåŠ¨è°ƒç”¨ReentrantLockçš„unlock()å»é‡Šæ”¾é”ï¼Œé‚£å…¶ä»–çº¿ç¨‹å°±å†ä¹Ÿæ²¡æœºä¼šè·å¾—ReentrantLocké”ï¼Œè¿™å®åœ¨æ˜¯å¤ªå±é™©äº†ã€‚æ‰€ä»¥è¯¥æ–¹æ³•å°±ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰suspend() å’Œ resume()æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åŒæ ·ä¹Ÿéƒ½ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿå°±ä¸å¤šä»‹ç»äº†ã€‚</p><p>è€Œinterrupt()æ–¹æ³•å°±æ¸©æŸ”å¤šäº†ï¼Œinterrupt()æ–¹æ³•ä»…ä»…æ˜¯é€šçŸ¥çº¿ç¨‹ï¼Œçº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œä¸€äº›åç»­æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ— è§†è¿™ä¸ªé€šçŸ¥ã€‚è¢«interruptçš„çº¿ç¨‹ï¼Œæ˜¯æ€ä¹ˆæ”¶åˆ°é€šçŸ¥çš„å‘¢ï¼Ÿä¸€ç§æ˜¯å¼‚å¸¸ï¼Œå¦ä¸€ç§æ˜¯ä¸»åŠ¨æ£€æµ‹ã€‚</p><p>å½“çº¿ç¨‹Aå¤„äºWAITINGã€TIMED_WAITINGçŠ¶æ€æ—¶ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨çº¿ç¨‹Açš„interrupt()æ–¹æ³•ï¼Œä¼šä½¿çº¿ç¨‹Aè¿”å›åˆ°RUNNABLEçŠ¶æ€ï¼ŒåŒæ—¶çº¿ç¨‹Açš„ä»£ç ä¼šè§¦å‘InterruptedExceptionå¼‚å¸¸ã€‚ä¸Šé¢æˆ‘ä»¬æåˆ°è½¬æ¢åˆ°WAITINGã€TIMED_WAITINGçŠ¶æ€çš„è§¦å‘æ¡ä»¶ï¼Œéƒ½æ˜¯è°ƒç”¨äº†ç±»ä¼¼wait()ã€join()ã€sleep()è¿™æ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹è¿™äº›æ–¹æ³•çš„ç­¾åï¼Œå‘ç°éƒ½ä¼šthrows InterruptedExceptionè¿™ä¸ªå¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸çš„è§¦å‘æ¡ä»¶å°±æ˜¯ï¼šå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„interrupt()æ–¹æ³•ã€‚</p><p>å½“çº¿ç¨‹Aå¤„äºRUNNABLEçŠ¶æ€æ—¶ï¼Œå¹¶ä¸”é˜»å¡åœ¨java.nio.channels.InterruptibleChannelä¸Šæ—¶ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨çº¿ç¨‹Açš„interrupt()æ–¹æ³•ï¼Œçº¿ç¨‹Aä¼šè§¦å‘java.nio.channels.ClosedByInterruptExceptionè¿™ä¸ªå¼‚å¸¸ï¼›è€Œé˜»å¡åœ¨java.nio.channels.Selectorä¸Šæ—¶ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨çº¿ç¨‹Açš„interrupt()æ–¹æ³•ï¼Œçº¿ç¨‹Açš„java.nio.channels.Selectorä¼šç«‹å³è¿”å›ã€‚</p><p>ä¸Šé¢è¿™ä¸¤ç§æƒ…å†µå±äºè¢«ä¸­æ–­çš„çº¿ç¨‹é€šè¿‡å¼‚å¸¸çš„æ–¹å¼è·å¾—äº†é€šçŸ¥ã€‚è¿˜æœ‰ä¸€ç§æ˜¯ä¸»åŠ¨æ£€æµ‹ï¼Œå¦‚æœçº¿ç¨‹å¤„äºRUNNABLEçŠ¶æ€ï¼Œå¹¶ä¸”æ²¡æœ‰é˜»å¡åœ¨æŸä¸ªI/Oæ“ä½œä¸Šï¼Œä¾‹å¦‚ä¸­æ–­è®¡ç®—åœ†å‘¨ç‡çš„çº¿ç¨‹Aï¼Œè¿™æ—¶å°±å¾—ä¾èµ–çº¿ç¨‹Aä¸»åŠ¨æ£€æµ‹ä¸­æ–­çŠ¶æ€äº†ã€‚å¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨çº¿ç¨‹Açš„interrupt()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹Aå¯ä»¥é€šè¿‡isInterrupted()æ–¹æ³•ï¼Œæ£€æµ‹æ˜¯ä¸æ˜¯è‡ªå·±è¢«ä¸­æ–­äº†ã€‚</p><h2>æ€»ç»“</h2><p>ç†è§£Javaçº¿ç¨‹çš„å„ç§çŠ¶æ€ä»¥åŠç”Ÿå‘½å‘¨æœŸå¯¹äºè¯Šæ–­å¤šçº¿ç¨‹Bugéå¸¸æœ‰å¸®åŠ©ï¼Œå¤šçº¿ç¨‹ç¨‹åºå¾ˆéš¾è°ƒè¯•ï¼Œå‡ºäº†BugåŸºæœ¬ä¸Šéƒ½æ˜¯é æ—¥å¿—ï¼Œé çº¿ç¨‹dumpæ¥è·Ÿè¸ªé—®é¢˜ï¼Œåˆ†æçº¿ç¨‹dumpçš„ä¸€ä¸ªåŸºæœ¬åŠŸå°±æ˜¯åˆ†æçº¿ç¨‹çŠ¶æ€ï¼Œå¤§éƒ¨åˆ†çš„æ­»é”ã€é¥¥é¥¿ã€æ´»é”é—®é¢˜éƒ½éœ€è¦è·Ÿè¸ªåˆ†æçº¿ç¨‹çš„çŠ¶æ€ã€‚åŒæ—¶ï¼Œæœ¬æ–‡ä»‹ç»çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå…·å¤‡å¾ˆå¼ºçš„é€šç”¨æ€§ï¼Œå¯¹äºå­¦ä¹ å…¶ä»–è¯­è¨€çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¹Ÿæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>jstack</code> å‘½ä»¤æˆ–è€…<code>Java VisualVM</code>è¿™ä¸ªå¯è§†åŒ–å·¥å…·å°†JVMæ‰€æœ‰çš„çº¿ç¨‹æ ˆä¿¡æ¯å¯¼å‡ºæ¥ï¼Œå®Œæ•´çš„çº¿ç¨‹æ ˆä¿¡æ¯ä¸ä»…åŒ…æ‹¬çº¿ç¨‹çš„å½“å‰çŠ¶æ€ã€è°ƒç”¨æ ˆï¼Œè¿˜åŒ…æ‹¬äº†é”çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œæˆ‘æ›¾ç»å†™è¿‡ä¸€ä¸ªæ­»é”çš„ç¨‹åºï¼Œå¯¼å‡ºçš„çº¿ç¨‹æ ˆæ˜ç¡®å‘Šè¯‰æˆ‘å‘ç”Ÿäº†æ­»é”ï¼Œå¹¶ä¸”å°†æ­»é”çº¿ç¨‹çš„è°ƒç”¨æ ˆä¿¡æ¯æ¸…æ™°åœ°æ˜¾ç¤ºå‡ºæ¥äº†ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å¯¼å‡ºçº¿ç¨‹æ ˆï¼Œåˆ†æçº¿ç¨‹çŠ¶æ€æ˜¯è¯Šæ–­å¹¶å‘é—®é¢˜çš„ä¸€ä¸ªé‡è¦å·¥å…·ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/67/be/67734e1a062adc7cf7baac7d6c17ddbe.png" alt=""></p><center><span class="reference">å‘ç”Ÿæ­»é”çš„çº¿ç¨‹æ ˆ</span></center><h2>è¯¾åæ€è€ƒ</h2><p>ä¸‹é¢ä»£ç çš„æœ¬æ„æ˜¯å½“å‰çº¿ç¨‹è¢«ä¸­æ–­ä¹‹åï¼Œé€€å‡º<code>while(true)</code>ï¼Œä½ è§‰å¾—è¿™æ®µä»£ç æ˜¯å¦æ­£ç¡®å‘¢ï¼Ÿ</p><pre><code>Thread th = Thread.currentThread();
while(true) {
  if(th.isInterrupted()) {
    break;
  }
  // çœç•¥ä¸šåŠ¡ä»£ç æ— æ•°
  try {
    Thread.sleep(100);
  }catch (InterruptedException e){
    e.printStackTrace();
  }
}
</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h1>çŒœä½ å–œæ¬¢</h1><p><a href="https://time.geekbang.org/course/intro/156?utm_term=zeusRVDGT&amp;utm_source=app&amp;utm_medium=javabingfabiancheng&amp;utm_campaign=156-onsell&amp;utm_content=banner0301"><img src="https://static001.geekbang.org/resource/image/8e/93/8e1906fb8a24d5eb66539fa88ea56193.png" alt="unpreview"></a></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å§œæˆˆ  2019-03-19 01:06:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯èƒ½å‡ºç°æ— é™å¾ªç¯ï¼Œçº¿ç¨‹åœ¨sleepæœŸé—´è¢«æ‰“æ–­äº†ï¼ŒæŠ›å‡ºä¸€ä¸ªInterruptedExceptionå¼‚å¸¸ï¼Œtry catchæ•æ‰æ­¤å¼‚å¸¸ï¼Œåº”è¯¥é‡ç½®ä¸€ä¸‹ä¸­æ–­æ ‡ç¤ºï¼Œå› ä¸ºæŠ›å‡ºå¼‚å¸¸åï¼Œä¸­æ–­æ ‡ç¤ºä¼šè‡ªåŠ¨æ¸…é™¤æ‰ï¼<br>Thread th = Thread.currentThread();<br>while(true) {<br>  if(th.isInterrupted()) {<br>    break;<br>  }<br>  &#47;&#47; çœç•¥ä¸šåŠ¡ä»£ç æ— æ•°<br>  try {<br>    Thread.sleep(100);<br>  }catch (InterruptedException e)ï½›<br>    Thread.currentThread().interrupt();<br>    e.printStackTrace();<br>  }<br>} [64èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-19 07:54:42</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Geek_961eed  2019-03-19 10:41:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¸Œæœ›ä½œè€…è®²è§£ä¸€ä¸‹æ¯ä¸€æœŸçš„æ€è€ƒé¢˜ï¼ [27èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è™è™â¤ï¸  2019-03-19 12:33:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘çš„ä¸€ä½é•¿è¾ˆæ›¾å‘Šè¯‰æˆ‘ï¼Œæ²¡æœ‰çœŸæ­£å­¦ä¸ä¼šçš„çŸ¥è¯†æˆ–è€…æŠ€æœ¯ï¼Œåªæ˜¯ç¼ºä¹å¥½çš„è€å¸ˆã€‚<br><br>æœ‰çš„äººå¯ä»¥æŠŠå¤æ‚çš„çŸ¥è¯†è®²æ˜ç™½ï¼Œä½†æ˜¯è®²è§£çš„è¿‡ç¨‹å´ä¹Ÿæ˜¯æ™¦æ¶©éš¾æ‡‚ï¼Œä¸å…è½äº†ä¸‹æˆã€‚<br><br>è€Œå­¦ä¹ ç‹è€å¸ˆçš„è¯¾ï¼Œæˆ‘ä¸€ç›´éƒ½è§‰å¾—å¾ˆè½»æ¾ã€‚äº‘æ·¡é£è½»åœ°å°±æŠŠå¹¶å‘çŸ¥è¯†æŠ½ä¸å‰¥èŒ§ï¼Œç¡®æ˜¯æ›´æ˜¾åŠŸåŠ›ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘è§‰å¾—äººçš„å¤§è„‘æ›´å–œæ¬¢æ¥å—è¿™äº›å¹³æ˜“è¿‘äººçš„æ–‡å­—ã€‚çœ‹ä¼¼æµ…è¿‘çš„æ–‡å­—ï¼Œå´æ›´èƒ½å¸¦é¢†æˆ‘æ·±å…¥çš„æ€è€ƒï¼Œç•™ä¸‹æ›´æ·±åˆ»çš„å°è±¡ã€‚åè§‚ä¸€äº›çœ‹èµ·æ¥é«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡çš„è®ºè¿°ï¼Œè®©äººè§‰å¾—äº‘å±±é›¾ç½©ï¼Œå¥½ä¸å®¹æ˜“çœ‹æ‡‚äº†ï¼Œä½†çœ‹è¿‡åå´ä»€ä¹ˆä¹Ÿæƒ³ä¸èµ·æ¥äº†ã€‚å¤§æ¦‚æ˜¯è¯»æ–‡ç« çš„æ—¶å€™è„‘ç»†èƒéƒ½ç”¨æ¥å’Œæ™¦æ¶©çš„æ–‡å­—åšæ–—äº‰äº†ï¼Œå·²ç»æ²¡æœ‰ç©ºé—´å»æ€è€ƒå’Œè®°å¿†äº†ã€‚<br><br>å†æ¬¡æ„Ÿè°¢ç‹è€å¸ˆç»™å¤§å®¶å¸¦æ¥ä¼˜ç§€çš„è¯¾ç¨‹ã€‚ [16èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-19 20:11:21</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">çœ‹æ¥æˆ‘æ²¡å¿…è¦å†™çš„å¾ˆè£…äº†ğŸ˜‚<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            thas  2019-03-19 15:40:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            interruptæ˜¯ä¸­æ–­çš„æ„æ€ï¼Œåœ¨å•ç‰‡æœºå¼€å‘é¢†åŸŸï¼Œç”¨äºæ¥æ”¶ç‰¹å®šçš„äº‹ä»¶ï¼Œä»è€Œæ‰§è¡Œåç»­çš„æ“ä½œã€‚Javaçº¿ç¨‹ä¸­ï¼Œï¼ˆé€šå¸¸ï¼‰ä½¿ç”¨interruptä½œä¸ºçº¿ç¨‹é€€å‡ºçš„é€šçŸ¥äº‹ä»¶ï¼Œå‘ŠçŸ¥çº¿ç¨‹å¯ä»¥ç»“æŸäº†ã€‚<br>interruptä¸ä¼šç»“æŸçº¿ç¨‹çš„è¿è¡Œï¼Œåœ¨æŠ›å‡ºInterruptedExceptionåä¼šæ¸…é™¤ä¸­æ–­æ ‡å¿—ï¼ˆä»£è¡¨å¯ä»¥æ¥æ”¶ä¸‹ä¸€ä¸ªä¸­æ–­ä¿¡å·äº†ï¼‰ï¼Œæ‰€ä»¥æˆ‘æƒ³ï¼Œinterruptåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥ç±»ä¼¼å•ç‰‡æœºä¸€æ ·ä½œä¸ºä¸€ç§é€šçŸ¥ä¿¡å·çš„ï¼Œåªæ˜¯å®ç°é€šçŸ¥çš„è¯ï¼ŒJavaæœ‰å…¶ä»–æ›´å¥½çš„é€‰æ‹©ã€‚<br>å› InterruptedExceptioné€€å‡ºåŒæ­¥ä»£ç å—ä¼šé‡Šæ”¾å½“å‰çº¿ç¨‹æŒæœ‰çš„é”ï¼Œæ‰€ä»¥ç›¸æ¯”å¤–éƒ¨å¼ºåˆ¶stopæ˜¯å®‰å…¨çš„ï¼ˆå·²æ‰‹åŠ¨æµ‹è¯•ï¼‰ã€‚sleepã€joinç­‰ä¼šæŠ›å‡ºInterruptedExceptionçš„æ“ä½œä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œwaitåœ¨è¢«å”¤é†’ä¹‹åæ‰ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆå°±åƒé˜»å¡ä¸€æ ·ï¼Œä¸è¢«æ‰“æ‰°ï¼‰ã€‚<br>å¦å¤–ï¼Œæ„Ÿè°¢è€å¸ˆæé†’ï¼ŒI&#47;Oé˜»å¡åœ¨Javaä¸­æ˜¯å¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶å‘åŒ…ä¸­çš„lockæ˜¯ç­‰å¾…çŠ¶æ€ã€‚ [7èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-19 20:04:43</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">èƒ½å’Œç¡¬ä»¶ä¸­æ–­è”ç³»èµ·æ¥ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ‚Ÿ  2019-03-19 12:23:52
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆ stopæ–¹æ³•ç›´æ¥æ€æ‰çº¿ç¨‹äº†ï¼Œä»€ä¹ˆä¸ä¼šé‡Šæ”¾é”å‘¢ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-19 20:12:36</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘ä¹Ÿä¸çŸ¥é“æjvmçš„äººå’‹æƒ³çš„<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å‘å¾€çš„ç”Ÿæ´»  2019-03-19 15:15:41
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å½“çº¿ç¨‹ A å¤„äº WAITINGã€TIMED_WAITING çŠ¶æ€æ—¶ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨çº¿ç¨‹ A çš„ interrupt() æ–¹æ³•ï¼Œä¼šä½¿çº¿ç¨‹ A è¿”å›åˆ° RUNNABLE çŠ¶æ€ï¼ŒåŒæ—¶çº¿ç¨‹ A çš„ä»£ç ä¼šè§¦å‘ InterruptedException å¼‚å¸¸ã€‚æ­¤æ—¶å¦‚æœçº¿ç¨‹Aè·å–ä¸åˆ°é”ï¼Œå²‚ä¸æ˜¯ä¼šç«‹é©¬åˆå˜æˆBLOCKED çŠ¶æ€ï¼Ÿ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-20 08:39:40</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘ä¼°è®¡ä¸ä¼šæœ‰ä¸­é—´çš„runnableï¼Œåªæ˜¯æ¢ä¸ªé˜Ÿåˆ—è€Œå·²<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            alias cd=rm -rf  2019-03-19 10:10:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ€è€ƒé¢˜ï¼Œä¸èƒ½ä¸­æ–­å¾ªç¯ï¼Œå¼‚å¸¸æ•è·è¦æ”¾åœ¨whileå¾ªç¯å¤–é¢<br> [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-19 20:20:18</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä½ è¿™ä¹Ÿæ˜¯ä¸ªåŠæ³•<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Junzi  2019-03-26 10:08:10
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å½“å‘èµ·ä¸­æ–­ä¹‹åï¼ŒThread.sleep(100);ä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸ï¼Œè€Œè¿™ä¸ªæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ä¼šæ¸…é™¤å½“å‰çº¿ç¨‹çš„ä¸­æ–­æ ‡è¯†ï¼Œå¯¼è‡´th.isInterrupted()ä¸€ç›´éƒ½æ˜¯è¿”å›falseçš„ã€‚<br><br>InterruptedException - if any thread has interrupted the current thread. The interrupted status of the current thread is cleared when this exception is thrown. [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-28 21:51:35</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¿ è‰¾ä¸€ç”Ÿ  2019-03-19 22:55:38
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¿™æ®µä»£ç ä¸­çš„çº¿ç¨‹å¯¹è±¡å¹¶æ²¡æœ‰è°ƒç”¨th.interruptï¼ˆï¼‰,åªæ˜¯è°ƒç”¨äº†sleep()æ–¹æ³•ï¼Œæ­¤æ—¶çº¿ç¨‹å¹¶æ²¡æœ‰ä¸­æ–­ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œsleepï¼ˆï¼‰è¿‡åï¼Œçº¿ç¨‹ç»§ç»­è‡ªåŠ¨æ‰§è¡Œã€‚æ‰€ä»¥ä¹Ÿä¸ä¼šè¿›å…¥åˆ°ifä»£ç å—ã€‚<br>ä¸çŸ¥é“æˆ‘è¯´çš„å¯¹ä¸å¯¹å•Šè€å¸ˆã€‚ã€‚ã€‚ [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            åˆ˜æ™“æ—  2019-03-19 18:48:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ„Ÿè°¢è€å¸ˆæé†’ï¼ŒåŸæ¥jvmå±‚é¢çš„çº¿ç¨‹çŠ¶æ€å’Œoså±‚é¢ä¸Šçš„çº¿ç¨‹çŠ¶æ€æ˜¯ä¸ä¸€æ ·çš„ï¼Œi&#47;oæŒ‚èµ·åœ¨jvmä¹Ÿæ˜¯runableçŠ¶æ€ã€‚å¦å¤–å¹¶å‘åŒ…çš„lockå…¶å®æ˜¯å¤„äºwaittingçŠ¶æ€ã€‚<br>ä½†æ˜¯æœ‰ä¸ªç–‘é—®ï¼Œjvmä¸­blockedçŠ¶æ€çš„çº¿ç¨‹å’ŒwaittingçŠ¶æ€çš„çº¿ç¨‹ï¼Œé™¤äº†å¤„åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¹‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿæˆ‘è¿™é‡Œé—®çš„åŒºåˆ«åŒ…æ‹¬jvmå’Œosä¸¤ä¸ªå±‚é¢ï¼Œè°¢è°¢è€å¸ˆ [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-20 08:33:15</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">blockä¸èƒ½å“åº”ä¸­æ–­ï¼Œosé‡Œåº”è¯¥éƒ½æ˜¯ä¼‘çœ çŠ¶æ€ï¼Œå› ä¸ºéƒ½ä¸èƒ½è·å¾—cpuä½¿ç”¨æƒ<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç¼ªæ–‡@æœ‰èµ  2019-04-02 23:07:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            if(th.isInterrupted()) {<br>    break;<br>  }<br>å…¶å®è¿™æ®µä»£ç å®Œå…¨æ²¡å¿…è¦å•Šï¼Œåœ¨æ•è·ä¸­æ–­å¼‚å¸¸åï¼Œç›´æ¥breakå°±å¥½äº† [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ^_^  2019-03-28 18:28:43
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            class MyThread extends Thread {<br>      @Override<br>       public void run() {<br>      }<br>}<br> [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ren  2019-03-26 22:44:51
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆã€‚é‚£ä¹ˆjvmåœ¨è¿›è¡Œgcçš„æ—¶å€™çš„åœé¡¿æ‰€æœ‰çº¿ç¨‹(stw) è¿™ä¸ªæœŸé—´ jvmä¸­çš„çº¿ç¨‹åº”è¯¥å±äºç”Ÿå‘½å‘¨æœŸçš„å“ªä¸€ä¸ªçŠ¶æ€å‘¢ï¼Ÿ æˆ‘çœ‹åˆ°æœ‰èµ„æ–™è®²çš„æ˜¯ jvmä¸­çš„çº¿ç¨‹ ä¼šå› ä¸ºjvmè®¾ç½®çš„å®‰å…¨ç‚¹å’Œå®‰å…¨åŒºåŸŸ æ‰§è¡ŒtestæŒ‡ä»¤äº§ç”Ÿä¸€ä¸ªè‡ªé™·å¼‚å¸¸ä¿¡å· è¿™ä¸ªæŒ‡ä»¤åº”è¯¥æ˜¯æ±‡ç¼–ä¸­çš„è§¦å‘çº¿ç¨‹ä¸­æ–­çš„ é‚£ä¹ˆä¹‹åçš„æ¢å¤æˆè¿è¡ŒçŠ¶æ€ä¹Ÿéƒ½æ˜¯äº¤ç»™æ“ä½œç³»ç»Ÿå±‚é¢æ¥å®ç°çš„å—ï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-27 09:03:46</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">çº¿ç¨‹è°ƒåº¦æ˜¯äº¤ç»™æ“ä½œç³»ç»Ÿçš„ï¼ŒstwæœŸé—´ä½ çœ‹åˆ°çš„çº¿ç¨‹çŠ¶æ€å’Œstwä¹‹å‰åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œjavaé‡Œçš„çº¿ç¨‹çŠ¶æ€æ˜¯ç»™ä½ çœ‹çš„ï¼Œæ²¡å¿…è¦è®©ä½ çœ‹åˆ°ä¸è¯¥çœ‹çš„ã€‚ä½†æ˜¯stwæœŸé—´æ“ä½œç³»ç»Ÿå±‚é¢çš„çŠ¶æ€åº”è¯¥éƒ½æ˜¯é˜»å¡æ€ï¼Œä¸å…è®¸è°ƒåº¦ã€‚è¿™ä¸ªè¦çœ‹jvmçš„å…·ä½“å®ç°<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            linqw  2019-03-24 22:57:52
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œä¸çŸ¥é“èƒ½å¦åœ¨ç†è®ºè®²è§£æ¸…æ¥šçš„åŒæ—¶ä¹Ÿèƒ½è¡¥ä¸Šå¯¹æºç çš„åˆ†æï¼Œæ¯”å¦‚çº¿ç¨‹açš„interruptæ–¹æ³•è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ï¼Œæœ‰ä¸¤ç§å½¢å¼æ£€æµ‹ï¼Œå¼‚å¸¸å’Œä½¿ç”¨isInterruptedæ£€æµ‹ï¼Œä½†æ˜¯å†…éƒ¨åŸç†è¿˜æ˜¯æ„Ÿè§‰ä¸æ¸…æ¥šä¸æ˜ç™½ï¼Œæ ¹æ®å¼‚å¸¸å®ƒæ˜¯å¦‚ä½•ä¸­æ–­çš„ï¼Ÿè¿˜æœ‰javaæœ‰é˜»å¡å’Œç­‰å¾…çŠ¶æ€ï¼Œä½†æ˜¯æ²¡èƒ½ç†è§£javaä¸ºä»€ä¹ˆè¦å°†å…¶åŒºåˆ†å¼€æ¥ï¼Œæ¯”å¦‚é˜»å¡æ˜¯åœ¨è·å–ä¸åˆ°é”é˜»å¡ï¼Œä¼šåœ¨é”å¯¹è±¡ä¸­çš„é˜Ÿåˆ—æ’é˜Ÿï¼Œwaitç­‰å¾…çŠ¶æ€ï¼Œä¸æ˜¯ä¹Ÿä¼šåœ¨è°ƒç”¨çš„å¯¹è±¡é˜Ÿåˆ—ä¸­æ’é˜Ÿä¹ˆï¼Ÿä¸å¤ªæ¸…æ¥šä¸ºä»€ä¹ˆè¦æ€ä¹ˆåšï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-25 08:44:48</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘å°½é‡ä¸è®²æºç ï¼Œè®²æºç çš„ä¹¦æœ‰å¥½å¤šï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»å‚è€ƒã€‚ä¹Ÿä¸å›æ‹¿å‡ºæ±‡ç¼–æ¥è®²è§£æ€ä¹ˆå®ç°çš„ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šã€‚å¬å®Œè¿™ä¸ªä¸“æ å»å†å»çœ‹ä»£ç ï¼Œä½ ä¼šè§‰å¾—å¾ˆç®€å•ã€‚<br><br>åŒºåˆ†è¿™ä¹ˆå¤šçŠ¶æ€çš„åŸå› æˆ‘ä¹Ÿæ²¡æœ‰æ·±ç©¶ï¼Œå¯èƒ½æ˜¯å†å²åŸå› ï¼Œå¦‚æœå¹¶å‘åŒ…é‡Œçš„é”ä¹Ÿæä¸€çŠ¶æ€ï¼Œå¯èƒ½ä¼šæ›´ä¹±<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Docker  2019-03-20 17:37:21
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æµ‹è¯•è¿‡äº†ï¼Œç¡®å®ä¸€ä¸ªçº¿ç¨‹è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹çŠ¶æ€ä¸ºblocked [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Zach_  2019-03-20 12:16:21
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            <br>public class TestThread {<br><br>	public static void main(String[] args) throws InterruptedException {<br><br>		Worker t = new Worker();<br>		t.start();<br><br>		Thread.sleep(2000);<br>		<br>		System.out.println(&quot;-1-1-1-&quot;);<br>		t.interrupt();<br>		System.out.println(&quot;000000&quot;);<br>		Thread.sleep(2000);<br>		t.stop();<br>		System.out.println(&quot;000111&quot;);<br>		Thread.sleep(2000);<br>		t.join();<br>		System.out.println(&quot;111111&quot;);<br>	}<br><br>}<br><br>class Worker extends Thread {<br><br>	@Override<br>	public void run() {<br>		int i = 0;<br>		while (i&lt;20) {<br>			if (Thread.currentThread().isInterrupted()) {<br>				break;<br>			}<br>			++i;<br>			System.out.println(Thread.currentThread().getName() + &quot;i: &quot; + i);<br>			try {<br>				Thread.sleep(1000);<br>			} catch (InterruptedException e) {<br>				&#47;&#47; TODO Auto-generated catch block<br>				e.printStackTrace();<br>			}<br>		}<br>	}<br>}<br><br>----------------------------------------------------------------------------<br>å¿½ç„¶å‘ç°æå®¢æ—¶é—´ç½‘é¡µç‰ˆçš„ç•™è¨€çª—å£å¥½å°å•Šï¼Œéƒ½çœ‹ä¸åˆ°è‡ªå·±ä¸Šé¢å†™çš„ä¸œè¥¿...<br>----------------------------------------------------------------------------<br><br>1. å¦‚æœworkerä¸­æ²¡æœ‰sleepæ–¹æ³•ï¼Œåˆ™è°ƒç”¨th.interrupt()æ–¹æ³•ä¼šçœŸæ­£çš„ä¸­æ–­thçº¿ç¨‹ï¼Œå¹¶ä¸”ä¸ä¼šæŠ›å‡ºInterruptException ä½†æ˜¯è¯¥æ¼”ç¤ºä»£ç ä¸èƒ½ä½“ç°é”çš„é‡Šæ”¾ï¼›<br>2. å¦‚æœworerä¸­æœ‰sleepæ–¹æ³•ï¼Œåˆ™è°ƒç”¨th.interrupt()æ–¹æ³•ä¼šæŠ› java.lang.InterruptException(), æ˜¯é’ˆå¯¹sleepæ–¹æ³•æŠ›å‡ºçš„<br>	åŒæ ·çš„Objectçš„wait() wait(å¸¦å‚) ä¹Ÿä¼šæŠ›å‡ºjava.lang.InterruptException()è€Œä»å½“å‰çš„wait&#47;blockedçŠ¶æ€è¢«ä¸­æ–­ï¼ˆå”¤é†’ï¼‰<br>	é‚£ä¹Ÿå°±æ˜¯è¯´ï¼Œthrows InterruptedException çš„æ–¹æ³• åœ¨çº¿ç¨‹è¢«è°ƒç”¨interrupt()æ–¹æ³•åï¼Œä¼šè¢«ä»å½“å‰çŠ¶æ€ä¸­æ–­<br>	è‡³äºè°ƒç”¨interrupy()æ–¹æ³•åçº¿ç¨‹çš„çŠ¶æ€å±äºå“ªç§ï¼Œå–å†³äºinterruptæ–¹æ³•å‰çš„æ‰§è¡Œçš„æ–¹æ³•ä½¿å¾—å½“å‰çº¿ç¨‹å¤„äºå“ªç§çŠ¶æ€ï¼Œ<br>	è€å¸ˆçš„æ€»ç»“å¾ˆåˆ°ä½ï¼Œéœ€è¦å¥½å¥½ç†è§£ï¼Œæ„Ÿå—~ï¼<br>3. æ— è®ºworderçš„runä¸­æœ‰æ²¡æœ‰slee()æ–¹æ³•ï¼Œstopéƒ½ä¼šç›´æ¥ä¸­æ–­çº¿ç¨‹ï¼Œå½“å‰æ¼”ç¤ºä»£ç ä¹Ÿæ— æ³•æ¼”ç¤ºé”æ²¡æœ‰è¢«é‡Šæ”¾<br>4. join()æ€»æ˜¯åœ¨ç­‰å¾…è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•<br>5. whileå¾ªç¯æ”¾åœ¨tryé‡Œé¢, åœ¨è°ƒç”¨th.interruptä¹‹åï¼Œå¯ä»¥æœ‰æ•ˆæ•è·InterruptException ä»è€Œä½¿thçº¿ç¨‹ä¸­æ–­<br><br>è¯´çš„æœ‰ç‚¹å¤šäº†ï¼Œ å¤§å®¶å¤šå¤šè®¨è®º~ï¼~ï¼~ï¼<br><br> [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-22 20:30:16</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¥½è®¤çœŸğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æµ·é¸¿  2019-03-19 19:29:00
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¦‚æœçº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼ˆBLOCKEDï¼‰,æ­¤æ—¶è°ƒç”¨çº¿ç¨‹çš„ä¸­æ–­æ–¹æ³•ï¼Œçº¿ç¨‹ä¼šåˆå¦‚ä½•ååº”?<br>æ˜¯å¦ä¼šåƒç­‰å¾…çŠ¶æ€ä¸€æ ·æŠ›å¼‚å¸¸?<br>è¿˜æ˜¯ä¼šåƒè¿è¡ŒçŠ¶æ€ä¸€æ ·è¢«æ ‡è®°ä¸ºå·²ä¸­æ–­çŠ¶æ€?<br>è¿˜æ˜¯ä¸å—åˆ°ä»»ä½•å½±å“?<br>éº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹ğŸ˜ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-20 08:23:28</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">é˜»å¡æ€çš„çº¿ç¨‹ä¸å“åº”ä¸­æ–­ï¼Œå¹¶å‘åŒ…é‡Œçš„é”æœ‰æ–¹æ³•èƒ½å¤Ÿå“åº”ä¸­æ–­<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å°å  2019-03-19 07:53:38
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            isInterruptedæ–¹æ³•åªæ˜¯æ£€æµ‹çº¿ç¨‹æ˜¯å¦è¢«æ ‡è®°ä¸ºäº†ä¸­æ–­çŠ¶æ€ï¼Œè€Œä¸ä¼šæ”¹å˜çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œä»£ç ä¸­ï¼Œæ²¡æœ‰è°ƒç”¨çº¿ç¨‹çš„interruptedæ–¹æ³•ï¼Œæ‰€ä»¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸ºfalseï¼Œwhileå¾ªç¯ä¸ä¼šé€€å‡ºï¼Œä¹Ÿä¸ä¼šæ‹‹InterruptedException [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¸é è°±çš„ç´è°±  2019-03-19 06:41:25
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çº¿ç¨‹å¤„äºrunnableæ—¶å¯ä»¥é€€å‡ºï¼Œæ€è€ƒé¢˜å¤§éƒ¨åˆ†å¤„äº wait_timedçŠ¶æ€ï¼Œå¹¶ä¸”åäº†å¼‚å¸¸ï¼›æ‰€ä»¥æœ‰é‚£ä¹ˆä¸€ä¸¢ä¸¢çš„å‡ ç‡ä¼šé€€å‡ºï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ— æ³•é€€å‡º [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Tristan  2019-04-14 10:31:46
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸ºä»€ä¹ˆå®æˆ˜é«˜å¹¶å‘ç¨‹åºè®¾è®¡åŒ»æœ¯ä¸­å†™é“â€œTread.stop()æ–¹æ³•åœ¨ç»“æŸçº¿ç¨‹æ—¶ï¼Œä¼šç›´æ¥ç»ˆæ­¢çº¿ç¨‹ï¼Œå¹¶ä¸”ä¼šé‡Šæ”¾è¿™ä¸ªçº¿ç¨‹æ‰€æŒæœ‰çš„é”â€ï¼Œè€Œæ‚¨æ–‡ä¸­æ‰€å†™çš„â€œæœçº¿ç¨‹æŒæœ‰ synchronized éšå¼é”ï¼Œä¹Ÿä¸ä¼šé‡Šæ”¾â€ï¼Ÿï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-14 17:18:48</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯æˆ‘çš„é”™ï¼Œæˆ‘ç¡®è®¤äº†ä¸€ä¸‹ï¼Œéšå¼é”å¯ä»¥é‡Šæ”¾ã€‚å¤šè°¢å¤šè°¢ï¼ï¼ï¼<br></div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>