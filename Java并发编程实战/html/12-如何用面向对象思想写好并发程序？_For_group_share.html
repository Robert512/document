<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>12-å¦‚ä½•ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¥½å¹¶å‘ç¨‹åºï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>12-å¦‚ä½•ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¥½å¹¶å‘ç¨‹åºï¼Ÿ</h1>
<p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘å‘ç°å¾ˆå¤šåŒå­¦åœ¨è®¾è®¡ä¹‹åˆéƒ½æ˜¯ç›´æ¥æŒ‰ç…§å•çº¿ç¨‹çš„æ€è·¯æ¥å†™ç¨‹åºçš„ï¼Œè€Œå¿½ç•¥äº†æœ¬åº”è¯¥é‡è§†çš„å¹¶å‘é—®é¢˜ï¼›ç­‰ä¸Šçº¿åçš„æŸå¤©ï¼Œçªç„¶å‘ç°è¯¡å¼‚çš„Bugï¼Œå†å†ç»åƒè¾›ä¸‡è‹¦ç»ˆäºå®šä½åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå´å‘ç°å¯¹äºå¦‚ä½•è§£å†³å·²ç»æ²¡æœ‰äº†æ€è·¯ã€‚</p><p>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—å’±ä»¬ä»Šå¤©å¾ˆæœ‰å¿…è¦å¥½å¥½èŠèŠâ€œå¦‚ä½•ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¥½å¹¶å‘ç¨‹åºâ€è¿™ä¸ªè¯é¢˜ã€‚</p><p>é¢å‘å¯¹è±¡æ€æƒ³ä¸å¹¶å‘ç¼–ç¨‹æœ‰å…³ç³»å—ï¼Ÿæœ¬æ¥æ˜¯æ²¡å…³ç³»çš„ï¼Œå®ƒä»¬åˆ†å±ä¸¤ä¸ªä¸åŒçš„é¢†åŸŸï¼Œä½†æ˜¯åœ¨Javaè¯­è¨€é‡Œï¼Œè¿™ä¸¤ä¸ªé¢†åŸŸè¢«æ— æƒ…åœ°èåˆåœ¨ä¸€èµ·äº†ï¼Œå¥½åœ¨èåˆçš„æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼š<strong>åœ¨Javaè¯­è¨€é‡Œï¼Œé¢å‘å¯¹è±¡æ€æƒ³èƒ½å¤Ÿè®©å¹¶å‘ç¼–ç¨‹å˜å¾—æ›´ç®€å•</strong>ã€‚</p><p>é‚£å¦‚ä½•æ‰èƒ½ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¥½å¹¶å‘ç¨‹åºå‘¢ï¼Ÿç»“åˆæˆ‘è‡ªå·±çš„å·¥ä½œç»éªŒæ¥çœ‹ï¼Œæˆ‘è§‰å¾—ä½ å¯ä»¥ä»å°è£…å…±äº«å˜é‡ã€è¯†åˆ«å…±äº«å˜é‡é—´çš„çº¦æŸæ¡ä»¶å’Œåˆ¶å®šå¹¶å‘è®¿é—®ç­–ç•¥è¿™ä¸‰ä¸ªæ–¹é¢ä¸‹æ‰‹ã€‚</p><h2>ä¸€ã€å°è£…å…±äº«å˜é‡</h2><p>å¹¶å‘ç¨‹åºï¼Œæˆ‘ä»¬å…³æ³¨çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œä¸è¿‡æ˜¯è§£å†³å¤šçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«å˜é‡çš„é—®é¢˜ã€‚åœ¨<a href="https://time.geekbang.org/column/article/84344">ã€Š03 | äº’æ–¥é”ï¼ˆä¸Šï¼‰ï¼šè§£å†³åŸå­æ€§é—®é¢˜ã€‹</a>ä¸­ï¼Œæˆ‘ä»¬ç±»æ¯”è¿‡çƒåœºé—¨ç¥¨çš„ç®¡ç†ï¼Œç°å®ä¸–ç•Œé‡Œé—¨ç¥¨ç®¡ç†çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜æ˜¯ï¼šæ‰€æœ‰è§‚ä¼—åªèƒ½é€šè¿‡è§„å®šçš„å…¥å£è¿›å…¥ï¼Œå¦åˆ™æ£€ç¥¨å°±å½¢åŒè™šè®¾ã€‚åœ¨ç¼–ç¨‹ä¸–ç•Œè¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆé‡è¦ï¼Œç¼–ç¨‹é¢†åŸŸé‡Œé¢å¯¹äºå…±äº«å˜é‡çš„è®¿é—®è·¯å¾„å°±ç±»ä¼¼äºçƒåœºçš„å…¥å£ï¼Œå¿…é¡»ä¸¥æ ¼æ§åˆ¶ã€‚å¥½åœ¨æœ‰äº†é¢å‘å¯¹è±¡æ€æƒ³ï¼Œå¯¹å…±äº«å˜é‡çš„è®¿é—®è·¯å¾„å¯ä»¥è½»æ¾æŠŠæ§ã€‚</p><!-- [[[read_end]]] --><p>é¢å‘å¯¹è±¡æ€æƒ³é‡Œé¢æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§æ˜¯<strong>å°è£…</strong>ï¼Œå°è£…çš„é€šä¿—è§£é‡Šå°±æ˜¯<strong>å°†å±æ€§å’Œå®ç°ç»†èŠ‚å°è£…åœ¨å¯¹è±¡å†…éƒ¨</strong>ï¼Œå¤–ç•Œå¯¹è±¡<strong>åªèƒ½é€šè¿‡</strong>ç›®æ ‡å¯¹è±¡æä¾›çš„<strong>å…¬å…±æ–¹æ³•æ¥é—´æ¥è®¿é—®</strong>è¿™äº›å†…éƒ¨å±æ€§ï¼Œè¿™å’Œé—¨ç¥¨ç®¡ç†æ¨¡å‹åŒ¹é…åº¦ç›¸å½“çš„é«˜ï¼Œçƒåœºé‡Œçš„åº§ä½å°±æ˜¯å¯¹è±¡å±æ€§ï¼Œçƒåœºå…¥å£å°±æ˜¯å¯¹è±¡çš„å…¬å…±æ–¹æ³•ã€‚æˆ‘ä»¬æŠŠå…±äº«å˜é‡ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé‚£å¯¹äºå…±äº«å˜é‡çš„è®¿é—®è·¯å¾„å°±æ˜¯å¯¹è±¡çš„å…¬å…±æ–¹æ³•ï¼Œæ‰€æœ‰å…¥å£éƒ½è¦å®‰æ’æ£€ç¥¨ç¨‹åºå°±ç›¸å½“äºæˆ‘ä»¬å‰é¢æåˆ°çš„å¹¶å‘è®¿é—®ç­–ç•¥ã€‚</p><p>åˆ©ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¹¶å‘ç¨‹åºçš„æ€è·¯ï¼Œå…¶å®å°±è¿™ä¹ˆç®€å•ï¼š<strong>å°†å…±äº«å˜é‡ä½œä¸ºå¯¹è±¡å±æ€§å°è£…åœ¨å†…éƒ¨ï¼Œå¯¹æ‰€æœ‰å…¬å…±æ–¹æ³•åˆ¶å®šå¹¶å‘è®¿é—®ç­–ç•¥</strong>ã€‚å°±æ‹¿å¾ˆå¤šç»Ÿè®¡ç¨‹åºéƒ½è¦ç”¨åˆ°è®¡æ•°å™¨æ¥è¯´ï¼Œä¸‹é¢çš„è®¡æ•°å™¨ç¨‹åºå…±äº«å˜é‡åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯valueï¼Œæˆ‘ä»¬æŠŠå®ƒä½œä¸ºCounterç±»çš„å±æ€§ï¼Œå¹¶ä¸”å°†ä¸¤ä¸ªå…¬å…±æ–¹æ³•get()å’ŒaddOne()å£°æ˜ä¸ºåŒæ­¥æ–¹æ³•ï¼Œè¿™æ ·Counterç±»å°±æˆä¸ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç±»äº†ã€‚</p><pre><code>public class Counter {
  private long value;
  synchronized long get(){
    return value;
  }
  synchronized long addOne(){
    return ++value;
  }
}
</code></pre><p>å½“ç„¶ï¼Œå®é™…å·¥ä½œä¸­ï¼Œå¾ˆå¤šçš„åœºæ™¯éƒ½ä¸ä¼šåƒè®¡æ•°å™¨è¿™ä¹ˆç®€å•ï¼Œç»å¸¸è¦é¢ä¸´çš„æƒ…å†µå¾€å¾€æ˜¯æœ‰å¾ˆå¤šçš„å…±äº«å˜é‡ï¼Œä¾‹å¦‚ï¼Œä¿¡ç”¨å¡è´¦æˆ·æœ‰å¡å·ã€å§“åã€èº«ä»½è¯ã€ä¿¡ç”¨é¢åº¦ã€å·²å‡ºè´¦å•ã€æœªå‡ºè´¦å•ç­‰å¾ˆå¤šå…±äº«å˜é‡ã€‚è¿™ä¹ˆå¤šçš„å…±äº«å˜é‡ï¼Œå¦‚æœæ¯ä¸€ä¸ªéƒ½è€ƒè™‘å®ƒçš„å¹¶å‘å®‰å…¨é—®é¢˜ï¼Œé‚£æˆ‘ä»¬å°±ç´¯æ­»äº†ã€‚ä½†å…¶å®ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°ï¼Œå¾ˆå¤šå…±äº«å˜é‡çš„å€¼æ˜¯ä¸ä¼šå˜çš„ï¼Œä¾‹å¦‚ä¿¡ç”¨å¡è´¦æˆ·çš„å¡å·ã€å§“åã€èº«ä»½è¯ã€‚<strong>å¯¹äºè¿™äº›ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„å…±äº«å˜é‡ï¼Œå»ºè®®ä½ ç”¨finalå…³é”®å­—æ¥ä¿®é¥°</strong>ã€‚è¿™æ ·æ—¢èƒ½é¿å…å¹¶å‘é—®é¢˜ï¼Œä¹Ÿèƒ½å¾ˆæ˜äº†åœ°è¡¨æ˜ä½ çš„è®¾è®¡æ„å›¾ï¼Œè®©åé¢æ¥æ‰‹ä½ ç¨‹åºçš„å…„å¼ŸçŸ¥é“ï¼Œä½ å·²ç»è€ƒè™‘è¿‡è¿™äº›å…±äº«å˜é‡çš„å¹¶å‘å®‰å…¨é—®é¢˜äº†ã€‚</p><h2>äºŒã€è¯†åˆ«å…±äº«å˜é‡é—´çš„çº¦æŸæ¡ä»¶</h2><p>è¯†åˆ«å…±äº«å˜é‡é—´çš„çº¦æŸæ¡ä»¶éå¸¸é‡è¦ã€‚å› ä¸º<strong>è¿™äº›çº¦æŸæ¡ä»¶ï¼Œå†³å®šäº†å¹¶å‘è®¿é—®ç­–ç•¥</strong>ã€‚ä¾‹å¦‚ï¼Œåº“å­˜ç®¡ç†é‡Œé¢æœ‰ä¸ªåˆç†åº“å­˜çš„æ¦‚å¿µï¼Œåº“å­˜é‡ä¸èƒ½å¤ªé«˜ï¼Œä¹Ÿä¸èƒ½å¤ªä½ï¼Œå®ƒæœ‰ä¸€ä¸ªä¸Šé™å’Œä¸€ä¸ªä¸‹é™ã€‚å…³äºè¿™äº›çº¦æŸæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹ã€‚åœ¨ç±»SafeWMä¸­ï¼Œå£°æ˜äº†ä¸¤ä¸ªæˆå‘˜å˜é‡upperå’Œlowerï¼Œåˆ†åˆ«ä»£è¡¨åº“å­˜ä¸Šé™å’Œåº“å­˜ä¸‹é™ï¼Œè¿™ä¸¤ä¸ªå˜é‡ç”¨äº†AtomicLongè¿™ä¸ªåŸå­ç±»ï¼ŒåŸå­ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæˆå‘˜å˜é‡çš„setæ–¹æ³•å°±ä¸éœ€è¦åŒæ­¥äº†ã€‚</p><pre><code>public class SafeWM {
  // åº“å­˜ä¸Šé™
  private final AtomicLong upper =
        new AtomicLong(0);
  // åº“å­˜ä¸‹é™
  private final AtomicLong lower =
        new AtomicLong(0);
  // è®¾ç½®åº“å­˜ä¸Šé™
  void setUpper(long v){
    upper.set(v);
  }
  // è®¾ç½®åº“å­˜ä¸‹é™
  void setLower(long v){
    lower.set(v);
  }
  // çœç•¥å…¶ä»–ä¸šåŠ¡ä»£ç 
}
</code></pre><p>è™½è¯´ä¸Šé¢çš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¿½è§†äº†ä¸€ä¸ªçº¦æŸæ¡ä»¶ï¼Œå°±æ˜¯<strong>åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™</strong>ï¼Œè¿™ä¸ªçº¦æŸæ¡ä»¶èƒ½å¤Ÿç›´æ¥åŠ åˆ°ä¸Šé¢çš„setæ–¹æ³•ä¸Šå—ï¼Ÿæˆ‘ä»¬å…ˆç›´æ¥åŠ ä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼ˆå¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼‰ã€‚æˆ‘ä»¬åœ¨setUpper()å’ŒsetLower()ä¸­å¢åŠ äº†å‚æ•°æ ¡éªŒï¼Œè¿™ä¹çœ‹ä¸Šå»å¥½åƒæ˜¯å¯¹çš„ï¼Œä½†å…¶å®å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œé—®é¢˜åœ¨äºå­˜åœ¨ç«æ€æ¡ä»¶ã€‚è¿™é‡Œæˆ‘é¡ºä¾¿æ’ä¸€å¥ï¼Œå…¶å®å½“ä½ çœ‹åˆ°ä»£ç é‡Œå‡ºç°ifè¯­å¥çš„æ—¶å€™ï¼Œå°±åº”è¯¥ç«‹åˆ»æ„è¯†åˆ°å¯èƒ½å­˜åœ¨ç«æ€æ¡ä»¶ã€‚</p><p>æˆ‘ä»¬å‡è®¾åº“å­˜çš„ä¸‹é™å’Œä¸Šé™åˆ†åˆ«æ˜¯(2,10)ï¼Œçº¿ç¨‹Aè°ƒç”¨setUpper(5)å°†ä¸Šé™è®¾ç½®ä¸º5ï¼Œçº¿ç¨‹Bè°ƒç”¨setLower(7)å°†ä¸‹é™è®¾ç½®ä¸º7ï¼Œå¦‚æœçº¿ç¨‹Aå’Œçº¿ç¨‹Bå®Œå…¨åŒæ—¶æ‰§è¡Œï¼Œä½ ä¼šå‘ç°çº¿ç¨‹Aèƒ½å¤Ÿé€šè¿‡å‚æ•°æ ¡éªŒï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ï¼Œä¸‹é™è¿˜æ²¡æœ‰è¢«çº¿ç¨‹Bè®¾ç½®ï¼Œè¿˜æ˜¯2ï¼Œè€Œ5&gt;2ï¼›çº¿ç¨‹Bä¹Ÿèƒ½å¤Ÿé€šè¿‡å‚æ•°æ ¡éªŒï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ï¼Œä¸Šé™è¿˜æ²¡æœ‰è¢«çº¿ç¨‹Aè®¾ç½®ï¼Œè¿˜æ˜¯10ï¼Œè€Œ7&lt;10ã€‚å½“çº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½é€šè¿‡å‚æ•°æ ¡éªŒåï¼Œå°±æŠŠåº“å­˜çš„ä¸‹é™å’Œä¸Šé™è®¾ç½®æˆ(7, 5)äº†ï¼Œæ˜¾ç„¶æ­¤æ—¶çš„ç»“æœæ˜¯ä¸ç¬¦åˆ<strong>åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™</strong>è¿™ä¸ªçº¦æŸæ¡ä»¶çš„ã€‚</p><pre><code>public class SafeWM {
  // åº“å­˜ä¸Šé™
  private final AtomicLong upper =
        new AtomicLong(0);
  // åº“å­˜ä¸‹é™
  private final AtomicLong lower =
        new AtomicLong(0);
  // è®¾ç½®åº“å­˜ä¸Šé™
  void setUpper(long v){
    // æ£€æŸ¥å‚æ•°åˆæ³•æ€§
    if (v &lt; lower.get()) {
      throw new IllegalArgumentException();
    }
    upper.set(v);
  }
  // è®¾ç½®åº“å­˜ä¸‹é™
  void setLower(long v){
    // æ£€æŸ¥å‚æ•°åˆæ³•æ€§
    if (v &gt; upper.get()) {
      throw new IllegalArgumentException();
    }
    lower.set(v);
  }
  // çœç•¥å…¶ä»–ä¸šåŠ¡ä»£ç 
}
</code></pre><p>åœ¨æ²¡æœ‰è¯†åˆ«å‡º<strong>åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™</strong>è¿™ä¸ªçº¦æŸæ¡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬åˆ¶å®šçš„å¹¶å‘è®¿é—®ç­–ç•¥æ˜¯åˆ©ç”¨åŸå­ç±»ï¼Œä½†æ˜¯è¿™ä¸ªç­–ç•¥ï¼Œå®Œå…¨ä¸èƒ½ä¿è¯<strong>åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™</strong>è¿™ä¸ªçº¦æŸæ¡ä»¶ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨è®¾è®¡é˜¶æ®µï¼Œæˆ‘ä»¬<strong>ä¸€å®šè¦è¯†åˆ«å‡ºæ‰€æœ‰å…±äº«å˜é‡ä¹‹é—´çš„çº¦æŸæ¡ä»¶ï¼Œå¦‚æœçº¦æŸæ¡ä»¶è¯†åˆ«ä¸è¶³ï¼Œå¾ˆå¯èƒ½å¯¼è‡´åˆ¶å®šçš„å¹¶å‘è®¿é—®ç­–ç•¥å—è¾•åŒ—è¾™</strong>ã€‚</p><p>å…±äº«å˜é‡ä¹‹é—´çš„çº¦æŸæ¡ä»¶ï¼Œåæ˜ åœ¨ä»£ç é‡Œï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šæœ‰ifè¯­å¥ï¼Œæ‰€ä»¥ï¼Œä¸€å®šè¦ç‰¹åˆ«æ³¨æ„ç«æ€æ¡ä»¶ã€‚</p><h2>ä¸‰ã€åˆ¶å®šå¹¶å‘è®¿é—®ç­–ç•¥</h2><p>åˆ¶å®šå¹¶å‘è®¿é—®ç­–ç•¥ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„äº‹æƒ…ã€‚åº”è¯¥è¯´æ•´ä¸ªä¸“æ éƒ½æ˜¯åœ¨å°è¯•æå®šå®ƒã€‚ä¸è¿‡ä»æ–¹æ¡ˆä¸Šæ¥çœ‹ï¼Œæ— å¤–ä¹å°±æ˜¯ä»¥ä¸‹â€œä¸‰ä»¶äº‹â€ã€‚</p><ol>
<li>é¿å…å…±äº«ï¼šé¿å…å…±äº«çš„æŠ€æœ¯ä¸»è¦æ˜¯åˆ©äºçº¿ç¨‹æœ¬åœ°å­˜å‚¨ä»¥åŠä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ç‹¬ç«‹çš„çº¿ç¨‹ã€‚</li>
<li>ä¸å˜æ¨¡å¼ï¼šè¿™ä¸ªåœ¨Javaé¢†åŸŸåº”ç”¨çš„å¾ˆå°‘ï¼Œä½†åœ¨å…¶ä»–é¢†åŸŸå´æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚Actoræ¨¡å¼ã€CSPæ¨¡å¼ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹çš„åŸºç¡€éƒ½æ˜¯ä¸å˜æ¨¡å¼ã€‚</li>
<li>ç®¡ç¨‹åŠå…¶ä»–åŒæ­¥å·¥å…·ï¼šJavaé¢†åŸŸä¸‡èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç®¡ç¨‹ï¼Œä½†æ˜¯å¯¹äºå¾ˆå¤šç‰¹å®šåœºæ™¯ï¼Œä½¿ç”¨Javaå¹¶å‘åŒ…æä¾›çš„è¯»å†™é”ã€å¹¶å‘å®¹å™¨ç­‰åŒæ­¥å·¥å…·ä¼šæ›´å¥½ã€‚</li>
</ol><p>æ¥ä¸‹æ¥åœ¨å’±ä»¬ä¸“æ çš„ç¬¬äºŒæ¨¡å—æˆ‘ä¼šä»”ç»†è®²è§£Javaå¹¶å‘å·¥å…·ç±»ä»¥åŠä»–ä»¬çš„åº”ç”¨åœºæ™¯ï¼Œåœ¨ç¬¬ä¸‰æ¨¡å—æˆ‘è¿˜ä¼šè®²è§£å¹¶å‘ç¼–ç¨‹çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™äº›éƒ½æ˜¯å’Œåˆ¶å®šå¹¶å‘è®¿é—®ç­–ç•¥æœ‰å…³çš„ã€‚</p><p>é™¤äº†è¿™äº›æ–¹æ¡ˆä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å®è§‚çš„åŸåˆ™éœ€è¦ä½ äº†è§£ã€‚è¿™äº›å®è§‚åŸåˆ™ï¼Œæœ‰åŠ©äºä½ å†™å‡ºâ€œå¥å£®â€çš„å¹¶å‘ç¨‹åºã€‚è¿™äº›åŸåˆ™ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰æ¡ã€‚</p><ol>
<li>ä¼˜å…ˆä½¿ç”¨æˆç†Ÿçš„å·¥å…·ç±»ï¼šJava SDKå¹¶å‘åŒ…é‡Œæä¾›äº†ä¸°å¯Œçš„å·¥å…·ç±»ï¼ŒåŸºæœ¬ä¸Šèƒ½æ»¡è¶³ä½ æ—¥å¸¸çš„éœ€è¦ï¼Œå»ºè®®ä½ ç†Ÿæ‚‰å®ƒä»¬ï¼Œç”¨å¥½å®ƒä»¬ï¼Œè€Œä¸æ˜¯è‡ªå·±å†â€œå‘æ˜è½®å­â€ï¼Œæ¯•ç«Ÿå¹¶å‘å·¥å…·ç±»ä¸æ˜¯éšéšä¾¿ä¾¿å°±èƒ½å‘æ˜æˆåŠŸçš„ã€‚</li>
<li>è¿«ä¸å¾—å·²æ—¶æ‰ä½¿ç”¨ä½çº§çš„åŒæ­¥åŸè¯­ï¼šä½çº§çš„åŒæ­¥åŸè¯­ä¸»è¦æŒ‡çš„æ˜¯synchronizedã€Lockã€Semaphoreç­‰ï¼Œè¿™äº›è™½ç„¶æ„Ÿè§‰ç®€å•ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡é‚£ä¹ˆç®€å•ï¼Œä¸€å®šè¦å°å¿ƒä½¿ç”¨ã€‚</li>
<li>é¿å…è¿‡æ—©ä¼˜åŒ–ï¼šå®‰å…¨ç¬¬ä¸€ï¼Œå¹¶å‘ç¨‹åºé¦–å…ˆè¦ä¿è¯å®‰å…¨ï¼Œå‡ºç°æ€§èƒ½ç“¶é¢ˆåå†ä¼˜åŒ–ã€‚åœ¨è®¾è®¡æœŸå’Œå¼€å‘æœŸï¼Œå¾ˆå¤šäººç»å¸¸ä¼šæƒ…ä¸è‡ªç¦åœ°é¢„ä¼°æ€§èƒ½çš„ç“¶é¢ˆï¼Œå¹¶å¯¹æ­¤å®æ–½ä¼˜åŒ–ï¼Œä½†æ®‹é…·çš„ç°å®å´æ˜¯ï¼šæ€§èƒ½ç“¶é¢ˆä¸æ˜¯ä½ æƒ³é¢„ä¼°å°±èƒ½é¢„ä¼°çš„ã€‚</li>
</ol><h2>æ€»ç»“</h2><p>åˆ©ç”¨é¢å‘å¯¹è±¡æ€æƒ³ç¼–å†™å¹¶å‘ç¨‹åºï¼Œä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯åˆ©ç”¨é¢å‘å¯¹è±¡é‡Œçš„å°è£…ç‰¹æ€§ï¼Œç”±äºç¯‡å¹…åŸå› ï¼Œè¿™é‡Œæˆ‘åªåšäº†ç®€å•ä»‹ç»ï¼Œè¯¦ç»†çš„ä½ å¯ä»¥å€ŸåŠ©ç›¸å…³èµ„æ–™å®šå‘å­¦ä¹ ã€‚è€Œå¯¹å…±äº«å˜é‡è¿›è¡Œå°è£…ï¼Œè¦é¿å…â€œé€¸å‡ºâ€ï¼Œæ‰€è°“â€œé€¸å‡ºâ€ç®€å•è®²å°±æ˜¯å…±äº«å˜é‡é€ƒé€¸åˆ°å¯¹è±¡çš„å¤–é¢ï¼Œæ¯”å¦‚åœ¨<a href="https://time.geekbang.org/column/article/84017">ã€Š02 | Javaå†…å­˜æ¨¡å‹ï¼šçœ‹Javaå¦‚ä½•è§£å†³å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ã€‹</a>é‚£ä¸€ç¯‡æˆ‘ä»¬å·²ç»è®²è¿‡æ„é€ å‡½æ•°é‡Œçš„thisâ€œé€¸å‡ºâ€ã€‚è¿™äº›éƒ½æ˜¯å¿…é¡»è¦é¿å…çš„ã€‚</p><p>è¿™æ˜¯æˆ‘ä»¬ä¸“æ å¹¶å‘ç†è®ºåŸºç¡€çš„æœ€åä¸€éƒ¨åˆ†å†…å®¹ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸»è¦æ˜¯è®©ä½ å¯¹å¹¶å‘ç¼–ç¨‹æœ‰ä¸€ä¸ªå…¨é¢çš„è®¤è¯†ï¼Œè®©ä½ äº†è§£å¹¶å‘ç¼–ç¨‹é‡Œçš„å„ç§æ¦‚å¿µï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå½“ç„¶ç»ˆæç›®æ ‡æ˜¯è®©ä½ çŸ¥é“é‡åˆ°å¹¶å‘é—®é¢˜è¯¥æ€ä¹ˆæ€è€ƒã€‚è¿™éƒ¨åˆ†çš„å†…å®¹è¿˜æ˜¯æœ‰ç‚¹çƒ§è„‘çš„ï¼Œä½†ä¸“æ åé¢å‡ ä¸ªæ¨¡å—çš„å†…å®¹éƒ½æ˜¯å…·ä½“çš„å®è·µéƒ¨åˆ†ï¼Œç›¸å¯¹æ¥è¯´å°±å®¹æ˜“å¤šäº†ã€‚æˆ‘ä»¬ä¸€èµ·åšæŒå§ï¼</p><h2>è¯¾åæ€è€ƒ</h2><p>æœ¬æœŸç¤ºä¾‹ä»£ç ä¸­ï¼Œç±»SafeWMä¸æ»¡è¶³åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™è¿™ä¸ªçº¦æŸæ¡ä»¶ï¼Œé‚£ä½ æ¥è¯•è¯•ä¿®æ”¹ä¸€ä¸‹ï¼Œè®©å®ƒèƒ½å¤Ÿåœ¨å¹¶å‘æ¡ä»¶ä¸‹æ»¡è¶³åº“å­˜ä¸‹é™è¦å°äºåº“å­˜ä¸Šé™è¿™ä¸ªçº¦æŸæ¡ä»¶ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><p>å…³äºè¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œå¦‚æœä½ è§‰å¾—è¿˜ä¸â€œè¿‡ç˜¾â€ï¼Œè¿™é‡Œæˆ‘å†ç»™ä½ æ¨èä¸€æœ¬ä¹¦å§â€”â€”<a href="https://h5.youzan.com/v2/goods/2758xqdzr6uuw">ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</a>ï¼Œè¿™æœ¬ä¹¦çš„ç¬¬ä¸‰ç« ã€Šå¯¹è±¡çš„å…±äº«ã€‹ã€ç¬¬å››ç« ã€Šå¯¹è±¡çš„ç»„åˆã€‹å…¨é¢åœ°ä»‹ç»äº†å¦‚ä½•æ„å»ºçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œä½ å¯ä»¥æ‹¿æ¥æ·±å…¥åœ°å­¦ä¹ ã€‚</p><h1>çŒœä½ å–œæ¬¢</h1><p><a href="https://time.geekbang.org/course/intro/156?utm_term=zeusRVDGT&amp;utm_source=app&amp;utm_medium=javabingfabiancheng&amp;utm_campaign=156-onsell&amp;utm_content=banner0301"><img src="https://static001.geekbang.org/resource/image/8e/93/8e1906fb8a24d5eb66539fa88ea56193.png" alt="unpreview"></a></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æµ·é¸¿  2019-03-26 21:25:53
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘çœ‹æœ‰äº›äººè¯„è®ºç”¨volatieï¼Œvolatieåªèƒ½ä¿è¯å¯è§æ€§ï¼Œä½†æ˜¯ä¿è¯ä¸äº†åŸå­æ€§ï¼Œæ‰€ä»¥å¾—åŠ é”ä¿è¯äº’æ–¥ã€‚<br>è€å¸ˆæˆ‘è¿™æ ·ç†è§£å¯¹å—ï¼Ÿ [10èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-27 08:39:14</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç›¸å½“æ­£ç¡®ï¼<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QQæ€ª  2019-03-27 18:37:21
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¿…é¡»åŠ é”å•Šï¼Œsynchronized (this)å°±è¡Œäº†ï¼Œæœ€ç®€å•åŠ é”å§ï¼Œvolatileåªèƒ½ä¿è¯å†…å­˜å¯è§æ€§ï¼Œå¹¶ä¸èƒ½ä¿è¯åŸå­æ€§ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-27 21:39:19</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æŠ½ç¦»ã®â¤ï¸  2019-03-26 08:04:50
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆã€è®²çš„çœŸå¥½ï¼ [3èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ— åº¸  2019-03-26 07:52:17
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            compareAndSetå§<br><br>void setUpperï¼ˆlong vï¼‰{<br>  upper.compareAndSet(upper.longValue<br>(),v);<br>} [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-26 09:07:46</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä¸æ»¡è¶³åˆç†åº“å­˜çš„çº¦æŸæ¡ä»¶<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ‚Ÿç©º  2019-03-26 14:21:37
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è®¿é—®æ—¶ä½¿ç”¨syncchronizeå¯¹ç±»åŠ é”ã€‚ä¿è¯å˜é‡è®¿é—®çš„äº’æ–¥ [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-26 20:53:56</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯¹è±¡åŠ é”å°±å¯ä»¥äº†<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Lemon  2019-03-26 10:47:24
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä½¿ç”¨ Condition<br>public class SafeWM {<br><br>    &#47;&#47; åº“å­˜ä¸Šé™<br>    private final AtomicLong upper =<br>            new AtomicLong(10);<br>    &#47;&#47; åº“å­˜ä¸‹é™<br>    private final AtomicLong lower =<br>            new AtomicLong(2);<br><br>    private ReentrantLock lock = new ReentrantLock();<br>    private Condition c1 = lock.newCondition();<br>    private Condition c2 = lock.newCondition();<br>    <br>    &#47;&#47; è®¾ç½®åº“å­˜ä¸Šé™<br>    void setUpper(long v) {<br>        try {<br>            lock.lock();<br>            &#47;&#47; æ£€æŸ¥å‚æ•°åˆæ³•æ€§<br>            while (v &lt; lower.get()) {<br>                c1.await();<br>            }<br>            upper.set(v);<br>            c2.signal();<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        } finally {<br>            lock.unlock();<br>        }<br><br>    }<br><br>    &#47;&#47; è®¾ç½®åº“å­˜ä¸‹é™<br>    void setLower(long v) {<br><br>        try {<br>            lock.lock();<br>            &#47;&#47; æ£€æŸ¥å‚æ•°åˆæ³•æ€§<br>            while (v &gt; upper.get())  {<br>                c2.await();<br>            }<br>            lower.set(v);<br>            c1.signal();<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        } finally {<br>            lock.unlock();<br>        }<br>    }<br><br>} [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-26 11:39:01</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">é”™è¯¯çš„è®¾ç½®ä¼šå¯¼è‡´æ°¸è¿œç­‰å¾…ï¼Œå¤ªå±é™©äº†<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Zm  2019-03-26 09:08:24
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            Volatileä¿®é¥°å˜é‡ [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            äº¬  2019-03-26 07:15:33
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸€æ—©èµ·æ¥ï¼Œå°±æŠŠæ–‡ç« çœ‹å®Œäº†ï¼ŒæœŸå¾…è€å¸ˆåé¢æ›´ç²¾å½©çš„å†…å®¹ [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é€†æ°´è¡ŒèˆŸ  2019-03-31 08:30:13
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            é‚£æœ¬ä¹¦ï¼Œæœ‰äº›æ™¦æ¶©ï¼Œä½†æ˜¯æ˜¯å¿…è¯»çš„ã€‚ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 19:13:32</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¤ªæ™¦æ¶©äº†</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Cc  2019-03-29 14:49:55
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åˆæƒ³åˆ°ä¸€ç§ï¼Œæ—¢ç„¶ä¸¤ä¸ªå˜é‡è¦åŒæ—¶é”å®šï¼Œé‚£å°±æŠŠä¸¤ä¸ªå˜é‡å°è£…æˆä¸€ä¸ªï¼Œç„¶åä½¿ç”¨casæ“ä½œã€‚è¿™æ ·è¡Œä¸è¡Œï¼Œå¦å¤–è€å¸ˆå¸®æˆ‘çœ‹çœ‹volatileæ˜¯ä¸æ˜¯æœ‰å¤šä½™çš„åœ°æ–¹<br>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·<br>volatile AtomicReference&lt;Inventory&gt; inventory = new AtomicReference&lt;&gt;();<br><br>    static class Inventory {<br>        private volatile long upper = 0;<br><br>        private volatile long lower = 0;<br>    }<br><br>    void setUpper(long v) {<br>        long low;<br>        Inventory oldObj;<br>        Inventory newObj;<br>        do {<br>            oldObj = inventory.get();<br>            if (v &gt;= (low = oldObj.lower)) {<br>                throw new IllegalArgumentException();<br>            }<br>            newObj = new Inventory();<br>            newObj.lower = low;<br>            newObj.upper = v;<br><br>        } while (inventory.compareAndSet(oldObj, newObj));<br>    }<br><br>    void setLower(long v) {<br>        long upp;<br>        Inventory oldObj;<br>        Inventory newObj;<br>        do {<br>            oldObj = inventory.get();<br>            if (v &lt;= (upp = oldObj.upper)) {<br>                throw new IllegalArgumentException();<br>            }<br>            newObj = new Inventory();<br>            newObj.lower = v;<br>            newObj.upper = upp;<br><br>        } while (inventory.compareAndSet(oldObj, newObj));<br>    }<br><br><br> [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-30 08:49:05</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘è§‰å¾—è¿™ä¸ªæ²¡æœ‰é—®é¢˜ï¼Œvolatile æ¢æˆ finalä¼šæ›´å¥½</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            magict4  2019-03-26 11:29:21
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1. setUpper() è·Ÿ setLower() éƒ½åŠ ä¸Š &quot;synchronized&quot; å…³é”®å­—ã€‚ä¸è¦å¤ªåœ¨æ„æ€§èƒ½ï¼Œè€å¸ˆéƒ½è¯´äº†ï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–ã€‚<br>2. å¦‚æœæ€§èƒ½æœ‰é—®é¢˜ï¼Œå¯ä»¥æŠŠ lower è·Ÿ upper ä¸¤ä¸ªå˜é‡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œä¾‹å¦‚<br>```<br>public class Boundary {<br>    private final lower;<br>    private final upper;<br>    <br>    public Boundary(long lower, long upper) {<br>        if(lower &gt;= upper) {<br>            &#47;&#47; throw exception<br>        }<br>        this.lower = lower;<br>        this.upper = upper;<br>    }<br>}<br>```<br>ç§»é™¤ SafeVM çš„ setUpper() è·Ÿ setLower() æ–¹æ³•ï¼Œå¹¶å¢å…¥ setBoundary(Boundary boundary) æ–¹æ³•ã€‚ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-27 22:06:28</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            undifined  2019-03-26 08:45:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¦ä¿è¯å˜é‡é—´çš„çº¦æŸæ¡ä»¶ï¼Œå°±å¿…é¡»ä¿è¯åˆ¤æ–­å’Œèµ‹å€¼æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå¯ä»¥é€šè¿‡ç»™ upper å’Œ lower åŒæ—¶åŠ é”ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ AtomicLong æä¾›çš„æ–¹æ³•è¿›è¡Œæ“ä½œ<br><br>    &#47;&#47; è®¾ç½®åº“å­˜ä¸Šé™<br>    void setUpper(long v) {<br>        &#47;&#47; æ£€æŸ¥å‚æ•°åˆæ³•æ€§<br>        upper.getAndUpdate(u -&gt; {<br>            if (v &lt; lower.get()) {<br>                throw new IllegalArgumentException();<br>            } else {<br>                return v;<br>            }<br>        });<br>    }<br><br>    &#47;&#47; è®¾ç½®åº“å­˜ä¸‹é™<br>    void setLower(long v) {<br>        &#47;&#47; æ£€æŸ¥å‚æ•°åˆæ³•æ€§<br>        lower.getAndUpdate(u -&gt; {<br>            if (v &gt; upper.get()) {<br>                throw new IllegalArgumentException();<br>            } else {<br>                return v;<br>            }<br>        });<br>    }<br> <br>è€å¸ˆè¿™æ ·ç†è§£å¯¹å— [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-27 22:05:08</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘æ„Ÿè§‰ä¸å¯ä»¥ï¼Œè¿˜æ˜¯æœ‰ç«æ€æ¡ä»¶ï¼Œä½ å¯ä»¥åœ¨returnå‰é¢å¢åŠ sleepçœ‹çœ‹</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            çš®è›‹  2019-04-15 08:57:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ–¹æ³•å†…ä½¿ç”¨å¯¹è±¡åŠ ğŸ”’å¯ä»¥è§£å†³ç«æ€æ¡ä»¶ï¼Œä½†ä¸å°±æ˜¯ç”¨äº†ä½çº§çš„åŸè¯­å¤„ç†äº†å—ï¼Œè¿˜æœ‰å…¶ä»–æ›´å¥½çš„æ–¹å¼å—ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-15 19:29:49</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯ä»¥ç”¨æ— é”ç®—æ³•ï¼Œä¸è¿‡éƒ½å¾ˆå¤æ‚ï¼Œå»ºè®®è¿˜æ˜¯å…ˆç”¨é”</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Boomkeeper  2019-04-09 08:34:19
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘å°±ä¸æ˜ç™½äº†ï¼Œä½¿ç”¨äº†synchronizedï¼Œä¸ºå•¥è¿˜ç”¨voliateï¼Œä»–çš„ç¡®æ˜¯ä¿è¯å¯è§æ€§ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä¸€èˆ¬ä»–çš„åº”ç”¨åœºæ™¯åº”è¯¥æ˜¯ä¸ä¾èµ–ä¹‹å‰çš„ç»“æœè€Œæ”¹å˜æ•°æ®ï¼Œç´¯åŠ çš„åœºæ™¯æ˜æ˜¾ä¸é€‚åˆ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç¼ªæ–‡@æœ‰èµ  2019-04-03 23:09:20
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä½œä¸ºåç«¯æœåŠ¡å¼€å‘è€…ï¼Œæˆ‘ä»¬å¼€å‘çš„æ˜¯æœåŠ¡æ¥å£ï¼Œå®é™…ä¸Šå¾ˆå¤šå¹¶å‘é—®é¢˜éƒ½ä¸ä¼šé‡åˆ°ï¼Œæ¯”å¦‚è¿™é‡Œæåˆ°çš„è®¾ç½®åº“å­˜ä¸Šä¸‹çº¿ï¼Œè¦è€ƒè™‘ä¸Šé™è¦å¤§äºä¸‹é™ï¼Œéƒ½æ˜¯åœ¨æ•°æ®åº“å±‚æ‰è€ƒè™‘çš„ï¼Œjavaè¿™ä¸€å±‚dubboä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸åŒçš„çº¿ç¨‹çš„ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ZOUå¿—ä¼Ÿ  2019-04-03 17:23:43
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åˆ©ç”¨ä¹‹å‰ç®¡ç¨‹çš„ç®¡ç¨‹çŸ¥è¯†ä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªçº¦æŸæ¡ä»¶é—®é¢˜ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è“å¤©ç™½äº‘çœ‹å¤§æµ·  2019-03-31 12:34:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æœ‰äº›è¯„è®ºé‡Œè¯´ï¼ŒåŠ syncronizedå’Œvolatileï¼Œä½†æˆ‘è§‰å¾—syncronizedå·²ç»å¯ä»¥ä¿è¯å¯è§æ€§å•Šï¼Œä¸ºå•¥è¿˜è¦åŠ volatileï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 19:02:01</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¦‚æœç”¨syncronizedï¼Œå°±æ²¡å¿…è¦åŠ volatile</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            éç¤¼å‹¿è¨€-éç¤¼å‹¿å¬-éç¤¼å‹¿è§†  2019-03-30 21:38:22
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä½¿ç”¨synchronizedï¼ˆthisï¼‰çš„è¯ï¼Œæ„Ÿè§‰volatieéƒ½ä¸éœ€è¦ç”¨äº†ï¼Œjmmæ¨¡å‹ä¸æ˜¯è¯´ï¼Œé‡Šæ”¾é”çš„æ“ä½œå…ˆäºåç»­çš„åŠ é”å‘ç”Ÿï¼ŒåŠ é”æˆåŠŸåï¼Œå¯¹äºä¸Šä¸€æ¬¡é‡Šæ”¾é”ä¹‹å‰çš„æ“ä½œç»“æœæ˜¯å¯è§çš„ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 07:23:39</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯è¿™æ ·çš„<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Cc  2019-03-29 14:33:36
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çœ‹åˆ°å‰é¢å¥½å¤šäººç”¨casæ“ä½œï¼Œæˆ‘ä¹Ÿæƒ³äº†ä¸€ä¸‹ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºcasåªèƒ½åŒæ—¶æ“ä½œä¸€ä¸ªå˜é‡ï¼Œè¿™æ¶‰åŠäº†ä¸¤ä¸ªå˜é‡ã€‚æƒ³é—®ä¸‹è€å¸ˆjavaæœ‰æ¶‰åŠä¸¤ä¸ªå˜é‡çš„caså—ã€‚æ¯”å¦‚å•Ša b   ä¸¤ä¸ªå˜é‡ã€‚å¦‚æœbçš„å€¼ä¸ºæ¯”å°±æŠŠaè®¾ä¸ºcï¼Œç±»ä¼¼redisçš„watchã€‚ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-30 08:50:05</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘æ„Ÿè§‰åº”è¯¥æ²¡æœ‰</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            CityAnimal  2019-03-29 00:03:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä½¿ç”¨AtomicLongçš„compareAndSetæ–¹æ³•å¯ä»¥å—ï¼Ÿ<br><br>&#47;**<br>     * è®¾ç½®åº“å­˜ä¸Šé™<br>     *&#47;<br>    void setUpper(long v) {<br>        long previous;<br>        do {<br>            previous = upper.get();<br>            if (v &lt; previous) {<br>                throw new IllegalArgumentException();<br>            }<br>        } while (!upper.compareAndSet(previous, v));<br>    }<br><br>    &#47;**<br>     * è®¾ç½®åº“å­˜ä¸‹é™<br>     *&#47;<br>    void setLower(long v) {<br>        long previous;<br>        do {<br>            previous = lower.get();<br>            if (v &gt; previous) {<br>                throw new IllegalArgumentException();<br>            }<br>        } while (!lower.compareAndSet(previous, v));<br>    } 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-29 20:37:29</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6"><br>ä¸€è‡´æ€§çº¦æŸæ˜¯ï¼Œæœ€å¤§åº“å­˜å¤§äºæœ€å°åº“å­˜ï¼Œæ‰€ä»¥é€»è¾‘å¥½åƒä¸å¯¹<br></div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>