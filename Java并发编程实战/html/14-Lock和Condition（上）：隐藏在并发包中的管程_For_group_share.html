<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>14-Lockå’ŒConditionï¼ˆä¸Šï¼‰ï¼šéšè—åœ¨å¹¶å‘åŒ…ä¸­çš„ç®¡ç¨‹</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>14-Lockå’ŒConditionï¼ˆä¸Šï¼‰ï¼šéšè—åœ¨å¹¶å‘åŒ…ä¸­çš„ç®¡ç¨‹</h1>
<p>Java SDKå¹¶å‘åŒ…å†…å®¹å¾ˆä¸°å¯Œï¼ŒåŒ…ç½—ä¸‡è±¡ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æœ€æ ¸å¿ƒçš„è¿˜æ˜¯å…¶å¯¹ç®¡ç¨‹çš„å®ç°ã€‚å› ä¸ºç†è®ºä¸Šåˆ©ç”¨ç®¡ç¨‹ï¼Œä½ å‡ ä¹å¯ä»¥å®ç°å¹¶å‘åŒ…é‡Œæ‰€æœ‰çš„å·¥å…·ç±»ã€‚åœ¨å‰é¢<a href="https://time.geekbang.org/column/article/86089">ã€Š08 | ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™ã€‹</a>ä¸­æˆ‘ä»¬æåˆ°è¿‡åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸï¼Œæœ‰ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ï¼šä¸€ä¸ªæ˜¯<strong>äº’æ–¥</strong>ï¼Œå³åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºï¼›å¦ä¸€ä¸ªæ˜¯<strong>åŒæ­¥</strong>ï¼Œå³çº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ã€åä½œã€‚è¿™ä¸¤å¤§é—®é¢˜ï¼Œç®¡ç¨‹éƒ½æ˜¯èƒ½å¤Ÿè§£å†³çš„ã€‚<strong>Java SDKå¹¶å‘åŒ…é€šè¿‡Lockå’ŒConditionä¸¤ä¸ªæ¥å£æ¥å®ç°ç®¡ç¨‹ï¼Œå…¶ä¸­Lockç”¨äºè§£å†³äº’æ–¥é—®é¢˜ï¼ŒConditionç”¨äºè§£å†³åŒæ­¥é—®é¢˜</strong>ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬é‡ç‚¹ä»‹ç»Lockçš„ä½¿ç”¨ï¼Œåœ¨ä»‹ç»Lockçš„ä½¿ç”¨ä¹‹å‰ï¼Œæœ‰ä¸ªé—®é¢˜éœ€è¦ä½ é¦–å…ˆæ€è€ƒä¸€ä¸‹ï¼šJavaè¯­è¨€æœ¬èº«æä¾›çš„synchronizedä¹Ÿæ˜¯ç®¡ç¨‹çš„ä¸€ç§å®ç°ï¼Œæ—¢ç„¶Javaä»è¯­è¨€å±‚é¢å·²ç»å®ç°äº†ç®¡ç¨‹äº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åœ¨SDKé‡Œæä¾›å¦å¤–ä¸€ç§å®ç°å‘¢ï¼Ÿéš¾é“Javaæ ‡å‡†å§”å‘˜ä¼šè¿˜èƒ½åŒæ„â€œé‡å¤é€ è½®å­â€çš„æ–¹æ¡ˆï¼Ÿå¾ˆæ˜¾ç„¶å®ƒä»¬ä¹‹é—´æ˜¯æœ‰å·¨å¤§åŒºåˆ«çš„ã€‚é‚£åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿå¦‚æœèƒ½æ·±å…¥ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå¯¹ä½ ç”¨å¥½Lockå¸®åŠ©å¾ˆå¤§ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥å‰–æä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><h2>å†é€ ç®¡ç¨‹çš„ç†ç”±</h2><p>ä½ ä¹Ÿè®¸æ›¾ç»å¬åˆ°è¿‡å¾ˆå¤šè¿™æ–¹é¢çš„ä¼ è¯´ï¼Œä¾‹å¦‚åœ¨Javaçš„1.5ç‰ˆæœ¬ä¸­ï¼Œsynchronizedæ€§èƒ½ä¸å¦‚SDKé‡Œé¢çš„Lockï¼Œä½†1.6ç‰ˆæœ¬ä¹‹åï¼Œsynchronizedåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå°†æ€§èƒ½è¿½äº†ä¸Šæ¥ï¼Œæ‰€ä»¥1.6ä¹‹åçš„ç‰ˆæœ¬åˆæœ‰äººæ¨èä½¿ç”¨synchronizedäº†ã€‚é‚£æ€§èƒ½æ˜¯å¦å¯ä»¥æˆä¸ºâ€œé‡å¤é€ è½®å­â€çš„ç†ç”±å‘¢ï¼Ÿæ˜¾ç„¶ä¸èƒ½ã€‚å› ä¸ºæ€§èƒ½é—®é¢˜ä¼˜åŒ–ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå®Œå…¨æ²¡å¿…è¦â€œé‡å¤é€ è½®å­â€ã€‚</p><!-- [[[read_end]]] --><p>åˆ°è¿™é‡Œï¼Œå…³äºè¿™ä¸ªé—®é¢˜ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿæƒ³å‡ºä¸€æ¡ç†ç”±æ¥å‘¢ï¼Ÿå¦‚æœä½ ç»†å¿ƒçš„è¯ï¼Œä¹Ÿè®¸èƒ½æƒ³åˆ°ä¸€ç‚¹ã€‚é‚£å°±æ˜¯æˆ‘ä»¬å‰é¢åœ¨ä»‹ç»<a href="https://time.geekbang.org/column/article/85001">æ­»é”é—®é¢˜</a>çš„æ—¶å€™ï¼Œæå‡ºäº†ä¸€ä¸ª<strong>ç ´åä¸å¯æŠ¢å æ¡ä»¶</strong>æ–¹æ¡ˆï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆsynchronizedæ²¡æœ‰åŠæ³•è§£å†³ã€‚åŸå› æ˜¯synchronizedç”³è¯·èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œçº¿ç¨‹ç›´æ¥è¿›å…¥é˜»å¡çŠ¶æ€äº†ï¼Œè€Œçº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå•¥éƒ½å¹²ä¸äº†ï¼Œä¹Ÿé‡Šæ”¾ä¸äº†çº¿ç¨‹å·²ç»å æœ‰çš„èµ„æºã€‚ä½†æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼š</p><blockquote>
<p>å¯¹äºâ€œä¸å¯æŠ¢å â€è¿™ä¸ªæ¡ä»¶ï¼Œå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼Œè¿™æ ·ä¸å¯æŠ¢å è¿™ä¸ªæ¡ä»¶å°±ç ´åæ‰äº†ã€‚</p>
</blockquote><p>å¦‚æœæˆ‘ä»¬é‡æ–°è®¾è®¡ä¸€æŠŠäº’æ–¥é”å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£è¯¥æ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿæˆ‘è§‰å¾—æœ‰ä¸‰ç§æ–¹æ¡ˆã€‚</p><ol>
<li><strong>èƒ½å¤Ÿå“åº”ä¸­æ–­</strong>ã€‚synchronizedçš„é—®é¢˜æ˜¯ï¼ŒæŒæœ‰é”Aåï¼Œå¦‚æœå°è¯•è·å–é”Bå¤±è´¥ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä¸€æ—¦å‘ç”Ÿæ­»é”ï¼Œå°±æ²¡æœ‰ä»»ä½•æœºä¼šæ¥å”¤é†’é˜»å¡çš„çº¿ç¨‹ã€‚ä½†å¦‚æœé˜»å¡çŠ¶æ€çš„çº¿ç¨‹èƒ½å¤Ÿå“åº”ä¸­æ–­ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ç»™é˜»å¡çš„çº¿ç¨‹å‘é€ä¸­æ–­ä¿¡å·çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå”¤é†’å®ƒï¼Œé‚£å®ƒå°±æœ‰æœºä¼šé‡Šæ”¾æ›¾ç»æŒæœ‰çš„é”Aã€‚è¿™æ ·å°±ç ´åäº†ä¸å¯æŠ¢å æ¡ä»¶äº†ã€‚</li>
<li><strong>æ”¯æŒè¶…æ—¶</strong>ã€‚å¦‚æœçº¿ç¨‹åœ¨ä¸€æ®µæ—¶é—´ä¹‹å†…æ²¡æœ‰è·å–åˆ°é”ï¼Œä¸æ˜¯è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œé‚£è¿™ä¸ªçº¿ç¨‹ä¹Ÿæœ‰æœºä¼šé‡Šæ”¾æ›¾ç»æŒæœ‰çš„é”ã€‚è¿™æ ·ä¹Ÿèƒ½ç ´åä¸å¯æŠ¢å æ¡ä»¶ã€‚</li>
<li><strong>éé˜»å¡åœ°è·å–é”</strong>ã€‚å¦‚æœå°è¯•è·å–é”å¤±è´¥ï¼Œå¹¶ä¸è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ï¼Œé‚£è¿™ä¸ªçº¿ç¨‹ä¹Ÿæœ‰æœºä¼šé‡Šæ”¾æ›¾ç»æŒæœ‰çš„é”ã€‚è¿™æ ·ä¹Ÿèƒ½ç ´åä¸å¯æŠ¢å æ¡ä»¶ã€‚</li>
</ol><p>è¿™ä¸‰ç§æ–¹æ¡ˆå¯ä»¥å…¨é¢å¼¥è¡¥synchronizedçš„é—®é¢˜ã€‚åˆ°è¿™é‡Œç›¸ä¿¡ä½ åº”è¯¥ä¹Ÿèƒ½ç†è§£äº†ï¼Œè¿™ä¸‰ä¸ªæ–¹æ¡ˆå°±æ˜¯â€œé‡å¤é€ è½®å­â€çš„ä¸»è¦åŸå› ï¼Œä½“ç°åœ¨APIä¸Šï¼Œå°±æ˜¯Lockæ¥å£çš„ä¸‰ä¸ªæ–¹æ³•ã€‚è¯¦æƒ…å¦‚ä¸‹ï¼š</p><pre><code>// æ”¯æŒä¸­æ–­çš„API
void lockInterruptibly() 
  throws InterruptedException;
// æ”¯æŒè¶…æ—¶çš„API
boolean tryLock(long time, TimeUnit unit) 
  throws InterruptedException;
// æ”¯æŒéé˜»å¡è·å–é”çš„API
boolean tryLock();
</code></pre><h2>å¦‚ä½•ä¿è¯å¯è§æ€§</h2><p>Java SDKé‡Œé¢Lockçš„ä½¿ç”¨ï¼Œæœ‰ä¸€ä¸ªç»å…¸çš„èŒƒä¾‹ï¼Œå°±æ˜¯<code>try{}finally{}</code>ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨çš„æ˜¯åœ¨finallyé‡Œé¢é‡Šæ”¾é”ã€‚è¿™ä¸ªèŒƒä¾‹æ— éœ€å¤šè§£é‡Šï¼Œä½ çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä»£ç å°±æ˜ç™½äº†ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦è§£é‡Šä¸€ä¸‹ï¼Œé‚£å°±æ˜¯å¯è§æ€§æ˜¯æ€ä¹ˆä¿è¯çš„ã€‚ä½ å·²ç»çŸ¥é“Javaé‡Œå¤šçº¿ç¨‹çš„å¯è§æ€§æ˜¯é€šè¿‡Happens-Beforeè§„åˆ™ä¿è¯çš„ï¼Œè€Œsynchronizedä¹‹æ‰€ä»¥èƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œä¹Ÿæ˜¯å› ä¸ºæœ‰ä¸€æ¡synchronizedç›¸å…³çš„è§„åˆ™ï¼šsynchronizedçš„è§£é” Happens-Before äºåç»­å¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚é‚£Java SDKé‡Œé¢Locké ä»€ä¹ˆä¿è¯å¯è§æ€§å‘¢ï¼Ÿä¾‹å¦‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œçº¿ç¨‹T1å¯¹valueè¿›è¡Œäº†+=1æ“ä½œï¼Œé‚£åç»­çš„çº¿ç¨‹T2èƒ½å¤Ÿçœ‹åˆ°valueçš„æ­£ç¡®ç»“æœå—ï¼Ÿ</p><pre><code>class X {
  private final Lock rtl =
ã€  new ReentrantLock();
  int value;
  public void addOne() {
    // è·å–é”
    rtl.lock();  
    try {
      value+=1;
    } finally {
      // ä¿è¯é”èƒ½é‡Šæ”¾
      rtl.unlock();
    }
  }
}
</code></pre><p>ç­”æ¡ˆå¿…é¡»æ˜¯è‚¯å®šçš„ã€‚<strong>Java SDKé‡Œé¢é”</strong>çš„å®ç°éå¸¸å¤æ‚ï¼Œè¿™é‡Œæˆ‘å°±ä¸å±•å¼€ç»†è¯´äº†ï¼Œä½†æ˜¯åŸç†è¿˜æ˜¯éœ€è¦ç®€å•ä»‹ç»ä¸€ä¸‹ï¼šå®ƒæ˜¯<strong>åˆ©ç”¨äº†volatileç›¸å…³çš„Happens-Beforeè§„åˆ™</strong>ã€‚Java SDKé‡Œé¢çš„ReentrantLockï¼Œå†…éƒ¨æŒæœ‰ä¸€ä¸ªvolatile çš„æˆå‘˜å˜é‡stateï¼Œè·å–é”çš„æ—¶å€™ï¼Œä¼šè¯»å†™stateçš„å€¼ï¼›è§£é”çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¯»å†™stateçš„å€¼ï¼ˆç®€åŒ–åçš„ä»£ç å¦‚ä¸‹é¢æ‰€ç¤ºï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œvalue+=1ä¹‹å‰ï¼Œç¨‹åºå…ˆè¯»å†™äº†ä¸€æ¬¡volatileå˜é‡stateï¼Œåœ¨æ‰§è¡Œvalue+=1ä¹‹åï¼Œåˆè¯»å†™äº†ä¸€æ¬¡volatileå˜é‡stateã€‚æ ¹æ®ç›¸å…³çš„Happens-Beforeè§„åˆ™ï¼š</p><ol>
<li><strong>é¡ºåºæ€§è§„åˆ™</strong>ï¼šå¯¹äºçº¿ç¨‹T1ï¼Œvalue+=1 Happens-Before é‡Šæ”¾é”çš„æ“ä½œunlock()ï¼›</li>
<li><strong>volatileå˜é‡è§„åˆ™</strong>ï¼šç”±äºstate = 1ä¼šå…ˆè¯»å–stateï¼Œæ‰€ä»¥çº¿ç¨‹T1çš„unlock()æ“ä½œHappens-Beforeçº¿ç¨‹T2çš„lock()æ“ä½œï¼›</li>
<li><strong>ä¼ é€’æ€§è§„åˆ™</strong>ï¼šçº¿ç¨‹ T1çš„value+=1  Happens-Before çº¿ç¨‹ T2 çš„ lock() æ“ä½œã€‚</li>
</ol><pre><code>class SampleLock {
  volatile int state;
  // åŠ é”
  lock() {
    // çœç•¥ä»£ç æ— æ•°
    state = 1;
  }
  // è§£é”
  unlock() {
    // çœç•¥ä»£ç æ— æ•°
    state = 0;
  }
}
</code></pre><p>æ‰€ä»¥è¯´ï¼Œåç»­çº¿ç¨‹T2èƒ½å¤Ÿçœ‹åˆ°valueçš„æ­£ç¡®ç»“æœã€‚å¦‚æœä½ è§‰å¾—ç†è§£èµ·æ¥è¿˜æœ‰ç‚¹å›°éš¾ï¼Œå»ºè®®ä½ é‡æ¸©ä¸€ä¸‹å‰é¢æˆ‘ä»¬è®²è¿‡çš„<a href="https://time.geekbang.org/column/article/84017">ã€Š02 | Javaå†…å­˜æ¨¡å‹ï¼šçœ‹Javaå¦‚ä½•è§£å†³å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ã€‹</a>é‡Œé¢çš„ç›¸å…³å†…å®¹ã€‚</p><h2>ä»€ä¹ˆæ˜¯å¯é‡å…¥é”</h2><p>å¦‚æœä½ ç»†å¿ƒè§‚å¯Ÿï¼Œä¼šå‘ç°æˆ‘ä»¬åˆ›å»ºçš„é”çš„å…·ä½“ç±»åæ˜¯ReentrantLockï¼Œè¿™ä¸ªç¿»è¯‘è¿‡æ¥å«<strong>å¯é‡å…¥é”</strong>ï¼Œè¿™ä¸ªæ¦‚å¿µå‰é¢æˆ‘ä»¬ä¸€ç›´æ²¡æœ‰ä»‹ç»è¿‡ã€‚<strong>æ‰€è°“å¯é‡å…¥é”ï¼Œé¡¾åæ€ä¹‰ï¼ŒæŒ‡çš„æ˜¯çº¿ç¨‹å¯ä»¥é‡å¤è·å–åŒä¸€æŠŠé”</strong>ã€‚ä¾‹å¦‚ä¸‹é¢ä»£ç ä¸­ï¼Œå½“çº¿ç¨‹T1æ‰§è¡Œåˆ° â‘  å¤„æ—¶ï¼Œå·²ç»è·å–åˆ°äº†é” rtl ï¼Œå½“åœ¨ â‘  å¤„è°ƒç”¨ get()æ–¹æ³•æ—¶ï¼Œä¼šåœ¨ â‘¡ å†æ¬¡å¯¹é” rtl æ‰§è¡ŒåŠ é”æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœé” rtl æ˜¯å¯é‡å…¥çš„ï¼Œé‚£ä¹ˆçº¿ç¨‹T1å¯ä»¥å†æ¬¡åŠ é”æˆåŠŸï¼›å¦‚æœé” rtl æ˜¯ä¸å¯é‡å…¥çš„ï¼Œé‚£ä¹ˆçº¿ç¨‹T1æ­¤æ—¶ä¼šè¢«é˜»å¡ã€‚</p><p>é™¤äº†å¯é‡å…¥é”ï¼Œå¯èƒ½ä½ è¿˜å¬è¯´è¿‡å¯é‡å…¥å‡½æ•°ï¼Œå¯é‡å…¥å‡½æ•°æ€ä¹ˆç†è§£å‘¢ï¼ŸæŒ‡çš„æ˜¯çº¿ç¨‹å¯ä»¥é‡å¤è°ƒç”¨ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œæ‰€è°“<strong>å¯é‡å…¥å‡½æ•°ï¼ŒæŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è°ƒç”¨è¯¥å‡½æ•°</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½èƒ½å¾—åˆ°æ­£ç¡®ç»“æœï¼›åŒæ—¶åœ¨ä¸€ä¸ªçº¿ç¨‹å†…æ”¯æŒçº¿ç¨‹åˆ‡æ¢ï¼Œæ— è®ºè¢«åˆ‡æ¢å¤šå°‘æ¬¡ï¼Œç»“æœéƒ½æ˜¯æ­£ç¡®çš„ã€‚å¤šçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œè¿˜æ”¯æŒçº¿ç¨‹åˆ‡æ¢ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿçº¿ç¨‹å®‰å…¨å•Šã€‚æ‰€ä»¥ï¼Œå¯é‡å…¥å‡½æ•°æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><pre><code>class X {
  private final Lock rtl =
ã€  new ReentrantLock();
  int value;
  public int get() {
    // è·å–é”
    rtl.lock();         â‘¡
    try {
      return value;
    } finally {
      // ä¿è¯é”èƒ½é‡Šæ”¾
      rtl.unlock();
    }
  }
  public void addOne() {
    // è·å–é”
    rtl.lock();  
    try {
      value = 1 + get(); â‘ 
    } finally {
      // ä¿è¯é”èƒ½é‡Šæ”¾
      rtl.unlock();
    }
  }
}
</code></pre><h2>å…¬å¹³é”ä¸éå…¬å¹³é”</h2><p>åœ¨ä½¿ç”¨ReentrantLockçš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ReentrantLockè¿™ä¸ªç±»æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ— å‚æ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ä¼ å…¥fairå‚æ•°çš„æ„é€ å‡½æ•°ã€‚fairå‚æ•°ä»£è¡¨çš„æ˜¯é”çš„å…¬å¹³ç­–ç•¥ï¼Œå¦‚æœä¼ å…¥trueå°±è¡¨ç¤ºéœ€è¦æ„é€ ä¸€ä¸ªå…¬å¹³é”ï¼Œåä¹‹åˆ™è¡¨ç¤ºè¦æ„é€ ä¸€ä¸ªéå…¬å¹³é”ã€‚</p><pre><code>//æ— å‚æ„é€ å‡½æ•°ï¼šé»˜è®¤éå…¬å¹³é”
public ReentrantLock() {
    sync = new NonfairSync();
}
//æ ¹æ®å…¬å¹³ç­–ç•¥å‚æ•°åˆ›å»ºé”
public ReentrantLock(boolean fair){
    sync = fair ? new FairSync() 
                : new NonfairSync();
}
</code></pre><p>åœ¨å‰é¢<a href="https://time.geekbang.org/column/article/86089">ã€Š08 | ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™ã€‹</a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»è¿‡å…¥å£ç­‰å¾…é˜Ÿåˆ—ï¼Œé”éƒ½å¯¹åº”ç€ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹æ²¡æœ‰è·å¾—é”ï¼Œå°±ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“æœ‰çº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œå°±éœ€è¦ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚å¦‚æœæ˜¯å…¬å¹³é”ï¼Œå”¤é†’çš„ç­–ç•¥å°±æ˜¯è°ç­‰å¾…çš„æ—¶é—´é•¿ï¼Œå°±å”¤é†’è°ï¼Œå¾ˆå…¬å¹³ï¼›å¦‚æœæ˜¯éå…¬å¹³é”ï¼Œåˆ™ä¸æä¾›è¿™ä¸ªå…¬å¹³ä¿è¯ï¼Œæœ‰å¯èƒ½ç­‰å¾…æ—¶é—´çŸ­çš„çº¿ç¨‹åè€Œå…ˆè¢«å”¤é†’ã€‚</p><h2>ç”¨é”çš„æœ€ä½³å®è·µ</h2><p>ä½ å·²ç»çŸ¥é“ï¼Œç”¨é”è™½ç„¶èƒ½è§£å†³å¾ˆå¤šå¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯é£é™©ä¹Ÿæ˜¯æŒºé«˜çš„ã€‚å¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼Œä¹Ÿå¯èƒ½å½±å“æ€§èƒ½ã€‚è¿™æ–¹é¢æœ‰æ˜¯å¦æœ‰ç›¸å…³çš„æœ€ä½³å®è·µå‘¢ï¼Ÿæœ‰ï¼Œè¿˜å¾ˆå¤šã€‚ä½†æ˜¯æˆ‘è§‰å¾—æœ€å€¼å¾—æ¨èçš„æ˜¯å¹¶å‘å¤§å¸ˆDoug Leaã€ŠJavaå¹¶å‘ç¼–ç¨‹ï¼šè®¾è®¡åŸåˆ™ä¸æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œæ¨èçš„ä¸‰ä¸ªç”¨é”çš„æœ€ä½³å®è·µï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><blockquote>
<ol>
<li>æ°¸è¿œåªåœ¨æ›´æ–°å¯¹è±¡çš„æˆå‘˜å˜é‡æ—¶åŠ é”</li>
<li>æ°¸è¿œåªåœ¨è®¿é—®å¯å˜çš„æˆå‘˜å˜é‡æ—¶åŠ é”</li>
<li>æ°¸è¿œä¸åœ¨è°ƒç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•æ—¶åŠ é”</li>
</ol>
</blockquote><p>è¿™ä¸‰æ¡è§„åˆ™ï¼Œå‰ä¸¤æ¡ä¼°è®¡ä½ ä¸€å®šä¼šè®¤åŒï¼Œæœ€åä¸€æ¡ä½ å¯èƒ½ä¼šè§‰å¾—è¿‡äºä¸¥è‹›ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯å€¾å‘äºä½ å»éµå®ˆï¼Œå› ä¸ºè°ƒç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•ï¼Œå®åœ¨æ˜¯å¤ªä¸å®‰å…¨äº†ï¼Œä¹Ÿè®¸â€œå…¶ä»–â€æ–¹æ³•é‡Œé¢æœ‰çº¿ç¨‹sleep()çš„è°ƒç”¨ï¼Œä¹Ÿå¯èƒ½ä¼šæœ‰å¥‡æ…¢æ— æ¯”çš„I/Oæ“ä½œï¼Œè¿™äº›éƒ½ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œâ€œå…¶ä»–â€ç±»çš„æ–¹æ³•å¯èƒ½ä¹Ÿä¼šåŠ é”ï¼Œç„¶ååŒé‡åŠ é”å°±å¯èƒ½å¯¼è‡´æ­»é”ã€‚</p><p><strong>å¹¶å‘é—®é¢˜ï¼Œæœ¬æ¥å°±éš¾ä»¥è¯Šæ–­ï¼Œæ‰€ä»¥ä½ ä¸€å®šè¦è®©ä½ çš„ä»£ç å°½é‡å®‰å…¨ï¼Œå°½é‡ç®€å•ï¼Œå“ªæ€•æœ‰ä¸€ç‚¹å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œéƒ½è¦åŠªåŠ›é¿å…ã€‚</strong></p><h2>æ€»ç»“</h2><p>Java SDK å¹¶å‘åŒ…é‡Œçš„Lockæ¥å£é‡Œé¢çš„æ¯ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥æ„Ÿå—åˆ°ï¼Œéƒ½æ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ã€‚é™¤äº†æ”¯æŒç±»ä¼¼synchronizedéšå¼åŠ é”çš„lock()æ–¹æ³•å¤–ï¼Œè¿˜æ”¯æŒè¶…æ—¶ã€éé˜»å¡ã€å¯ä¸­æ–­çš„æ–¹å¼è·å–é”ï¼Œè¿™ä¸‰ç§æ–¹å¼ä¸ºæˆ‘ä»¬ç¼–å†™æ›´åŠ å®‰å…¨ã€å¥å£®çš„å¹¶å‘ç¨‹åºæä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚å¸Œæœ›ä½ ä»¥ååœ¨ä½¿ç”¨é”çš„æ—¶å€™ï¼Œä¸€å®šè¦ä»”ç»†æ–Ÿé…Œã€‚</p><p>é™¤äº†å¹¶å‘å¤§å¸ˆDoug Leaæ¨èçš„ä¸‰ä¸ªæœ€ä½³å®è·µå¤–ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒä¸€äº›è¯¸å¦‚ï¼šå‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€å‡å°é”çš„ç²’åº¦ç­‰ä¸šç•Œå¹¿ä¸ºäººçŸ¥çš„è§„åˆ™ï¼Œå…¶å®æœ¬è´¨ä¸Šå®ƒä»¬éƒ½æ˜¯ç›¸é€šçš„ï¼Œä¸è¿‡æ˜¯åœ¨è¯¥åŠ é”çš„åœ°æ–¹åŠ é”è€Œå·²ã€‚ä½ å¯ä»¥è‡ªå·±ä½“ä¼šï¼Œè‡ªå·±æ€»ç»“ï¼Œæœ€ç»ˆæ€»ç»“å‡ºè‡ªå·±çš„ä¸€å¥—æœ€ä½³å®è·µæ¥ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä½ å·²ç»çŸ¥é“ tryLock() æ”¯æŒéé˜»å¡æ–¹å¼è·å–é”ï¼Œä¸‹é¢è¿™æ®µå…³äºè½¬è´¦çš„ç¨‹åºå°±ä½¿ç”¨åˆ°äº† tryLock()ï¼Œä½ æ¥çœ‹çœ‹ï¼Œå®ƒæ˜¯å¦å­˜åœ¨æ­»é”é—®é¢˜å‘¢ï¼Ÿ</p><pre><code>class Account {
  private int balance;
  private final Lock lock
          = new ReentrantLock();
  // è½¬è´¦
  void transfer(Account tar, int amt){
    while (true) {
      if(this.lock.tryLock()) {
        try {
          if (tar.lock.tryLock()) {
            try {
              this.balance -= amt;
              tar.balance += amt;
            } finally {
              tar.lock.unlock();
            }
          }//if
        } finally {
          this.lock.unlock();
        }
      }//if
    }//while
  }//transfer
}
</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h1>çŒœä½ å–œæ¬¢</h1><p><a href="https://time.geekbang.org/course/intro/156?utm_term=zeusRVDGT&amp;utm_source=app&amp;utm_medium=javabingfabiancheng&amp;utm_campaign=156-onsell&amp;utm_content=banner0301"><img src="https://static001.geekbang.org/resource/image/8e/93/8e1906fb8a24d5eb66539fa88ea56193.png" alt="unpreview"></a></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ã€€  2019-03-30 02:57:59
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘è§‰å¾—:ä¸ä¼šå‡ºç°æ­»é”ï¼Œä½†ä¼šå‡ºç°æ´»é” [17èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 08:25:01</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            xiyi  2019-03-30 17:29:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å­˜åœ¨æ´»é”ã€‚è¿™ä¸ªä¾‹å­å¯ä»¥ç¨å¾®æ”¹ä¸‹ï¼ŒæˆåŠŸè½¬è´¦ååº”è¯¥è·³å‡ºå¾ªç¯ã€‚åŠ ä¸ªéšæœºé‡è¯•æ—¶é—´é¿å…æ´»é” [11èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 07:36:02</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            bing  2019-03-30 08:40:43
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ–‡ä¸­è¯´çš„å…¬å¹³é”å’Œéå…¬å¹³é”ï¼Œæ˜¯ä¸æŒ‰ç…§æ’é˜Ÿçš„é¡ºåºè¢«å”¤é†’ï¼Œæˆ‘è®°å¾—éå…¬å¹³é”çš„åœºæ™¯åº”è¯¥æ˜¯çº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œå¦‚æœæ¥äº†ä¸€ä¸ªçº¿ç¨‹è·å–é”ï¼Œä»–ä¸å¿…å»æ’é˜Ÿç›´æ¥è·å–åˆ°ï¼Œåº”è¯¥ä¸ä¼šå…¥é˜Ÿå§ã€‚è·å–ä¸åˆ°æ‰è¿›å§ [9èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 10:26:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯çš„ï¼Œé«˜æ‰‹ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Qå®çš„å®  2019-03-30 01:37:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œæœ¬æ–‡åœ¨è®²è¿°å¦‚ä½•ä¿è¯å¯è§æ€§æ—¶ï¼Œåˆ†æç¤ºä¾‹--â€œçº¿ç¨‹ T1 å¯¹ value è¿›è¡Œäº† +=1 æ“ä½œåï¼Œåç»­çš„çº¿ç¨‹ T2 èƒ½å¦çœ‹åˆ° value çš„æ­£ç¡®ç»“æœï¼Ÿâ€œæ—¶ï¼Œæåˆ°ä¸‰æ¡Happen-Beforeè§„åˆ™ï¼Œè¿™é‡Œåœ¨è§£é‡Šç¬¬2æ¡å’Œç¬¬3æ¡è§„åˆ™æ—¶ï¼Œä¼¼ä¹è¯´åäº†ï¼Œæ­£ç¡®çš„åº”è¯¥æ˜¯ï¼Œæ ¹æ®volatileå˜é‡è§„åˆ™ï¼Œçº¿ç¨‹T1çš„unlock()æ“ä½œHappen-Beforeäºçº¿ç¨‹T2çš„lock()æ“ä½œï¼Œæ‰€ä»¥ï¼Œæ ¹æ®ä¼ é€’æ€§è§„åˆ™ï¼Œçº¿ç¨‹ T1 çš„ value+=1æ“ä½œHappen-Beforeäºçº¿ç¨‹T2çš„lock()æ“ä½œã€‚è¯·è€å¸ˆæŒ‡æ­£ã€‚ [7èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-30 08:06:58</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç«çœ¼é‡‘ç›ğŸ‘ğŸ‘ğŸ‘ğŸ‘ï¼Œè¿™å°±æ”¹è¿‡æ¥<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            åˆ˜æ™“æ—  2019-03-30 19:39:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1.è¿™ä¸ªæ˜¯ä¸ªæ­»å¾ªç¯å•Šï¼Œæœ‰é”æ²¡ç¾¤ï¼Œéƒ½å‡ºä¸æ¥ã€‚<br>2.å¦‚æœæŠ›å¼€æ­»å¾ªç¯ï¼Œä¹Ÿä¼šé€ æˆæ´»é”ï¼ŒçŠ¶æ€ä¸ç¨³å®šã€‚å½“ç„¶è¿™ä¸ªä¹Ÿçœ‹åœºæ™¯ï¼Œå‡å¦‚å†²çªçª—å£å¾ˆå°ï¼Œåˆåœ¨å•æœºå¤šæ ¸çš„è¯ï¼Œæ´»é”çš„å¯èƒ½æ€§è¿˜æ˜¯å¾ˆå°çš„ï¼Œå¯ä»¥æ¥å— [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 08:00:08</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å§œæˆˆ  2019-03-30 16:18:52
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘ä¹Ÿè§‰å¾—æ˜¯å­˜åœ¨æ´»é”ï¼Œè€Œéæ­»é”ã€‚å­˜åœ¨è¿™ç§å¯èƒ½æ€§ï¼šäº’ç›¸æŒæœ‰å„è‡ªçš„é”ï¼Œå‘ç°éœ€è¦çš„å¯¹æ–¹çš„é”éƒ½è¢«å¯¹æ–¹æŒæœ‰ï¼Œå°±ä¼šé‡Šæ”¾å½“å‰æŒæœ‰çš„é”ï¼Œå¯¼è‡´å¤§å®¶éƒ½åœ¨ä¸åœæŒé”ï¼Œé‡Šæ”¾é”ï¼Œä½†äº‹æƒ…è¿˜æ²¡åšã€‚å½“ç„¶è¿˜æ˜¯ä¼šå­˜åœ¨è½¬è´¦æˆåŠŸçš„æƒ…æ™¯ï¼Œä¸è¿‡æ•ˆç‡ä½ä¸‹ã€‚æˆ‘è§‰å¾—æ­¤æ—¶éœ€è¦å¼•å…¥Conditionï¼Œåè°ƒä¸¤è€…åŒæ­¥å¤„ç†è½¬è´¦ï¼ [5èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 08:02:10</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç”¨conditionä¼šæ›´å¤æ‚<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç¾Šä¸‰@XCoin.AI  2019-03-30 01:07:26
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç”¨éé˜»å¡çš„æ–¹å¼å»è·å–é”ï¼Œç ´åäº†ç¬¬äº”ç« æ‰€è¯´çš„äº§ç”Ÿæ­»é”çš„å››ä¸ªæ¡ä»¶ä¹‹ä¸€çš„â€œä¸å¯æŠ¢å â€ã€‚æ‰€ä»¥ä¸ä¼šäº§ç”Ÿæ­»é”ã€‚<br><br>ç”¨é”çš„æœ€ä½³å®è·µï¼Œç¬¬ä¸‰ä¸ªâ€œæ°¸è¿œä¸åœ¨è°ƒç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•æ—¶åŠ é”â€ï¼Œæˆ‘ç†è§£å…¶å®æ˜¯åœ¨å·¥ç¨‹è§„èŒƒä¸Šé¿å…å¯èƒ½å‡ºç°çš„é”ç›¸å…³é—®é¢˜ã€‚ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 08:26:42</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯çš„<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å°å  2019-03-30 13:51:17
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æœ‰å¯èƒ½æ´»é”ï¼ŒAï¼ŒBä¸¤è´¦æˆ·ç›¸äº’è½¬è´¦ï¼Œå„è‡ªæŒæœ‰è‡ªå·±lockçš„é”ï¼Œéƒ½ä¸€ç›´åœ¨å°è¯•è·å–å¯¹æ–¹çš„é”ï¼Œå½¢æˆäº†æ´»é” [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 07:36:57</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æœ±å°è±ª  2019-03-30 11:42:31
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åº”è¯¥æ˜¯å°‘äº†ä¸ªbreakè·³å‡ºå¾ªç¯ï¼Œç„¶åè¿™ä¸ªä¾‹å­æ˜¯ä¼šäº§ç”Ÿæ­»é”çš„ï¼Œå› ä¸ºæ»¡è¶³äº†æ­»é”äº§ç”Ÿçš„æ¡ä»¶ã€‚ [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 07:44:15</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">åŠ äº†breakï¼Œä¹Ÿä¼šæœ‰æ´»é”é—®é¢˜ï¼Œä¸åŠ çš„è¯æˆ‘è§‰å¾—ä¹Ÿæ˜¯æ´»é”ï¼Œå› ä¸ºé”éƒ½ä¼šé‡Šæ”¾<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æœ±å°è±ª  2019-03-30 11:13:46
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æœ¬æ–‡æœ€åçš„ä¾‹å­ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦ç”¨while trueè€Œä¸”æ²¡æœ‰è·³å‡ºå¾ªç¯ï¼Œè¿™ä¸æ˜¯æ­»å¾ªç¯å— [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å°å°¹  2019-04-11 21:14:25
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            public class Main {<br><br>    static volatile int state = 0;<br><br>    public static long account = 0;<br><br>    public static void main(String[] args) throws InterruptedException {<br><br>        for (int i = 0; i &lt; 100000; i++) {<br>            new Thread(() -&gt; {<br>                new Main().addAccount();<br>            }).start();<br>        }<br><br>        Thread.sleep(6000);<br>        System.out.println(account);<br>    }<br><br>    private void addAccount() {<br>        &#47;&#47;  çº¿ç¨‹ä¸å®‰å…¨<br>        state = 1;   &#47;&#47;----1<br>        account++;   &#47;&#47;----2<br>        state = 0;   &#47;&#47;----3<br>    }<br>}<br><br>è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœæŒ‰ç…§volatileçš„Happens-Beforeè¿™é‡Œçš„ç¨‹åºä¹Ÿåº”è¯¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å®é™…ä¸Šä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-11 21:36:11</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä¸çŸ¥é“ä½ è¯´çš„ä¸å®‰å…¨æ˜¯æŒ‡å“ªé‡Œï¼Œstate ä½ åªæ˜¯å†™äº†ï¼Œæ²¡æœ‰è¯»ï¼Œè€Œä¸”account++ä¹Ÿä¸æ˜¯äº’æ–¥çš„æ“ä½œã€‚<br>javaå¹¶å‘åŒ…é‡Œç”¨volatileä¿è¯å¯è§æ€§ï¼Œè¿˜ç”¨aqså®ç°äº†äº’æ–¥ã€‚ä¿è¯çº¿ç¨‹å®‰å…¨ä¸æ˜¯è¿™ä¹ˆç®€å•çš„ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            linqw  2019-04-07 15:38:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            class Account {<br>  private int balance;<br>  private final Lock lock<br>          = new ReentrantLock();<br>  &#47;&#47; è½¬è´¦<br>  void transfer(Account tar, int amt){<br>	boolean flag = true;<br>    while (flag) {<br>      if(this.lock.tryLock(éšæœºæ•°ï¼ŒNANOSECONDS)) {<br>        try {<br>          if (tar.lock.tryLock(éšæœºæ•°ï¼ŒNANOSECONDS)) {<br>            try {<br>              this.balance -= amt;<br>              tar.balance += amt;<br>	      flag = false;<br>            } finally {<br>              tar.lock.unlock();<br>            }<br>          }&#47;&#47;if<br>        } finally {<br>          this.lock.unlock();<br>        }<br>      }&#47;&#47;if<br>    }&#47;&#47;while<br>  }&#47;&#47;transfer<br>}<br>æ„Ÿè§‰å¯ä»¥è¿™æ ·æ“ä½œ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-07 18:38:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç‚¹ä¸ªå¤§å¤§çš„èµï¼ä¸è¿‡è¿˜å¯ä»¥å†ä¼˜åŒ–ä¸€ä¸‹ï¼Œå¦‚æœé˜»å¡åœ¨tar.lock.tryLockä¸Šä¸€æ®µæ—¶é—´ï¼Œthis.lockæ˜¯ä¸èƒ½é‡Šæ”¾çš„ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            JackJin  2019-03-31 14:10:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆæ‚¨å¥½ï¼š<br>   é‚£åœ¨è§£å†³è¿™ä¸ªæ´»é”é—®é¢˜æ—¶ï¼Œæ˜¯åœ¨è·å–å…¶ä»–å¯¹è±¡é”å‰é¢ï¼ˆtar.lock.tryLock()ï¼‰åŠ ä¸ªéšæœºçº¿ç¨‹ç¡çœ æ—¶é—´ï¼Ÿè¿˜æ˜¯ã€Šjavaç¼–ç¨‹ï¼šè®¾è®¡åŸåˆ™ä¸æ¨¡å¼ã€‹ä¸­çš„ç¬¬ä¸‰æ¡ï¼Œæ°¸è¿œä¸åœ¨è°ƒç”¨å…¶ä»–å¯¹è±¡æ—¶åŠ é”ï¼›å»æ‰ï¼ˆtar.lock.tryLock()ï¼‰ è¿™ä¸ªé”æ¥è§£å†³æ´»é”å‘¢ï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 19:14:25</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">åŠ ä¸ªéšæœºçº¿ç¨‹ç¡çœ æ—¶é—´å°±å¯ä»¥äº†</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            alias cd=rm -rf  2019-03-31 01:25:02
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸ä¼šæ­»é”å› ä¸ºï¼Œæ‰“ç ´äº†ä¸é‡Šæ”¾çš„åŸåˆ™ã€‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Liam  2019-03-30 15:02:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1 ä¸ä¼šå‡ºç°æ­»é”ï¼Œå› ä¸ºä¸å­˜åœ¨é˜»å¡çš„æƒ…å†µ<br>2 çº¿ç¨‹è¾ƒå¤šçš„æƒ…å†µä¼šå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹å§‹ç»ˆæ— æ³•è·å–åˆ°é”ï¼Œå¯¼è‡´æ´»é” [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-31 08:20:46</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æµ·é¸¿  2019-03-30 14:47:54
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çªç„¶æœ‰ä¸ªé—®é¢˜ï¼š<br>cpuå±‚é¢çš„åŸå­æ€§æ˜¯å•æ¡cpuæŒ‡ä»¤ã€‚<br>javaå±‚é¢çš„äº’æ–¥ï¼ˆç®¡ç¨‹ï¼‰ä¿è¯äº†åŸå­æ€§ã€‚<br>è¿™ä¸¤ä¸ªåŸå­æ€§æ„ä¹‰åº”è¯¥ä¸ä¸€æ ·å§ï¼Ÿ<br>æˆ‘çš„ç†è§£æ˜¯cpuçš„åŸå­æ€§æ˜¯ä¸å—çº¿ç¨‹è°ƒåº¦å½±å“ï¼ŒæŒ‡ä»¤è¦ä¸æ‰§è¡Œäº†ï¼Œè¦ä¹ˆæ²¡æ‰§è¡Œã€‚è€Œjavaå±‚é¢çš„åŸå­æ€§æ˜¯åœ¨é”çš„æœºåˆ¶ä¸‹ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå…¶ä½™ç­‰å¾…ï¼Œæ­¤æ—¶cpuè¿˜æ˜¯å¯ä»¥è¿›è¡Œçº¿ç¨‹è°ƒåº¦ï¼Œä½¿è¿è¡Œä¸­çš„é‚£ä¸ªçº¿ç¨‹è®©å‡ºcpuæ—¶é—´ï¼Œå½“ç„¶äº†è¯¥çº¿ç¨‹è¿˜æ˜¯æŒæ¡é”ã€‚<br>æˆ‘è¿™æ ·ç†è§£å¯¹å§ï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-30 20:52:50</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯¹</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            speedy9  2019-04-10 21:15:59
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å…³äºæ€è€ƒé¢˜ï¼Œjavaçš„è®¿é—®ä½œç”¨åŸŸä¿®é¥°ç¬¦ï¼Œéƒ½æ˜¯ä¿®é¥°åœ¨ç±»ä¸Šï¼Œä¸åœ¨å®ä¾‹ä¸Šï¼Œå› æ­¤å¯ä»¥äº’ç›¸è®¿é—®privateæˆå‘˜ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Sunqc  2019-04-08 08:19:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œæ˜¯ä¸æ˜¯å¯èƒ½ä¸æ–­è·å–å¤šé”ï¼Œåˆæœ‰å¯èƒ½å‘ç”Ÿè½¬è´¦æˆåŠŸ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-08 13:51:19</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æœ‰å¯èƒ½</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ˜“å„¿æ˜“  2019-04-04 19:51:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼ŒnotifyAll()åœ¨é¢å¯¹å…¬å¹³é”å’Œéå…¬å¹³é”çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ•ˆæœå°±ä¸€æ ·äº†ï¼Ÿæ‰€æœ‰ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å…¨éƒ¨è¢«å”¤é†’ï¼Œç»Ÿç»Ÿåˆ°å…¥å£ç­‰å¾…é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Ÿè¿™äº›è¢«å”¤é†’çš„çº¿ç¨‹ä¸ç”¨æ ¹æ®ç­‰å¾…æ—¶é—´æ’é˜Ÿå†æ”¾å…¥å…¥å£ç­‰å¾…é˜Ÿåˆ—ä¸­äº†å§ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-05 23:47:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯çš„ï¼Œéƒ½è¢«å”¤é†’ã€‚ç†è®ºä¸Šæ˜¯åŒæ—¶è¿›å…¥å…¥å£ç­‰å¾…é˜Ÿåˆ—ï¼Œç­‰å¾…æ—¶é—´æ˜¯ç›¸åŒçš„</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æœç„¶å¦‚æ­¤  2019-04-03 20:00:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ´»é”è¿˜æ˜¯æ¯”æ­»é”å®¹æ˜“è§£å†³ï¼ŒåŠ ä¸ªéšæœºç­‰å¾…æ—¶é—´æˆ–å®¢æˆ·ç«¯æ‰‹åŠ¨é‡è¯•ï¼ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>