<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>06-ç”¨â€œç­‰å¾…-é€šçŸ¥â€æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>06-ç”¨â€œç­‰å¾…-é€šçŸ¥â€æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…</h1>
<p>ç”±ä¸Šä¸€ç¯‡æ–‡ç« ä½ åº”è¯¥å·²ç»çŸ¥é“ï¼Œåœ¨<strong>ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶</strong>çš„æ—¶å€™ï¼Œå¦‚æœè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬ä¸æ»¡è¶³åŒæ—¶åœ¨æ–‡ä»¶æ¶ä¸Šè¿™ä¸ªæ¡ä»¶ï¼Œå°±ç”¨æ­»å¾ªç¯çš„æ–¹å¼æ¥å¾ªç¯ç­‰å¾…ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ
while(!actr.apply(this, target))
  ï¼›
</code></pre><p>å¦‚æœapply()æ“ä½œè€—æ—¶éå¸¸çŸ­ï¼Œè€Œä¸”å¹¶å‘å†²çªé‡ä¹Ÿä¸å¤§æ—¶ï¼Œè¿™ä¸ªæ–¹æ¡ˆè¿˜æŒºä¸é”™çš„ï¼Œå› ä¸ºè¿™ç§åœºæ™¯ä¸‹ï¼Œå¾ªç¯ä¸Šå‡ æ¬¡æˆ–è€…å‡ åæ¬¡å°±èƒ½ä¸€æ¬¡æ€§è·å–è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·äº†ã€‚ä½†æ˜¯å¦‚æœapply()æ“ä½œè€—æ—¶é•¿ï¼Œæˆ–è€…å¹¶å‘å†²çªé‡å¤§çš„æ—¶å€™ï¼Œå¾ªç¯ç­‰å¾…è¿™ç§æ–¹æ¡ˆå°±ä¸é€‚ç”¨äº†ï¼Œå› ä¸ºåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¯èƒ½è¦å¾ªç¯ä¸Šä¸‡æ¬¡æ‰èƒ½è·å–åˆ°é”ï¼Œå¤ªæ¶ˆè€—CPUäº†ã€‚</p><p>å…¶å®åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæœ€å¥½çš„æ–¹æ¡ˆåº”è¯¥æ˜¯ï¼šå¦‚æœçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰ä¸æ»¡è¶³ï¼Œåˆ™çº¿ç¨‹é˜»å¡è‡ªå·±ï¼Œè¿›å…¥<strong>ç­‰å¾…</strong>çŠ¶æ€ï¼›å½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰æ»¡è¶³åï¼Œ<strong>é€šçŸ¥</strong>ç­‰å¾…çš„çº¿ç¨‹é‡æ–°æ‰§è¡Œã€‚å…¶ä¸­ï¼Œä½¿ç”¨çº¿ç¨‹é˜»å¡çš„æ–¹å¼å°±èƒ½é¿å…å¾ªç¯ç­‰å¾…æ¶ˆè€—CPUçš„é—®é¢˜ã€‚</p><p>é‚£Javaè¯­è¨€æ˜¯å¦æ”¯æŒè¿™ç§<strong>ç­‰å¾…-é€šçŸ¥æœºåˆ¶</strong>å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸€å®šæ”¯æŒï¼ˆæ¯•ç«Ÿå æ®æ’è¡Œæ¦œç¬¬ä¸€é‚£ä¹ˆä¹…ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹Javaè¯­è¨€æ˜¯å¦‚ä½•æ”¯æŒ<strong>ç­‰å¾…-é€šçŸ¥æœºåˆ¶</strong>çš„ã€‚</p><h2>å®Œç¾çš„å°±åŒ»æµç¨‹</h2><p>åœ¨ä»‹ç»Javaè¯­è¨€å¦‚ä½•æ”¯æŒç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç°å®ä¸–ç•Œé‡Œé¢çš„å°±åŒ»æµç¨‹ï¼Œå› ä¸ºå®ƒæœ‰ç€å®Œå–„çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ï¼Œæ‰€ä»¥å¯¹æ¯”å°±åŒ»æµç¨‹ï¼Œæˆ‘ä»¬å°±èƒ½æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨å¹¶å‘ç¼–ç¨‹ä¸­çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ã€‚</p><!-- [[[read_end]]] --><p>å°±åŒ»æµç¨‹åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ï¼š</p><ol>
<li>æ‚£è€…å…ˆå»æŒ‚å·ï¼Œç„¶ååˆ°å°±è¯Šé—¨å£åˆ†è¯Šï¼Œç­‰å¾…å«å·ï¼›</li>
<li>å½“å«åˆ°è‡ªå·±çš„å·æ—¶ï¼Œæ‚£è€…å°±å¯ä»¥æ‰¾å¤§å¤«å°±è¯Šäº†ï¼›</li>
<li>å°±è¯Šè¿‡ç¨‹ä¸­ï¼Œå¤§å¤«å¯èƒ½ä¼šè®©æ‚£è€…å»åšæ£€æŸ¥ï¼ŒåŒæ—¶å«ä¸‹ä¸€ä½æ‚£è€…ï¼›</li>
<li>å½“æ‚£è€…åšå®Œæ£€æŸ¥åï¼Œæ‹¿æ£€æµ‹æŠ¥å‘Šé‡æ–°åˆ†è¯Šï¼Œç­‰å¾…å«å·ï¼›</li>
<li>å½“å¤§å¤«å†æ¬¡å«åˆ°è‡ªå·±çš„å·æ—¶ï¼Œæ‚£è€…å†å»æ‰¾å¤§å¤«å°±è¯Šã€‚</li>
</ol><p>æˆ–è®¸ä½ å·²ç»å‘ç°äº†ï¼Œè¿™ä¸ªæœ‰ç€å®Œç¾ç­‰å¾…-é€šçŸ¥æœºåˆ¶çš„å°±åŒ»æµç¨‹ï¼Œä¸ä»…èƒ½å¤Ÿä¿è¯åŒä¸€æ—¶åˆ»å¤§å¤«åªä¸ºä¸€ä¸ªæ‚£è€…æœåŠ¡ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿä¿è¯å¤§å¤«å’Œæ‚£è€…çš„æ•ˆç‡ã€‚ä¸æ­¤åŒæ—¶ä½ å¯èƒ½ä¹Ÿä¼šæœ‰ç–‘é—®ï¼Œâ€œè¿™ä¸ªå°±åŒ»æµç¨‹å¾ˆå¤æ‚å‘€ï¼Œæˆ‘ä»¬å‰é¢æè¿°çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ç›¸è¾ƒè€Œè¨€æ˜¯ä¸æ˜¯å¤ªç®€å•äº†ï¼Ÿâ€é‚£è¿™ä¸ªå¤æ‚åº¦æ˜¯å¦æ˜¯å¿…é¡»çš„å‘¢ï¼Ÿè¿™ä¸ªæ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬ä¸èƒ½å¿½è§†ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹æ¯”çœ‹ä¸€ä¸‹å‰é¢éƒ½å¿½è§†äº†å“ªäº›ç»†èŠ‚ã€‚</p><ol>
<li>æ‚£è€…åˆ°å°±è¯Šé—¨å£åˆ†è¯Šï¼Œç±»ä¼¼äºçº¿ç¨‹è¦å»è·å–äº’æ–¥é”ï¼›å½“æ‚£è€…è¢«å«åˆ°æ—¶ï¼Œç±»ä¼¼çº¿ç¨‹å·²ç»è·å–åˆ°é”äº†ã€‚</li>
<li>å¤§å¤«è®©æ‚£è€…å»åšæ£€æŸ¥ï¼ˆç¼ºä¹æ£€æµ‹æŠ¥å‘Šä¸èƒ½è¯Šæ–­ç—…å› ï¼‰ï¼Œç±»ä¼¼äºçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶æ²¡æœ‰æ»¡è¶³ã€‚</li>
<li>æ‚£è€…å»åšæ£€æŸ¥ï¼Œç±»ä¼¼äºçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›ç„¶å<strong>å¤§å¤«å«ä¸‹ä¸€ä¸ªæ‚£è€…ï¼Œè¿™ä¸ªæ­¥éª¤æˆ‘ä»¬åœ¨å‰é¢çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­å¿½è§†äº†ï¼Œè¿™ä¸ªæ­¥éª¤å¯¹åº”åˆ°ç¨‹åºé‡Œï¼Œæœ¬è´¨æ˜¯çº¿ç¨‹é‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”</strong>ã€‚</li>
<li>æ‚£è€…åšå®Œæ£€æŸ¥ï¼Œç±»ä¼¼äºçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶å·²ç»æ»¡è¶³ï¼›<strong>æ‚£è€…æ‹¿æ£€æµ‹æŠ¥å‘Šé‡æ–°åˆ†è¯Šï¼Œç±»ä¼¼äºçº¿ç¨‹éœ€è¦é‡æ–°è·å–äº’æ–¥é”ï¼Œè¿™ä¸ªæ­¥éª¤æˆ‘ä»¬åœ¨å‰é¢çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­ä¹Ÿå¿½è§†äº†</strong>ã€‚</li>
</ol><p>æ‰€ä»¥åŠ ä¸Šè¿™äº›è‡³å…³é‡è¦çš„ç»†èŠ‚ï¼Œç»¼åˆä¸€ä¸‹ï¼Œå°±å¯ä»¥å¾—å‡º<strong>ä¸€ä¸ªå®Œæ•´çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ï¼šçº¿ç¨‹é¦–å…ˆè·å–äº’æ–¥é”ï¼Œå½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œé‡Šæ”¾äº’æ–¥é”ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›å½“è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œé€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼Œé‡æ–°è·å–äº’æ–¥é”</strong>ã€‚</p><h2>ç”¨synchronizedå®ç°ç­‰å¾…-é€šçŸ¥æœºåˆ¶</h2><p>åœ¨Javaè¯­è¨€é‡Œï¼Œç­‰å¾…-é€šçŸ¥æœºåˆ¶å¯ä»¥æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œæ¯”å¦‚Javaè¯­è¨€å†…ç½®çš„synchronizedé…åˆwait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•å°±èƒ½è½»æ¾å®ç°ã€‚</p><p>å¦‚ä½•ç”¨synchronizedå®ç°äº’æ–¥é”ï¼Œä½ åº”è¯¥å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚åœ¨ä¸‹é¢è¿™ä¸ªå›¾é‡Œï¼Œå·¦è¾¹æœ‰ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥synchronizedä¿æŠ¤çš„ä¸´ç•ŒåŒºï¼ˆè¿™ä¸ªä¸´ç•ŒåŒºå¯ä»¥çœ‹ä½œå¤§å¤«çš„è¯Šå®¤ï¼‰ï¼Œå½“æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåï¼Œå…¶ä»–çº¿ç¨‹å°±åªèƒ½è¿›å…¥å›¾ä¸­å·¦è¾¹çš„ç­‰å¾…é˜Ÿåˆ—é‡Œç­‰å¾…ï¼ˆç›¸å½“äºæ‚£è€…åˆ†è¯Šç­‰å¾…ï¼‰ã€‚<strong>è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—å’Œäº’æ–¥é”æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—ã€‚</strong></p><p><img src="https://static001.geekbang.org/resource/image/c6/d0/c6640129fde927be8882ca90981613d0.png" alt=""></p><center><span class="reference">wait()æ“ä½œå·¥ä½œåŸç†å›¾</span></center><p>åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåï¼Œç”±äºæŸäº›æ¡ä»¶ä¸æ»¡è¶³ï¼Œéœ€è¦è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒJavaå¯¹è±¡çš„wait()æ–¹æ³•å°±èƒ½å¤Ÿæ»¡è¶³è¿™ç§éœ€æ±‚ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“è°ƒç”¨wait()æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸”è¿›å…¥åˆ°å³è¾¹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œ<strong>è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—ä¹Ÿæ˜¯äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—</strong>ã€‚ çº¿ç¨‹åœ¨è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„åŒæ—¶ï¼Œ<strong>ä¼šé‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”</strong>ï¼Œçº¿ç¨‹é‡Šæ”¾é”åï¼Œå…¶ä»–çº¿ç¨‹å°±æœ‰æœºä¼šè·å¾—é”ï¼Œå¹¶è¿›å…¥ä¸´ç•ŒåŒºäº†ã€‚</p><p>é‚£çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¯¥æ€ä¹ˆé€šçŸ¥è¿™ä¸ªç­‰å¾…çš„çº¿ç¨‹å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯Javaå¯¹è±¡çš„notify()å’ŒnotifyAll()æ–¹æ³•ã€‚æˆ‘åœ¨ä¸‹é¢è¿™ä¸ªå›¾é‡Œä¸ºä½ å¤§è‡´æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶è°ƒç”¨notify()ï¼Œä¼šé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆ<strong>äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—</strong>ï¼‰ä¸­çš„çº¿ç¨‹ï¼Œå‘Šè¯‰å®ƒ<strong>æ¡ä»¶æ›¾ç»æ»¡è¶³è¿‡</strong>ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/1b/8c/1b3e999c300166a84f2e8cc7a4b8f78c.png" alt=""></p><center><span class="reference">notify()æ“ä½œå·¥ä½œåŸç†å›¾</span></center><p>ä¸ºä»€ä¹ˆè¯´æ˜¯æ›¾ç»æ»¡è¶³è¿‡å‘¢ï¼Ÿå› ä¸º<strong>notify()åªèƒ½ä¿è¯åœ¨é€šçŸ¥æ—¶é—´ç‚¹ï¼Œæ¡ä»¶æ˜¯æ»¡è¶³çš„</strong>ã€‚è€Œè¢«é€šçŸ¥çº¿ç¨‹çš„<strong>æ‰§è¡Œæ—¶é—´ç‚¹å’Œé€šçŸ¥çš„æ—¶é—´ç‚¹</strong>åŸºæœ¬ä¸Šä¸ä¼šé‡åˆï¼Œæ‰€ä»¥å½“çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½æ¡ä»¶å·²ç»ä¸æ»¡è¶³äº†ï¼ˆä¿ä¸é½æœ‰å…¶ä»–çº¿ç¨‹æ’é˜Ÿï¼‰ã€‚è¿™ä¸€ç‚¹ä½ éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹è¦æƒ³é‡æ–°æ‰§è¡Œï¼Œä»ç„¶éœ€è¦è·å–åˆ°äº’æ–¥é”ï¼ˆå› ä¸ºæ›¾ç»è·å–çš„é”åœ¨è°ƒç”¨wait()æ—¶å·²ç»é‡Šæ”¾äº†ï¼‰ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬ä¸€ç›´å¼ºè°ƒwait()ã€notify()ã€notifyAll()æ–¹æ³•æ“ä½œçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œæ‰€ä»¥å¦‚æœsynchronizedé”å®šçš„æ˜¯thisï¼Œé‚£ä¹ˆå¯¹åº”çš„ä¸€å®šæ˜¯this.wait()ã€this.notify()ã€this.notifyAll()ï¼›å¦‚æœsynchronizedé”å®šçš„æ˜¯targetï¼Œé‚£ä¹ˆå¯¹åº”çš„ä¸€å®šæ˜¯target.wait()ã€target.notify()ã€target.notifyAll() ã€‚è€Œä¸”wait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•èƒ½å¤Ÿè¢«è°ƒç”¨çš„å‰ææ˜¯å·²ç»è·å–äº†ç›¸åº”çš„äº’æ–¥é”ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå‘ç°wait()ã€notify()ã€notifyAll()éƒ½æ˜¯åœ¨synchronized{}å†…éƒ¨è¢«è°ƒç”¨çš„ã€‚å¦‚æœåœ¨synchronized{}å¤–éƒ¨è°ƒç”¨ï¼Œæˆ–è€…é”å®šçš„thisï¼Œè€Œç”¨target.wait()è°ƒç”¨çš„è¯ï¼ŒJVMä¼šæŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼š<code>java.lang.IllegalMonitorStateException</code>ã€‚</p><h2>å°è¯•ç‰›åˆ€ï¼šä¸€ä¸ªæ›´å¥½åœ°èµ„æºåˆ†é…å™¨</h2><p>ç­‰å¾…-é€šçŸ¥æœºåˆ¶çš„åŸºæœ¬åŸç†ææ¸…æ¥šåï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒå¦‚ä½•è§£å†³ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·çš„é—®é¢˜å§ã€‚åœ¨è¿™ä¸ªç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹å››ä¸ªè¦ç´ ã€‚</p><ol>
<li>äº’æ–¥é”ï¼šä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æåˆ°Allocatoréœ€è¦æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨thisä½œä¸ºäº’æ–¥é”ã€‚</li>
<li>çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼šè½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·éƒ½æ²¡æœ‰è¢«åˆ†é…è¿‡ã€‚</li>
<li>ä½•æ—¶ç­‰å¾…ï¼šçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³å°±ç­‰å¾…ã€‚</li>
<li>ä½•æ—¶é€šçŸ¥ï¼šå½“æœ‰çº¿ç¨‹é‡Šæ”¾è´¦æˆ·æ—¶å°±é€šçŸ¥ã€‚</li>
</ol><p>å°†ä¸Šé¢å‡ ä¸ªé—®é¢˜è€ƒè™‘æ¸…æ¥šï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆä¸‹é¢çš„ä»£ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ï¼š</p><pre><code>  while(æ¡ä»¶ä¸æ»¡è¶³) {
    wait();
  }
</code></pre><p>åˆ©ç”¨è¿™ç§èŒƒå¼å¯ä»¥è§£å†³ä¸Šé¢æåˆ°çš„<strong>æ¡ä»¶æ›¾ç»æ»¡è¶³è¿‡</strong>è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºå½“wait()è¿”å›æ—¶ï¼Œæœ‰å¯èƒ½æ¡ä»¶å·²ç»å‘ç”Ÿå˜åŒ–äº†ï¼Œæ›¾ç»æ¡ä»¶æ»¡è¶³ï¼Œä½†æ˜¯ç°åœ¨å·²ç»ä¸æ»¡è¶³äº†ï¼Œæ‰€ä»¥è¦é‡æ–°æ£€éªŒæ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚èŒƒå¼ï¼Œæ„å‘³ç€æ˜¯ç»å…¸åšæ³•ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰¹æ®Šç†ç”±ä¸è¦å°è¯•æ¢ä¸ªå†™æ³•ã€‚åé¢åœ¨ä»‹ç»â€œç®¡ç¨‹â€çš„æ—¶å€™ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªç»å…¸åšæ³•çš„å‰ä¸–ä»Šç”Ÿã€‚</p><pre><code>class Allocator {
  private List&lt;Object&gt; als;
  // ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº
  synchronized void apply(
    Object from, Object to){
    // ç»å…¸å†™æ³•
    while(als.contains(from) ||
         als.contains(to)){
      try{
        wait();
      }catch(Exception e){
      }   
    } 
    als.add(from);
    als.add(to);  
  }
  // å½’è¿˜èµ„æº
  synchronized void free(
    Object from, Object to){
    als.remove(from);
    als.remove(to);
    notifyAll();
  }
}
</code></pre><h2>å°½é‡ä½¿ç”¨notifyAll()</h2><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ç”¨çš„æ˜¯notifyAll()æ¥å®ç°é€šçŸ¥æœºåˆ¶ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨notify()å‘¢ï¼Ÿè¿™äºŒè€…æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ<strong>notify()æ˜¯ä¼šéšæœºåœ°é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œè€ŒnotifyAll()ä¼šé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹</strong>ã€‚ä»æ„Ÿè§‰ä¸Šæ¥è®²ï¼Œåº”è¯¥æ˜¯notify()æ›´å¥½ä¸€äº›ï¼Œå› ä¸ºå³ä¾¿é€šçŸ¥æ‰€æœ‰çº¿ç¨‹ï¼Œä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥ä¸´ç•ŒåŒºã€‚ä½†é‚£æ‰€è°“çš„æ„Ÿè§‰å¾€å¾€éƒ½è•´è—ç€é£é™©ï¼Œå®é™…ä¸Šä½¿ç”¨notify()ä¹Ÿå¾ˆæœ‰é£é™©ï¼Œå®ƒçš„é£é™©åœ¨äºå¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«é€šçŸ¥åˆ°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰èµ„æºAã€Bã€Cã€Dï¼Œçº¿ç¨‹1ç”³è¯·åˆ°äº†ABï¼Œçº¿ç¨‹2ç”³è¯·åˆ°äº†CDï¼Œæ­¤æ—¶çº¿ç¨‹3ç”³è¯·ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆABåˆ†é…ç»™çº¿ç¨‹1ï¼Œçº¿ç¨‹3è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹4ç”³è¯·CDä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹1å½’è¿˜äº†èµ„æºABï¼Œå¦‚æœä½¿ç”¨notify()æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹4ï¼Œä½†çº¿ç¨‹4ç”³è¯·çš„æ˜¯CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹4è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹3å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚</p><p>æ‰€ä»¥é™¤éç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œå¦åˆ™å°½é‡ä½¿ç”¨notifyAll()ã€‚</p><h2>æ€»ç»“</h2><p>ç­‰å¾…-é€šçŸ¥æœºåˆ¶æ˜¯ä¸€ç§éå¸¸æ™®éçš„çº¿ç¨‹é—´åä½œçš„æ–¹å¼ã€‚å·¥ä½œä¸­ç»å¸¸çœ‹åˆ°æœ‰åŒå­¦ä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ¥ç­‰å¾…æŸä¸ªçŠ¶æ€ï¼Œå…¶å®å¾ˆå¤šæƒ…å†µä¸‹éƒ½å¯ä»¥ç”¨ä»Šå¤©æˆ‘ä»¬ä»‹ç»çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶æ¥ä¼˜åŒ–ã€‚Javaè¯­è¨€å†…ç½®çš„synchronizedé…åˆwait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•å¯ä»¥å¿«é€Ÿå®ç°è¿™ç§æœºåˆ¶ï¼Œä½†æ˜¯å®ƒä»¬çš„ä½¿ç”¨çœ‹ä¸Šå»è¿˜æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥ä½ éœ€è¦è®¤çœŸç†è§£ç­‰å¾…é˜Ÿåˆ—å’Œwait()ã€notify()ã€notifyAll()çš„å…³ç³»ã€‚æœ€å¥½ç”¨ç°å®ä¸–ç•Œåšä¸ªç±»æ¯”ï¼Œè¿™æ ·æœ‰åŠ©äºä½ çš„ç†è§£ã€‚</p><p>Javaè¯­è¨€çš„è¿™ç§å®ç°ï¼ŒèƒŒåçš„ç†è®ºæ¨¡å‹å…¶å®æ˜¯ç®¡ç¨‹ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸è¿‡ä½ ä¸ç”¨æ‹…å¿ƒï¼Œåé¢ä¼šæœ‰ä¸“é—¨çš„ä¸€ç« æ¥ä»‹ç»ç®¡ç¨‹ã€‚ç°åœ¨ä½ åªéœ€è¦èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨å°±å¯ä»¥äº†ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>å¾ˆå¤šé¢è¯•éƒ½ä¼šé—®åˆ°ï¼Œwait()æ–¹æ³•å’Œsleep()æ–¹æ³•éƒ½èƒ½è®©å½“å‰çº¿ç¨‹æŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œé‚£å®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿç°åœ¨ä½ ä¹Ÿè¯•ç€å›ç­”ä¸€ä¸‹å§ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h1>çŒœä½ å–œæ¬¢</h1><p><a href="https://time.geekbang.org/course/intro/156?utm_term=zeusRVDGT&amp;utm_source=app&amp;utm_medium=javabingfabiancheng&amp;utm_campaign=156-onsell&amp;utm_content=banner0301"><img src="https://static001.geekbang.org/resource/image/8e/93/8e1906fb8a24d5eb66539fa88ea56193.png" alt="unpreview"></a></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å§œæˆˆ  2019-03-12 00:29:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            waitä¸sleepåŒºåˆ«åœ¨äºï¼š<br>1. waitä¼šé‡Šæ”¾æ‰€æœ‰é”è€Œsleepä¸ä¼šé‡Šæ”¾é”èµ„æº.<br>2. waitåªèƒ½åœ¨åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ä¸­ä½¿ç”¨ï¼Œè€Œsleepä»»ä½•åœ°æ–¹éƒ½å¯ä»¥.<br>3. waitæ— éœ€æ•æ‰å¼‚å¸¸ï¼Œè€Œsleepéœ€è¦.<br><br>ä¸¤è€…ç›¸åŒç‚¹ï¼šéƒ½ä¼šè®©æ¸¡CPUæ‰§è¡Œæ—¶é—´ï¼Œç­‰å¾…å†æ¬¡è°ƒåº¦ï¼ [78èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Home  2019-03-12 07:11:19
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¡¥å……ä¸€ä¸‹å§œæˆˆåŒå­¦å›ç­”ï¼›1 sleepæ˜¯Threadçš„æ–¹æ³•ï¼Œè€Œwaitæ˜¯Objectç±»çš„æ–¹æ³•ï¼›2ï¼šsleepæ–¹æ³•è°ƒç”¨çš„æ—¶å€™å¿…é¡»æŒ‡å®šæ—¶é—´ [43èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            crazypokerk  2019-03-12 08:51:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            wait()æ–¹æ³•ä¸sleep()æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œwait()æ–¹æ³•ä¼šé‡Šæ”¾å¯¹è±¡çš„â€œé”æ ‡å¿—â€ã€‚å½“è°ƒç”¨æŸä¸€å¯¹è±¡çš„wait()æ–¹æ³•åï¼Œä¼šä½¿å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå¹¶å°†å½“å‰çº¿ç¨‹æ”¾å…¥å¯¹è±¡ç­‰å¾…æ± ä¸­ï¼Œç›´åˆ°è°ƒç”¨äº†notify()æ–¹æ³•åï¼Œå°†ä»å¯¹è±¡ç­‰å¾…æ± ä¸­ç§»å‡ºä»»æ„ä¸€ä¸ªçº¿ç¨‹å¹¶æ”¾å…¥é”æ ‡å¿—ç­‰å¾…æ± ä¸­ï¼Œåªæœ‰é”æ ‡å¿—ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹å¯ä»¥è·å–é”æ ‡å¿—ï¼Œå®ƒä»¬éšæ—¶å‡†å¤‡äº‰å¤ºé”çš„æ‹¥æœ‰æƒã€‚å½“è°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„notifyAll()æ–¹æ³•ï¼Œä¼šå°†å¯¹è±¡ç­‰å¾…æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½ç§»åŠ¨åˆ°è¯¥å¯¹è±¡çš„é”æ ‡å¿—ç­‰å¾…æ± ã€‚<br>sleep()æ–¹æ³•éœ€è¦æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œå®ƒå¯ä»¥è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šçš„æ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè¯¥æ–¹æ³•æ—¢å¯ä»¥è®©å…¶ä»–åŒä¼˜å…ˆçº§æˆ–è€…é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œçš„æœºä¼šï¼Œä¹Ÿå¯ä»¥è®©ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œæœºä¼šã€‚ä½†æ˜¯sleep()æ–¹æ³•ä¸ä¼šé‡Šæ”¾â€œé”æ ‡å¿—â€ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰synchronizedåŒæ­¥å—ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶ä¸èƒ½è®¿é—®å…±äº«æ•°æ®ã€‚ [29èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 21:27:46</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            wang  2019-03-12 21:41:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            public class MyLock {<br>&#47;&#47; æµ‹è¯•è½¬è´¦çš„mainæ–¹æ³•<br>public static void main(String[] args) throws InterruptedException {<br>    Account src = new Account(10000);<br>    Account target = new Account(10000);<br>    CountDownLatch countDownLatch = new CountDownLatch(9999);<br>    for (int i = 0; i &lt; 9999; i++) {<br>        new Thread(()-&gt;{<br>            src.transactionToTarget(1,target);<br>        countDownLatch.countDown();<br>        }).start();<br>    }<br>    countDownLatch.await();<br>    System.out.println(&quot;src=&quot;+src.getBanalce() );<br>    System.out.println(&quot;target=&quot;+target.getBanalce() );<br>}<br>static class Account{ &#47;&#47;è´¦æˆ·ç±»<br>    public Account(Integer banalce) {<br>        this.banalce = banalce;<br>    }<br>    private Integer banalce;<br>    public void transactionToTarget(Integer money,Account target){&#47;&#47;è½¬è´¦æ–¹æ³•<br>        Allocator.getInstance().apply(this,target);<br>        this.banalce -= money;<br>        target.setBanalce(target.getBanalce()+money);<br>        Allocator.getInstance().release(this,target);<br>    }<br>    public  Integer getBanalce() {<br>        return banalce;<br>    }<br>    public void setBanalce(Integer banalce) {<br>        this.banalce = banalce;<br>    }<br>}<br>static class Allocator { &#47;&#47;å•ä¾‹é”ç±»<br>    private Allocator(){}<br>    private List&lt;Account&gt; locks = new ArrayList&lt;&gt;();<br>    public  synchronized void apply(Account src,Account tag){<br>        while (locks.contains(src)||locks.contains(tag)) {<br>            try {<br>                this.wait();<br>            } catch (InterruptedException e) {<br>            }<br>        }<br>        locks.add(src);<br>        locks.add(tag);<br>    }<br>    public synchronized void release(Account src,Account tag){<br>        locks.remove(src);<br>        locks.remove(tag);<br>        this.notifyAll();<br>    }<br>    public static  Allocator getInstance(){<br>        return AllocatorSingle.install;<br>    }<br>    static class AllocatorSingle{<br>        public static Allocator install = new Allocator();<br>    }<br>}<br>} [15èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-13 11:33:27</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">é«˜æ‰‹é«˜æ‰‹ï¼Œè®©æˆ‘å†™ä¹Ÿè¿™ä¸è¿™æ ·å¥½ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            èœ¡ç¬”  2019-03-12 23:42:34
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆä½ ä¸ç”¨åœ¨æ–‡ç« ä¸­è´´å‡ºæ‰€æœ‰ä»£ç å˜›ï¼Œåªè´´å‡ºæ ¸å¿ƒä»£ç ï¼Œç„¶åæŠŠæ•´ä¸ªä¾‹å­æ”¾åœ¨githubä¸Šï¼Œæ–‡æœ«çš„æ—¶å€™ç»™å‡ºgithubçš„é“¾æ¥ï¼Œæ°´å¹³åŸºç¡€ä¸€èˆ¬çš„å°±å¯ä»¥å»ä¸Šé¢ä¸‹è½½ä¸‹æ¥è·‘ä¸€è·‘è°ƒè¯•åŠ æ·±å°è±¡ç†è§£ï¼Œè¿™æ ·å¯ä»¥ä¸è€å¸ˆğŸ˜‚ [10èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            éƒ‘æ™¨Cc  2019-03-12 11:16:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç‹è€å¸ˆ ABCD é‚£ä¸ªä¾‹å­çœŸæ²¡çœ‹æ‡‚ çº¿ç¨‹1é‡Šæ”¾é”ä¸ºå•¥ä¼šé€šçŸ¥çº¿ç¨‹4ï¼Ÿ1å’Œ3æ‰æ˜¯äº’æ–¥çš„å•Š 2å’Œ4äº’æ–¥ æŒ‰æˆ‘çš„ç†è§£ 3å’Œ4 ä¸åº”è¯¥æ˜¯åœ¨åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—é‡Œå•Š å› ä¸ºä¸æ˜¯é€šä¸€æŠŠé”ï¼ˆå‡†ç¡®æ¥æ—¶ä¸æ˜¯åŒæ ·çš„ä¸¤æŠŠé”ï¼‰<br>å°±ç€è¿™ä¸ªä¾‹å­ æˆ‘è¿˜æœ‰ä¸ªå…³äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—çš„é—®é¢˜ å‡è®¾è¿˜æ˜¯èµ„æºABCD çº¿ç¨‹5 è·å–AB çº¿ç¨‹6è·å–CD çº¿ç¨‹7è¯•å›¾è·å–AB çº¿ç¨‹8è¯•å›¾è·å–BC çº¿ç¨‹9è¯•å›¾è·å–CD é‚£çº¿ç¨‹ 7ï¼Œ8ï¼Œ9 åˆ°åº•æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—é‡Œé¢ï¼Œ<br>JVMåœ¨å®ç° wait notifyæœºåˆ¶æ˜¯æ—¶å€™åˆ°åº•å­˜ä¸å­˜åœ¨çœŸå®çš„é˜Ÿåˆ—ï¼Ÿ [9èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 22:26:16</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">éƒ½æ˜¯thisè¿™ä¸€æŠŠé”: synchronized void apply(){}<br>æ‰€ä»¥æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—<br><br>å°±æ˜¯500ä¸ªçº¿ç¨‹ï¼Œä¹Ÿæ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå› ä¸ºé”çš„éƒ½æ˜¯this<br><br>é˜Ÿåˆ—ä¸€å®šæ˜¯å­˜åœ¨çš„</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Geek_e726b7  2019-03-12 08:32:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åº”è¯¥æ˜¯!als.contains(from) || !als.contains(to)æ‰wait()å§ [9èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é‚‹é¢çš„æµæµªå‰‘å®¢  2019-03-12 03:30:24
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            waitä¼šé‡Šæ”¾å½“å‰å æœ‰çš„é”ï¼Œsleepä¸ä¼šé‡Šæ”¾é” [9èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è™è™â¤ï¸  2019-03-14 00:17:00
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å›°æƒ‘<br>1. å¯¹äºä»æ¥æ²¡æœ‰è·å¾—è¿‡äº’æ–¥é”çš„çº¿ç¨‹ æ‰€åœ¨çš„ç­‰å¾…é˜Ÿåˆ— å’Œ å› ä¸ºwait() é‡Šæ”¾é”è€Œè¿›å…¥äº†ç­‰å¾…é˜Ÿåˆ—ï¼Œæ˜¯å¦æ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Ÿä¹Ÿå°±æ˜¯å›¾ä¸­å·¦ä¾§å’Œå³ä¾§çš„æ˜¯å¦ä¸ºåŒä¸€ä¸ªé˜Ÿåˆ—ï¼Ÿ<br>2. notifyAll() ä¼šå‘é€šçŸ¥ç»™ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„çº¿ç¨‹å—ï¼ŸåŒ…æ‹¬é‚£äº›ä»æœªè·å¾—è¿‡äº’æ–¥é”çš„çº¿ç¨‹å—ï¼Ÿ<br>3. å› ä¸ºwait()è¢«é˜»å¡ï¼Œè€Œåˆå› ä¸ºnotify()é‡æ–°è¢«å”¤é†’åï¼Œä»£ç æ˜¯æ¥ç€åœ¨wait()ä¹‹åæ‰§è¡Œï¼Œè¿˜æ˜¯é‡æ–°æ‰§è¡Œ apply æ–¹æ³•ï¼Ÿ [8èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-14 08:44:01</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—<br>åªå”¤é†’å³ä¾§çš„é˜Ÿåˆ—<br>waitä¹‹å<br><br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é™ˆå¿—å‡¯  2019-03-13 16:31:06
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            public class Allocator {<br>	private final List&lt;Account&gt; als=new LinkedList&lt;Account&gt;();<br>	&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>	public synchronized void apply(Account from, Account to) {<br>		&#47;&#47; ç»å…¸å†™æ³•<br>		while (als.contains(from) || als.contains(to)) {<br>			try {<br>				System.out.println(&quot;ç­‰å¾…ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>				wait();<br>			} catch (Exception e) {<br>				&#47;&#47;notify + notifyAll ä¸ä¼šæ¥è¿™é‡Œ<br>				System.out.println(&quot;å¼‚å¸¸ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>				e.printStackTrace();<br>			}<br>		}<br>		als.add(from);<br>		als.add(to);<br>	}<br>	&#47;&#47; å½’è¿˜èµ„æº<br>	public synchronized void free(Account from, Account to) {<br>		System.out.println(&quot;å”¤é†’ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>		als.remove(from);<br>		als.remove(to);<br>		notifyAll();<br>	}<br>}<br><br>public class Account {<br>	&#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>	private final Allocator actr;<br>	&#47;&#47;å”¯ä¸€è´¦å·<br>	private final long id;<br>	&#47;&#47;ä½™é¢<br>	private int balance;<br>	public Account(Allocator actr,long id,int balance){<br>		this.actr=actr;<br>		this.id=id;<br>		this.balance=balance;<br>	}<br>	&#47;&#47; è½¬è´¦<br>	public void transfer(Account target, int amt) {<br>		&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>		actr.apply(this, target);<br>		try {<br>			&#47;&#47;TODO æœ‰äº†èµ„æºç®¡ç†å™¨ï¼Œè¿™é‡Œçš„synchronizedé”å°±ä¸éœ€è¦äº†å§ï¼Ÿï¼<br>					if (this.balance &gt; amt) {<br>						this.balance -= amt;<br>						target.balance += amt;<br>					}<br>					&#47;&#47;æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œæ—¶é—´<br>					try {<br>						Thread.sleep(new Random().nextInt(2000));<br>					} catch (InterruptedException e) {<br>						e.printStackTrace();<br>					}<br>		} finally {<br>			actr.free(this, target);<br>		}<br>	}<br>	@Override<br>	public int hashCode() {<br>		final int prime = 31;<br>		int result = 1;<br>		result = prime * result + (int) (id ^ (id &gt;&gt;&gt; 32));<br>		return result;<br>	}<br>	&#47;**<br>	 * ç”¨äºåˆ¤æ–­ä¸¤ä¸ªç”¨æˆ·æ˜¯å¦ä¸€è‡´<br>	 *&#47;<br>	@Override<br>	public boolean equals(Object obj) {<br>		if (this == obj)<br>			return true;<br>		if (obj == null)<br>			return false;<br>		if (getClass() != obj.getClass())<br>			return false;<br>		Account other = (Account) obj;<br>		if (id != other.id)<br>			return false;<br>		return true;<br>	}<br>	public long getId() {<br>		return id;<br>	}<br>}<br>è€å¸ˆï¼Œä»¥ä¸Šä»£ç æ˜¯æˆ‘è¡¥çš„ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œä»¥ä¸Šæœ‰äº†Allocatorç®¡ç†å™¨ï¼ˆè§TODOéƒ¨åˆ†ï¼‰ï¼Œtransferæ–¹æ³•çš„thisè·Ÿtargetéƒ½ä¸å†éœ€è¦åŠ synchronizedé”äº†å§ï¼Ÿï¼ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-13 20:25:58</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¦‚æœåªæ˜¯è¿™ä¸ªä¾‹å­å°±ä¸éœ€è¦äº†ï¼Œ<br>é€ä½ ä¿©å­—ï¼ä¼˜ç§€ï¼ï¼ï¼ï¼ï¼</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è€æ¨åŒå¿—  2019-03-12 20:42:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç‚¹èµ@å§œæˆˆ è¡¥å……ä¸€ä¸‹ï¼šwaitä¸sleepåŒºåˆ«åœ¨äºï¼š<br>1. waitä¼šé‡Šæ”¾æ‰€æœ‰é”è€Œsleepä¸ä¼šé‡Šæ”¾é”èµ„æº.<br>2. waitåªèƒ½åœ¨åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ä¸­ä½¿ç”¨ï¼Œè€Œsleepä»»ä½•åœ°æ–¹éƒ½å¯ä»¥.<br>3. waitæ— éœ€æ•æ‰å¼‚å¸¸ï¼Œè€Œsleepéœ€è¦.ï¼ˆéƒ½æŠ›å‡ºInterruptedException ï¼Œwaitä¹Ÿéœ€è¦æ•è·å¼‚å¸¸ï¼‰<br>4. wait()æ— å‚æ•°éœ€è¦å”¤é†’ï¼Œçº¿ç¨‹çŠ¶æ€WAITINGï¼›wait(1000L);åˆ°æ—¶é—´è‡ªå·±é†’è¿‡æ¥æˆ–è€…åˆ°æ—¶é—´ä¹‹å‰è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ï¼ŒçŠ¶æ€å’Œsleepéƒ½æ˜¯TIME_WAITING<br>ä¸¤è€…ç›¸åŒç‚¹ï¼šéƒ½ä¼šè®©æ¸¡CPUæ‰§è¡Œæ—¶é—´ï¼Œç­‰å¾…å†æ¬¡è°ƒåº¦ï¼ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 21:17:19</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æˆ‘æ˜¯å–æŠ¥å°è¡Œå®¶  2019-03-12 16:58:47
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            waitå’ŒsleepåŒºåˆ«<br>1ï¼šwaité‡Šæ”¾èµ„æºï¼Œsleepä¸é‡Šæ”¾èµ„æº<br>2ï¼šwaitéœ€è¦è¢«å”¤é†’ï¼Œsleepä¸éœ€è¦<br>3ï¼šwaitéœ€è¦è·å–åˆ°ç›‘è§†å™¨ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ï¼Œsleepä¸éœ€è¦<br>4ï¼šwaitæ˜¯objecté¡¶çº§çˆ¶ç±»çš„æ–¹æ³•ï¼Œsleepåˆ™æ˜¯Threadçš„æ–¹æ³• [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 21:16:17</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å…¨é¢ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é™ˆå¿—å‡¯  2019-03-12 15:36:48
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¼ºçƒˆå»ºè®®è€å¸ˆæ¯ä¸ªç« èŠ‚é…ä¸Šå®Œæ•´çš„demoï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¤šä¸ªå®¢æˆ·æ“ä½œçš„ä»£ç ï¼Œè¿™æ ·çœ‹æ•ˆæœæ‰æ˜¯æœ€ä½³çš„ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½æ ¹æ®ä»£ç å®é™…å¥½å¥½è§‚å¯Ÿï¼ [5èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 20:39:31</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯¹äºæ°´å¹³é«˜çš„ï¼Œå®Œæ•´çš„ä»£ç æ²¡å¿…è¦ã€‚å¯¹äºæ°´å¹³ä½çš„ï¼Œå®Œæ•´çš„ä»£ç åªèƒ½å¢åŠ æƒ°æ€§ã€‚æˆ‘å°±å¾ˆè®¨åŒç²˜è´´ä¸€äº›æ— å…³çš„ä»£ç ğŸ˜ƒ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            aksonic  2019-03-14 23:56:19
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œæˆ‘æ˜¨å¤©é—®äº†ä½ é—®é¢˜åï¼Œå¸¦ç€ç–‘é—®åˆå»å­¦ä¹ äº†ä¸‹ï¼Œæ˜¯ä¸æ˜¯æ–‡ç« ä¸­çš„å·¦è¾¹å’Œå³è¾¹çš„ä¸¤ä¸ªé˜Ÿåˆ—åº”è¯¥æ”¹ä¸€æ”¹åå­—ï¼Œä¸åº”è¯¥éƒ½å«ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿™æ ·å¯¹æ–°æ‰‹å¾ˆå®¹æ˜“äº§ç”Ÿè¯¯è§£ã€‚å¦‚æœå·¦è¾¹çš„å«åšåŒæ­¥é˜Ÿåˆ—ï¼Œå³è¾¹çš„å«åšç­‰å¾…é˜Ÿåˆ—å¯èƒ½æ›´å¥½ã€‚å·¦è¾¹çš„é˜Ÿåˆ—æ˜¯ç”¨æ¥äº‰å¤ºé”çš„ï¼Œå³è¾¹çš„é˜Ÿåˆ—æ˜¯ç­‰å¾…é˜Ÿåˆ—ï¼Œæ˜¯å¿…é¡»è¢«notifyçš„ï¼Œå½“è¢«notifyä¹‹åï¼Œå°±ä¼šè¢«æ”¾å…¥å·¦è¾¹çš„é˜Ÿåˆ—å»äº‰å¤ºé”ã€‚è€å¸ˆï¼Œä½ è§‰å¾—å‘¢ï¼Ÿ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-15 12:24:48</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä½ è¿™ä¸ªå»ºè®®æŒºå¥½ï¼Œåœ¨ç®¡ç¨‹é‡Œé¢ï¼Œä¼šé‡æ–°è®²è¿™ä¿©é˜Ÿåˆ—ã€‚ç°åœ¨å°±çŸ¥é“æœ‰ä¿©ç­‰å¾…é˜Ÿåˆ—å°±å¯ä»¥äº†<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é«˜æº  2019-03-12 10:33:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆæœ€å¥½è®²è§£æ¯ä¸€ç« çš„æ—¶å€™é…åˆå®Œæ•´çš„ä¾‹å­æºä»£ç ï¼Œè¿™æ ·å†åŠ è°ƒè¯•æºä»£ç ï¼Œå°è±¡æ›´æ·±åˆ»äº† [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 11:53:55</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¤§å®¶æ°´å¹³ä¸ä¸€æ ·ï¼Œæœ‰äº›é«˜æ°´å¹³çš„å¯èƒ½åªæƒ³çœ‹åˆ°æ ¸å¿ƒçš„ä»£ç ï¼Œæˆ‘æ€•è´´å¤šäº†ï¼Œæœ‰äººè¯´æµªè´¹æµé‡ã€‚è‡ªå·±è¡¥ä¸Šå‰©ä½™ä»£ç ä¹Ÿæ˜¯ä¸ªä¸é”™çš„æé«˜æœºä¼šå§ğŸ˜‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            éƒ­ç‘å¨Ÿ  2019-04-02 21:21:50
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¹‹å‰è€å¸ˆç­”å¤é—®é¢˜æ—¶ï¼Œæåˆ°waitå’Œnotifyæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœæµªè´¹äº†ä¸€ä¸ªnotifyï¼Œå°±å¿…ç„¶æœ‰ä¸€ä¸ªwaitæ°¸è¿œæ²¡æœºä¼šè¢«å”¤é†’ã€‚è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿ<br>ä¾‹å­é‡Œé¢ å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹4 ç”³è¯·çš„æ˜¯ CDï¼Œç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œæ­¤æ—¶ä¼šæ‰§è¡Œwait()å—ï¼Ÿå¦‚æœæ‰§è¡Œäº†ï¼Œwaitå’Œnotifyè¿˜æ˜¯ä¸€ä¸€å¯¹åº”çš„å‘€ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œçº¿ç¨‹4ä¼šæ€ä¹ˆæ‰§è¡Œå‘¢ï¼Ÿæˆ‘çœ‹äº†å‡ æ¬¡æ–‡ç« äº†ï¼Œè¿˜æ˜¯æ²¡æœ‰ç†è§£æ­¤å¤„ï¼Œè¯·è€å¸ˆå¸®å¿™ï¼Œè°¢è°¢ã€‚<br> [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-02 22:38:19</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å› ä¸ºä¸å¯¹åº”äº†ï¼Œæ‰€ä»¥å°±æ­»ç­‰ä¸‹å»äº†ï¼Œæœ‰å€Ÿæœ‰è¿˜æ‰è¡Œï¼Œè¿˜é”™äº†äººå°±å‡ºé—®é¢˜äº†<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            lau  2019-03-14 17:58:49
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çœ‹è¯„è®ºä¹Ÿèƒ½å­¦åˆ°å¾ˆå¤šå¹²è´§ [3èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            San D Ji  2019-03-12 21:06:11
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å­¦ä¹ è¿™å‡ ç« ä»¥åï¼Œæˆ‘ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒJavawebç«¯åœ¨ä»€ä¹ˆæ ·çš„ä¸šåŠ¡åœºæ™¯ä¸‹éœ€è¦å¤šçº¿ç¨‹çš„æŠ€æœ¯å®ç°ï¼Ÿ<br>ä¸€ç›´ä»¥ä¸ºJavawebç«¯éƒ½æ˜¯æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æœåŠ¡å™¨ç«¯å¼€å¯ä¸€æ¡çº¿ç¨‹ç‹¬ç«‹ä½œä¸šï¼Œå®Œäº†ä¹‹åå°±è¿”å›ä¸€ä¸ªåº”ç­”ã€‚<br>ä¸çŸ¥é“è€å¸ˆèƒ½å¦å›ç­”ä¸€ä¸‹æˆ‘çš„ç–‘é—®ï¼Ÿ [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 21:20:43</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ¯”å¦‚ä½ è¦åšä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œåšä¸ªhttpclientï¼Œåšä¸ªrpcæ¡†æ¶ï¼Œç”¨æ‰¹å¤„ç†å¤„ç†ä¸Šåƒä¸‡æ•°æ®ï¼Œä¸€ä¸ªç®€å•çš„crudçœŸçš„ç”¨ä¸ä¸Š<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ^_^  2019-03-12 13:47:24
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œwhile(als.contains(from) || als.contains(to)) è¿™å¥å¯¹å— [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 20:22:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘ç¡®è®¤äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å¯¹çš„<br>åªè¦æœ‰ä¸€ä¸ªï¼Œå°±è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç‹‚æˆ˜ä¿„æ´›ä¼Š  2019-03-12 08:49:46
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            Sleepæ˜¯ç¡ä¸€æ®µæ—¶é—´å°±è‡ªå·±èµ·æ¥äº†ï¼Œwaitçš„è¯å¾—ç­‰åˆ°åˆ«äººå«é†’ä»–ã€‚ä¸ªäººæ„Ÿè§‰sleepé™¤äº†å¢åŠ ç¨‹åºè¿è¡Œæ—¶é—´ä»¥å¤–ï¼Œæ²¡åˆ«çš„æ„ä¹‰å‘€ [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-12 21:23:44</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æœ‰ç”¨ï¼Œä¾‹å¦‚åˆ«è®©ç¨‹åºè·‘çš„å¤ªå¿«</div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>