<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>01-å¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼šå¹¶å‘ç¼–ç¨‹Bugçš„æºå¤´</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>01-å¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼šå¹¶å‘ç¼–ç¨‹Bugçš„æºå¤´</h1>
<p>å¦‚æœä½ ç»†å¿ƒè§‚å¯Ÿçš„è¯ï¼Œä½ ä¼šå‘ç°ï¼Œä¸ç®¡æ˜¯å“ªä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶å‘ç±»çš„çŸ¥è¯†éƒ½æ˜¯åœ¨é«˜çº§ç¯‡é‡Œã€‚æ¢å¥è¯è¯´ï¼Œè¿™å—çŸ¥è¯†ç‚¹å…¶å®å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒè¿›é˜¶çš„çŸ¥è¯†ã€‚æˆ‘è‡ªå·±è¿™ä¹ˆå¤šå¹´å­¦ä¹ è¿‡æ¥ï¼Œä¹Ÿç¡®å®è§‰å¾—å¹¶å‘æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå› ä¸ºå®ƒä¼šæ¶‰åŠåˆ°å¾ˆå¤šçš„åº•å±‚çŸ¥è¯†ï¼Œæ¯”å¦‚è‹¥ä½ å¯¹æ“ä½œç³»ç»Ÿç›¸å…³çš„çŸ¥è¯†ä¸€æ— æ‰€çŸ¥çš„è¯ï¼Œé‚£å»ç†è§£ä¸€äº›åŸç†å°±ä¼šè´¹äº›åŠ›æ°”ã€‚è¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªä¸“æ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘è¯´è¿™äº›è¯çš„æ„æ€æ˜¯å¦‚æœä½ åœ¨ä¸­é—´é‡åˆ°è‡ªå·±æ²¡æƒ³é€šçš„é—®é¢˜ï¼Œå¯ä»¥å»æŸ¥é˜…èµ„æ–™ï¼Œä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºæ‰¾æˆ‘ï¼Œä»¥ä¿è¯ä½ èƒ½å¤Ÿè·Ÿä¸Šå­¦ä¹ è¿›åº¦ã€‚</p><p>ä½ æˆ‘éƒ½çŸ¥é“ï¼Œç¼–å†™æ­£ç¡®çš„å¹¶å‘ç¨‹åºæ˜¯ä¸€ä»¶æå›°éš¾çš„äº‹æƒ…ï¼Œå¹¶å‘ç¨‹åºçš„Bugå¾€å¾€ä¼šè¯¡å¼‚åœ°å‡ºç°ï¼Œç„¶ååˆè¯¡å¼‚åœ°æ¶ˆå¤±ï¼Œå¾ˆéš¾é‡ç°ï¼Œä¹Ÿå¾ˆéš¾è¿½è¸ªï¼Œå¾ˆå¤šæ—¶å€™éƒ½è®©äººå¾ˆæŠ“ç‹‚ã€‚ä½†è¦å¿«é€Ÿè€Œåˆç²¾å‡†åœ°è§£å†³â€œå¹¶å‘â€ç±»çš„ç–‘éš¾æ‚ç—‡ï¼Œä½ å°±è¦ç†è§£è¿™ä»¶äº‹æƒ…çš„æœ¬è´¨ï¼Œè¿½æœ¬æº¯æºï¼Œæ·±å…¥åˆ†æè¿™äº›Bugçš„æºå¤´åœ¨å“ªé‡Œã€‚</p><p>é‚£ä¸ºä»€ä¹ˆå¹¶å‘ç¼–ç¨‹å®¹æ˜“å‡ºé—®é¢˜å‘¢ï¼Ÿå®ƒæ˜¯æ€ä¹ˆå‡ºé—®é¢˜çš„ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±é‡ç‚¹èŠèŠè¿™äº›Bugçš„æºå¤´ã€‚</p><h2>å¹¶å‘ç¨‹åºå¹•åçš„æ•…äº‹</h2><p>è¿™äº›å¹´ï¼Œæˆ‘ä»¬çš„CPUã€å†…å­˜ã€I/Oè®¾å¤‡éƒ½åœ¨ä¸æ–­è¿­ä»£ï¼Œä¸æ–­æœç€æ›´å¿«çš„æ–¹å‘åŠªåŠ›ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ª<strong>æ ¸å¿ƒçŸ›ç›¾ä¸€ç›´å­˜åœ¨ï¼Œå°±æ˜¯è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚</strong>ã€‚CPUå’Œå†…å­˜çš„é€Ÿåº¦å·®å¼‚å¯ä»¥å½¢è±¡åœ°æè¿°ä¸ºï¼šCPUæ˜¯å¤©ä¸Šä¸€å¤©ï¼Œå†…å­˜æ˜¯åœ°ä¸Šä¸€å¹´ï¼ˆå‡è®¾CPUæ‰§è¡Œä¸€æ¡æ™®é€šæŒ‡ä»¤éœ€è¦ä¸€å¤©ï¼Œé‚£ä¹ˆCPUè¯»å†™å†…å­˜å¾—ç­‰å¾…ä¸€å¹´çš„æ—¶é—´ï¼‰ã€‚å†…å­˜å’ŒI/Oè®¾å¤‡çš„é€Ÿåº¦å·®å¼‚å°±æ›´å¤§äº†ï¼Œå†…å­˜æ˜¯å¤©ä¸Šä¸€å¤©ï¼ŒI/Oè®¾å¤‡æ˜¯åœ°ä¸Šåå¹´ã€‚</p><!-- [[[read_end]]] --><p>ç¨‹åºé‡Œå¤§éƒ¨åˆ†è¯­å¥éƒ½è¦è®¿é—®å†…å­˜ï¼Œæœ‰äº›è¿˜è¦è®¿é—®I/Oï¼Œæ ¹æ®æœ¨æ¡¶ç†è®ºï¼ˆä¸€åªæ°´æ¡¶èƒ½è£…å¤šå°‘æ°´å–å†³äºå®ƒæœ€çŸ­çš„é‚£å—æœ¨æ¿ï¼‰ï¼Œç¨‹åºæ•´ä½“çš„æ€§èƒ½å–å†³äºæœ€æ…¢çš„æ“ä½œâ€”â€”è¯»å†™I/Oè®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯è¯´å•æ–¹é¢æé«˜CPUæ€§èƒ½æ˜¯æ— æ•ˆçš„ã€‚</p><p>ä¸ºäº†åˆç†åˆ©ç”¨CPUçš„é«˜æ€§èƒ½ï¼Œå¹³è¡¡è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ï¼Œè®¡ç®—æœºä½“ç³»æœºæ„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ç¨‹åºéƒ½åšå‡ºäº†è´¡çŒ®ï¼Œä¸»è¦ä½“ç°ä¸ºï¼š</p><ol>
<li>CPUå¢åŠ äº†ç¼“å­˜ï¼Œä»¥å‡è¡¡ä¸å†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼›</li>
<li>æ“ä½œç³»ç»Ÿå¢åŠ äº†è¿›ç¨‹ã€çº¿ç¨‹ï¼Œä»¥åˆ†æ—¶å¤ç”¨CPUï¼Œè¿›è€Œå‡è¡¡CPUä¸I/Oè®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼›</li>
<li>ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åºï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚</li>
</ol><p>ç°åœ¨æˆ‘ä»¬å‡ ä¹æ‰€æœ‰çš„ç¨‹åºéƒ½é»˜é»˜åœ°äº«å—ç€è¿™äº›æˆæœï¼Œä½†æ˜¯å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œå¹¶å‘ç¨‹åºå¾ˆå¤šè¯¡å¼‚é—®é¢˜çš„æ ¹æºä¹Ÿåœ¨è¿™é‡Œã€‚</p><h2>æºå¤´ä¹‹ä¸€ï¼šç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜</h2><p>åœ¨å•æ ¸æ—¶ä»£ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯åœ¨ä¸€é¢—CPUä¸Šæ‰§è¡Œï¼ŒCPUç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å®¹æ˜“è§£å†³ã€‚å› ä¸ºæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯æ“ä½œåŒä¸€ä¸ªCPUçš„ç¼“å­˜ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ç¼“å­˜çš„å†™ï¼Œå¯¹å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥è¯´ä¸€å®šæ˜¯å¯è§çš„ã€‚ä¾‹å¦‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½æ˜¯æ“ä½œåŒä¸€ä¸ªCPUé‡Œé¢çš„ç¼“å­˜ï¼Œæ‰€ä»¥çº¿ç¨‹Aæ›´æ–°äº†å˜é‡Vçš„å€¼ï¼Œé‚£ä¹ˆçº¿ç¨‹Bä¹‹åå†è®¿é—®å˜é‡Vï¼Œå¾—åˆ°çš„ä¸€å®šæ˜¯Vçš„æœ€æ–°å€¼ï¼ˆçº¿ç¨‹Aå†™è¿‡çš„å€¼ï¼‰ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a0/da/a07e8182819e2b260ce85b2167d446da.png" alt=""></p><center><span class="reference">CPUç¼“å­˜ä¸å†…å­˜çš„å…³ç³»å›¾</span></center><p>ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å¯è§æ€§</strong>ã€‚</p><p>å¤šæ ¸æ—¶ä»£ï¼Œæ¯é¢—CPUéƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œè¿™æ—¶CPUç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å°±æ²¡é‚£ä¹ˆå®¹æ˜“è§£å†³äº†ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„CPUä¸Šæ‰§è¡Œæ—¶ï¼Œè¿™äº›çº¿ç¨‹æ“ä½œçš„æ˜¯ä¸åŒçš„CPUç¼“å­˜ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œçº¿ç¨‹Aæ“ä½œçš„æ˜¯CPU-1ä¸Šçš„ç¼“å­˜ï¼Œè€Œçº¿ç¨‹Bæ“ä½œçš„æ˜¯CPU-2ä¸Šçš„ç¼“å­˜ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹Aå¯¹å˜é‡Vçš„æ“ä½œå¯¹äºçº¿ç¨‹Bè€Œè¨€å°±ä¸å…·å¤‡å¯è§æ€§äº†ã€‚è¿™ä¸ªå°±å±äºç¡¬ä»¶ç¨‹åºå‘˜ç»™è½¯ä»¶ç¨‹åºå‘˜æŒ–çš„â€œå‘â€ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/e2/ea/e2aa76928b2bc135e08e7590ca36e0ea.png" alt=""></p><center><span class="reference">å¤šæ ¸CPUçš„ç¼“å­˜ä¸å†…å­˜å…³ç³»å›¾</span></center><p>ä¸‹é¢æˆ‘ä»¬å†ç”¨ä¸€æ®µä»£ç æ¥éªŒè¯ä¸€ä¸‹å¤šæ ¸åœºæ™¯ä¸‹çš„å¯è§æ€§é—®é¢˜ã€‚ä¸‹é¢çš„ä»£ç ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡add10K()æ–¹æ³•ï¼Œéƒ½ä¼šå¾ªç¯10000æ¬¡count+=1æ“ä½œã€‚åœ¨calc()æ–¹æ³•ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨ä¸€æ¬¡add10K()æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥æƒ³ä¸€æƒ³æ‰§è¡Œcalc()æ–¹æ³•å¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ</p><pre><code>public class Test {
  private long count = 0;
  private void add10K() {
    int idx = 0;
    while(idx++ &lt; 10000) {
      count += 1;
    }
  }
  public static long calc() {
    final Test test = new Test();
    // åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œadd()æ“ä½œ
    Thread th1 = new Thread(()-&gt;{
      test.add10K();
    });
    Thread th2 = new Thread(()-&gt;{
      test.add10K();
    });
    // å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹
    th1.start();
    th2.start();
    // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ
    th1.join();
    th2.join();
    return count;
  }
}
</code></pre><p>ç›´è§‰å‘Šè¯‰æˆ‘ä»¬åº”è¯¥æ˜¯20000ï¼Œå› ä¸ºåœ¨å•çº¿ç¨‹é‡Œè°ƒç”¨ä¸¤æ¬¡add10K()æ–¹æ³•ï¼Œcountçš„å€¼å°±æ˜¯20000ï¼Œä½†å®é™…ä¸Šcalc()çš„æ‰§è¡Œç»“æœæ˜¯ä¸ª10000åˆ°20000ä¹‹é—´çš„éšæœºæ•°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å‡è®¾çº¿ç¨‹Aå’Œçº¿ç¨‹BåŒæ—¶å¼€å§‹æ‰§è¡Œï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡éƒ½ä¼šå°† count=0 è¯»åˆ°å„è‡ªçš„CPUç¼“å­˜é‡Œï¼Œæ‰§è¡Œå®Œ count+=1 ä¹‹åï¼Œå„è‡ªCPUç¼“å­˜é‡Œçš„å€¼éƒ½æ˜¯1ï¼ŒåŒæ—¶å†™å…¥å†…å­˜åï¼Œæˆ‘ä»¬ä¼šå‘ç°å†…å­˜ä¸­æ˜¯1ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„2ã€‚ä¹‹åç”±äºå„è‡ªçš„CPUç¼“å­˜é‡Œéƒ½æœ‰äº†countçš„å€¼ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯åŸºäºCPUç¼“å­˜é‡Œçš„ count å€¼æ¥è®¡ç®—ï¼Œæ‰€ä»¥å¯¼è‡´æœ€ç»ˆcountçš„å€¼éƒ½æ˜¯å°äº20000çš„ã€‚è¿™å°±æ˜¯ç¼“å­˜çš„å¯è§æ€§é—®é¢˜ã€‚</p><p>å¾ªç¯10000æ¬¡count+=1æ“ä½œå¦‚æœæ”¹ä¸ºå¾ªç¯1äº¿æ¬¡ï¼Œä½ ä¼šå‘ç°æ•ˆæœæ›´æ˜æ˜¾ï¼Œæœ€ç»ˆcountçš„å€¼æ¥è¿‘1äº¿ï¼Œè€Œä¸æ˜¯2äº¿ã€‚å¦‚æœå¾ªç¯10000æ¬¡ï¼Œcountçš„å€¼æ¥è¿‘20000ï¼ŒåŸå› æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¸æ˜¯åŒæ—¶å¯åŠ¨çš„ï¼Œæœ‰ä¸€ä¸ªæ—¶å·®ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/ec/79/ec6743e74ccf9a3c6d6c819a41e52279.png" alt=""></p><center><span class="reference">å˜é‡countåœ¨CPUç¼“å­˜å’Œå†…å­˜çš„åˆ†å¸ƒå›¾</span></center><h2>æºå¤´ä¹‹äºŒï¼šçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜</h2><p>ç”±äºIOå¤ªæ…¢ï¼Œæ—©æœŸçš„æ“ä½œç³»ç»Ÿå°±å‘æ˜äº†å¤šè¿›ç¨‹ï¼Œå³ä¾¿åœ¨å•æ ¸çš„CPUä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€è¾¹å¬ç€æ­Œï¼Œä¸€è¾¹å†™Bugï¼Œè¿™ä¸ªå°±æ˜¯å¤šè¿›ç¨‹çš„åŠŸåŠ³ã€‚</p><p>æ“ä½œç³»ç»Ÿå…è®¸æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€å°æ®µæ—¶é—´ï¼Œä¾‹å¦‚50æ¯«ç§’ï¼Œè¿‡äº†50æ¯«ç§’æ“ä½œç³»ç»Ÿå°±ä¼šé‡æ–°é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œï¼ˆæˆ‘ä»¬ç§°ä¸ºâ€œä»»åŠ¡åˆ‡æ¢â€ï¼‰ï¼Œè¿™ä¸ª50æ¯«ç§’ç§°ä¸ºâ€œ<strong>æ—¶é—´ç‰‡</strong>â€ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/25/fb/254b129b145d80e9bb74123d6e620efb.png" alt=""></p><center><span class="reference">çº¿ç¨‹åˆ‡æ¢ç¤ºæ„å›¾</span></center><p>åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹è¿›è¡Œä¸€ä¸ªIOæ“ä½œï¼Œä¾‹å¦‚è¯»ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¯¥è¿›ç¨‹å¯ä»¥æŠŠè‡ªå·±æ ‡è®°ä¸ºâ€œä¼‘çœ çŠ¶æ€â€å¹¶å‡ºè®©CPUçš„ä½¿ç”¨æƒï¼Œå¾…æ–‡ä»¶è¯»è¿›å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠè¿™ä¸ªä¼‘çœ çš„è¿›ç¨‹å”¤é†’ï¼Œå”¤é†’åçš„è¿›ç¨‹å°±æœ‰æœºä¼šé‡æ–°è·å¾—CPUçš„ä½¿ç”¨æƒäº†ã€‚</p><p>è¿™é‡Œçš„è¿›ç¨‹åœ¨ç­‰å¾…IOæ—¶ä¹‹æ‰€ä»¥ä¼šé‡Šæ”¾CPUä½¿ç”¨æƒï¼Œæ˜¯ä¸ºäº†è®©CPUåœ¨è¿™æ®µç­‰å¾…æ—¶é—´é‡Œå¯ä»¥åšåˆ«çš„äº‹æƒ…ï¼Œè¿™æ ·ä¸€æ¥CPUçš„ä½¿ç”¨ç‡å°±ä¸Šæ¥äº†ï¼›æ­¤å¤–ï¼Œå¦‚æœè¿™æ—¶æœ‰å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹Ÿè¯»æ–‡ä»¶ï¼Œè¯»æ–‡ä»¶çš„æ“ä½œå°±ä¼šæ’é˜Ÿï¼Œç£ç›˜é©±åŠ¨åœ¨å®Œæˆä¸€ä¸ªè¿›ç¨‹çš„è¯»æ“ä½œåï¼Œå‘ç°æœ‰æ’é˜Ÿçš„ä»»åŠ¡ï¼Œå°±ä¼šç«‹å³å¯åŠ¨ä¸‹ä¸€ä¸ªè¯»æ“ä½œï¼Œè¿™æ ·IOçš„ä½¿ç”¨ç‡ä¹Ÿä¸Šæ¥äº†ã€‚</p><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•çš„é€»è¾‘ï¼Ÿä½†æ˜¯ï¼Œè™½ç„¶çœ‹ä¼¼ç®€å•ï¼Œæ”¯æŒå¤šè¿›ç¨‹åˆ†æ—¶å¤ç”¨åœ¨æ“ä½œç³»ç»Ÿçš„å‘å±•å²ä¸Šå´å…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰ï¼ŒUnixå°±æ˜¯å› ä¸ºè§£å†³äº†è¿™ä¸ªé—®é¢˜è€Œåå™ªå¤©ä¸‹çš„ã€‚</p><p>æ—©æœŸçš„æ“ä½œç³»ç»ŸåŸºäºè¿›ç¨‹æ¥è°ƒåº¦CPUï¼Œä¸åŒè¿›ç¨‹é—´æ˜¯ä¸å…±äº«å†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥è¿›ç¨‹è¦åšä»»åŠ¡åˆ‡æ¢å°±è¦åˆ‡æ¢å†…å­˜æ˜ å°„åœ°å€ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œéƒ½æ˜¯å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥çº¿ç¨‹åšä»»åŠ¡åˆ‡æ¢æˆæœ¬å°±å¾ˆä½äº†ã€‚ç°ä»£çš„æ“ä½œç³»ç»Ÿéƒ½åŸºäºæ›´è½»é‡çš„çº¿ç¨‹æ¥è°ƒåº¦ï¼Œç°åœ¨æˆ‘ä»¬æåˆ°çš„â€œä»»åŠ¡åˆ‡æ¢â€éƒ½æ˜¯æŒ‡â€œçº¿ç¨‹åˆ‡æ¢â€ã€‚</p><p>Javaå¹¶å‘ç¨‹åºéƒ½æ˜¯åŸºäºå¤šçº¿ç¨‹çš„ï¼Œè‡ªç„¶ä¹Ÿä¼šæ¶‰åŠåˆ°ä»»åŠ¡åˆ‡æ¢ï¼Œä¹Ÿè®¸ä½ æƒ³ä¸åˆ°ï¼Œä»»åŠ¡åˆ‡æ¢ç«Ÿç„¶ä¹Ÿæ˜¯å¹¶å‘ç¼–ç¨‹é‡Œè¯¡å¼‚Bugçš„æºå¤´ä¹‹ä¸€ã€‚ä»»åŠ¡åˆ‡æ¢çš„æ—¶æœºå¤§å¤šæ•°æ˜¯åœ¨æ—¶é—´ç‰‡ç»“æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç°åœ¨åŸºæœ¬éƒ½ä½¿ç”¨é«˜çº§è¯­è¨€ç¼–ç¨‹ï¼Œé«˜çº§è¯­è¨€é‡Œä¸€æ¡è¯­å¥å¾€å¾€éœ€è¦å¤šæ¡CPUæŒ‡ä»¤å®Œæˆï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ä¸­çš„<code>count += 1</code>ï¼Œè‡³å°‘éœ€è¦ä¸‰æ¡CPUæŒ‡ä»¤ã€‚</p><ul>
<li>æŒ‡ä»¤1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡countä»å†…å­˜åŠ è½½åˆ°CPUçš„å¯„å­˜å™¨ï¼›</li>
<li>æŒ‡ä»¤2ï¼šä¹‹åï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ+1æ“ä½œï¼›</li>
<li>æŒ‡ä»¤3ï¼šæœ€åï¼Œå°†ç»“æœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯CPUç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰ã€‚</li>
</ul><p>æ“ä½œç³»ç»Ÿåšä»»åŠ¡åˆ‡æ¢ï¼Œå¯ä»¥å‘ç”Ÿåœ¨ä»»ä½•ä¸€æ¡<strong>CPUæŒ‡ä»¤</strong>æ‰§è¡Œå®Œï¼Œæ˜¯çš„ï¼Œæ˜¯CPUæŒ‡ä»¤ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€é‡Œçš„ä¸€æ¡è¯­å¥ã€‚å¯¹äºä¸Šé¢çš„ä¸‰æ¡æŒ‡ä»¤æ¥è¯´ï¼Œæˆ‘ä»¬å‡è®¾count=0ï¼Œå¦‚æœçº¿ç¨‹Aåœ¨æŒ‡ä»¤1æ‰§è¡Œå®Œååšçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹BæŒ‰ç…§ä¸‹å›¾çš„åºåˆ—æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå‘ç°ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº†count+=1çš„æ“ä½œï¼Œä½†æ˜¯å¾—åˆ°çš„ç»“æœä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„2ï¼Œè€Œæ˜¯1ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/33/63/33777c468872cb9a99b3cdc1ff597063.png" alt=""></p><center><span class="reference">éåŸå­æ“ä½œçš„æ‰§è¡Œè·¯å¾„ç¤ºæ„å›¾</span></center><p>æˆ‘ä»¬æ½œæ„è¯†é‡Œé¢è§‰å¾—count+=1è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œå°±åƒä¸€ä¸ªåŸå­ä¸€æ ·ï¼Œçº¿ç¨‹çš„åˆ‡æ¢å¯ä»¥å‘ç”Ÿåœ¨count+=1ä¹‹å‰ï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨count+=1ä¹‹åï¼Œä½†å°±æ˜¯ä¸ä¼šå‘ç”Ÿåœ¨ä¸­é—´ã€‚<strong>æˆ‘ä»¬æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨CPUæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ç§°ä¸ºåŸå­æ€§</strong>ã€‚CPUèƒ½ä¿è¯çš„åŸå­æ“ä½œæ˜¯CPUæŒ‡ä»¤çº§åˆ«çš„ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€çš„æ“ä½œç¬¦ï¼Œè¿™æ˜¯è¿èƒŒæˆ‘ä»¬ç›´è§‰çš„åœ°æ–¹ã€‚å› æ­¤ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨é«˜çº§è¯­è¨€å±‚é¢ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚</p><h2>æºå¤´ä¹‹ä¸‰ï¼šç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜</h2><p>é‚£å¹¶å‘ç¼–ç¨‹é‡Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æœ‰è¿ç›´è§‰å®¹æ˜“å¯¼è‡´è¯¡å¼‚Bugçš„æŠ€æœ¯å‘¢ï¼Ÿæœ‰çš„ï¼Œå°±æ˜¯æœ‰åºæ€§ã€‚é¡¾åæ€ä¹‰ï¼Œæœ‰åºæ€§æŒ‡çš„æ˜¯ç¨‹åºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæœ‰æ—¶å€™ä¼šæ”¹å˜ç¨‹åºä¸­è¯­å¥çš„å…ˆåé¡ºåºï¼Œä¾‹å¦‚ç¨‹åºä¸­ï¼šâ€œa=6ï¼›b=7ï¼›â€ç¼–è¯‘å™¨ä¼˜åŒ–åå¯èƒ½å˜æˆâ€œb=7ï¼›a=6ï¼›â€ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨è°ƒæ•´äº†è¯­å¥çš„é¡ºåºï¼Œä½†æ˜¯ä¸å½±å“ç¨‹åºçš„æœ€ç»ˆç»“æœã€‚ä¸è¿‡æœ‰æ—¶å€™ç¼–è¯‘å™¨åŠè§£é‡Šå™¨çš„ä¼˜åŒ–å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„Bugã€‚</p><p>åœ¨Javaé¢†åŸŸä¸€ä¸ªç»å…¸çš„æ¡ˆä¾‹å°±æ˜¯åˆ©ç”¨åŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼šåœ¨è·å–å®ä¾‹getInstance()çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­instanceæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é”å®šSingleton.classå¹¶å†æ¬¡æ£€æŸ¥instanceæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœè¿˜ä¸ºç©ºåˆ™åˆ›å»ºSingletonçš„ä¸€ä¸ªå®ä¾‹ã€‚</p><pre><code>public class Singleton {
  static Singleton instance;
  static Singleton getInstance(){
    if (instance == null) {
      synchronized(Singleton.class) {
        if (instance == null)
          instance = new Singleton();
        }
    }
    return instance;
  }
}
</code></pre><p>å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹Aã€BåŒæ—¶è°ƒç”¨getInstance()æ–¹æ³•ï¼Œä»–ä»¬ä¼šåŒæ—¶å‘ç° <code>instance == null</code> ï¼Œäºæ˜¯åŒæ—¶å¯¹Singleton.classåŠ é”ï¼Œæ­¤æ—¶JVMä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŠ é”æˆåŠŸï¼ˆå‡è®¾æ˜¯çº¿ç¨‹Aï¼‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ™ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå‡è®¾æ˜¯çº¿ç¨‹Bï¼‰ï¼›çº¿ç¨‹Aä¼šåˆ›å»ºä¸€ä¸ªSingletonå®ä¾‹ï¼Œä¹‹åé‡Šæ”¾é”ï¼Œé”é‡Šæ”¾åï¼Œçº¿ç¨‹Bè¢«å”¤é†’ï¼Œçº¿ç¨‹Bå†æ¬¡å°è¯•åŠ é”ï¼Œæ­¤æ—¶æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„ï¼ŒåŠ é”æˆåŠŸåï¼Œçº¿ç¨‹Bæ£€æŸ¥ <code>instance == null</code> æ—¶ä¼šå‘ç°ï¼Œå·²ç»åˆ›å»ºè¿‡Singletonå®ä¾‹äº†ï¼Œæ‰€ä»¥çº¿ç¨‹Bä¸ä¼šå†åˆ›å»ºä¸€ä¸ªSingletonå®ä¾‹ã€‚</p><p>è¿™çœ‹ä¸Šå»ä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œæ— æ‡ˆå¯å‡»ï¼Œä½†å®é™…ä¸Šè¿™ä¸ªgetInstance()æ–¹æ³•å¹¶ä¸å®Œç¾ã€‚é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿå‡ºåœ¨newæ“ä½œä¸Šï¼Œæˆ‘ä»¬ä»¥ä¸ºçš„newæ“ä½œåº”è¯¥æ˜¯ï¼š</p><ol>
<li>åˆ†é…ä¸€å—å†…å­˜Mï¼›</li>
<li>åœ¨å†…å­˜Mä¸Šåˆå§‹åŒ–Singletonå¯¹è±¡ï¼›</li>
<li>ç„¶åMçš„åœ°å€èµ‹å€¼ç»™instanceå˜é‡ã€‚</li>
</ol><p>ä½†æ˜¯å®é™…ä¸Šä¼˜åŒ–åçš„æ‰§è¡Œè·¯å¾„å´æ˜¯è¿™æ ·çš„ï¼š</p><ol>
<li>åˆ†é…ä¸€å—å†…å­˜Mï¼›</li>
<li>å°†Mçš„åœ°å€èµ‹å€¼ç»™instanceå˜é‡ï¼›</li>
<li>æœ€ååœ¨å†…å­˜Mä¸Šåˆå§‹åŒ–Singletonå¯¹è±¡ã€‚</li>
</ol><p>ä¼˜åŒ–åä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾çº¿ç¨‹Aå…ˆæ‰§è¡ŒgetInstance()æ–¹æ³•ï¼Œå½“æ‰§è¡Œå®ŒæŒ‡ä»¤2æ—¶æ°å¥½å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹Bä¸Šï¼›å¦‚æœæ­¤æ—¶çº¿ç¨‹Bä¹Ÿæ‰§è¡ŒgetInstance()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹Båœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªåˆ¤æ–­æ—¶ä¼šå‘ç° <code>instance != null</code> ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›instanceï¼Œè€Œæ­¤æ—¶çš„instanceæ˜¯æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—® instance çš„æˆå‘˜å˜é‡å°±å¯èƒ½è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/64/d8/64c955c65010aae3902ec918412827d8.png" alt=""></p><center><span class="reference">åŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹çš„å¼‚å¸¸æ‰§è¡Œè·¯å¾„</span></center><h2>æ€»ç»“</h2><p>è¦å†™å¥½å¹¶å‘ç¨‹åºï¼Œé¦–å…ˆè¦çŸ¥é“å¹¶å‘ç¨‹åºçš„é—®é¢˜åœ¨å“ªé‡Œï¼Œåªæœ‰ç¡®å®šäº†â€œé¶å­â€ï¼Œæ‰æœ‰å¯èƒ½æŠŠé—®é¢˜è§£å†³ï¼Œæ¯•ç«Ÿæ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯é’ˆå¯¹é—®é¢˜çš„ã€‚å¹¶å‘ç¨‹åºç»å¸¸å‡ºç°çš„è¯¡å¼‚é—®é¢˜çœ‹ä¸Šå»éå¸¸æ— å˜å¤´ï¼Œä½†æ˜¯æ·±ç©¶çš„è¯ï¼Œæ— å¤–ä¹å°±æ˜¯ç›´è§‰æ¬ºéª—äº†æˆ‘ä»¬ï¼Œ<strong>åªè¦æˆ‘ä»¬èƒ½å¤Ÿæ·±åˆ»ç†è§£å¯è§æ€§ã€åŸå­æ€§ã€æœ‰åºæ€§åœ¨å¹¶å‘åœºæ™¯ä¸‹çš„åŸç†ï¼Œå¾ˆå¤šå¹¶å‘Bugéƒ½æ˜¯å¯ä»¥ç†è§£ã€å¯ä»¥è¯Šæ–­çš„</strong>ã€‚</p><p>åœ¨ä»‹ç»å¯è§æ€§ã€åŸå­æ€§ã€æœ‰åºæ€§çš„æ—¶å€™ï¼Œç‰¹æ„æåˆ°<strong>ç¼“å­˜</strong>å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼Œ<strong>çº¿ç¨‹åˆ‡æ¢</strong>å¸¦æ¥çš„åŸå­æ€§é—®é¢˜ï¼Œ<strong>ç¼–è¯‘ä¼˜åŒ–</strong>å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼Œå…¶å®ç¼“å­˜ã€çº¿ç¨‹ã€ç¼–è¯‘ä¼˜åŒ–çš„ç›®çš„å’Œæˆ‘ä»¬å†™å¹¶å‘ç¨‹åºçš„ç›®çš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯æé«˜ç¨‹åºæ€§èƒ½ã€‚ä½†æ˜¯æŠ€æœ¯åœ¨è§£å†³ä¸€ä¸ªé—®é¢˜çš„åŒæ—¶ï¼Œå¿…ç„¶ä¼šå¸¦æ¥å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥<strong>åœ¨é‡‡ç”¨ä¸€é¡¹æŠ€æœ¯çš„åŒæ—¶ï¼Œä¸€å®šè¦æ¸…æ¥šå®ƒå¸¦æ¥çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•è§„é¿</strong>ã€‚</p><p>æˆ‘ä»¬è¿™ä¸ªä¸“æ åœ¨è®²è§£æ¯é¡¹æŠ€æœ¯çš„æ—¶å€™ï¼Œéƒ½ä¼šå°½é‡å°†æ¯é¡¹æŠ€æœ¯è§£å†³çš„é—®é¢˜ä»¥åŠäº§ç”Ÿçš„é—®é¢˜è®²æ¸…æ¥šï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½å¤Ÿåœ¨è¿™æ–¹é¢å¤šæ€è€ƒã€å¤šæ€»ç»“ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>å¸¸å¬äººè¯´ï¼Œåœ¨32ä½çš„æœºå™¨ä¸Šå¯¹longå‹å˜é‡è¿›è¡ŒåŠ å‡æ“ä½œå­˜åœ¨å¹¶å‘éšæ‚£ï¼Œåˆ°åº•æ˜¯ä¸æ˜¯è¿™æ ·å‘¢ï¼Ÿç°åœ¨ç›¸ä¿¡ä½ ä¸€å®šèƒ½åˆ†æå‡ºæ¥ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f3/9c/f3531b6230d4ebadc020e056ff5d009c.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Jialin  2019-02-28 09:51:48
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯¹äºåŒé‡é”çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—ä»»å¤§é¹åˆ†æçš„è›®æœ‰é“ç†ï¼Œçº¿ç¨‹Aè¿›å…¥ç¬¬äºŒä¸ªåˆ¤ç©ºæ¡ä»¶ï¼Œè¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œå‘ç”Ÿäº†æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œå³ä½¿æ²¡æœ‰é‡Šæ”¾é”ï¼Œçº¿ç¨‹Båˆšè¦è¿›å…¥ç¬¬ä¸€ä¸ªåˆ¤ç©ºæ¡ä»¶æ—¶ï¼Œå‘ç°æ¡ä»¶ä¸æˆç«‹ï¼Œç›´æ¥è¿”å›instanceå¼•ç”¨ï¼Œä¸ç”¨å»è·å–é”ã€‚å¦‚æœå¯¹instanceè¿›è¡Œvolatileè¯­ä¹‰å£°æ˜ï¼Œå°±å¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œé¿å…è¯¥æƒ…å†µå‘ç”Ÿã€‚<br>å¯¹äºæœ‰äº›åŒå­¦å¯¹CPUç¼“å­˜å’Œå†…å­˜çš„ç–‘é—®ï¼ŒCPUç¼“å­˜ä¸å­˜åœ¨äºå†…å­˜ä¸­çš„ï¼Œå®ƒæ˜¯ä¸€å—æ¯”å†…å­˜æ›´å°ã€è¯»å†™é€Ÿåº¦æ›´å¿«çš„èŠ¯ç‰‡ï¼Œè‡³äºä»€ä¹ˆæ—¶å€™æŠŠæ•°æ®ä»ç¼“å­˜å†™åˆ°å†…å­˜ï¼Œæ²¡æœ‰å›ºå®šçš„æ—¶é—´ï¼ŒåŒæ ·åœ°ï¼Œå¯¹äºæœ‰volatileè¯­ä¹‰å£°æ˜çš„å˜é‡ï¼Œçº¿ç¨‹Aæ‰§è¡Œå®Œåä¼šå¼ºåˆ¶å°†å€¼åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼Œçº¿ç¨‹Bè¿›è¡Œç›¸å…³æ“ä½œæ—¶ä¼šå¼ºåˆ¶é‡æ–°æŠŠå†…å­˜ä¸­çš„å†…å®¹å†™å…¥åˆ°è‡ªå·±çš„ç¼“å­˜ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†volatileçš„å†™å…¥å±éšœé—®é¢˜ï¼Œå½“ç„¶ä¹Ÿå°±æ˜¯æ‰€è°“happen-beforeé—®é¢˜ã€‚ [158èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:52:45</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å‰å®³å‰å®³ï¼Œæ¯”æˆ‘å›ç­”çš„å…¨é¢å¤šäº†</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            json  2019-02-28 01:19:02
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            longç±»å‹64ä½ï¼Œæ‰€ä»¥åœ¨32ä½çš„æœºå™¨ä¸Šï¼Œå¯¹longç±»å‹çš„æ•°æ®æ“ä½œé€šå¸¸éœ€è¦å¤šæ¡æŒ‡ä»¤ç»„åˆå‡ºæ¥ï¼Œæ— æ³•ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥å¹¶å‘çš„æ—¶å€™ä¼šå‡ºé—®é¢˜ğŸŒğŸŒğŸŒ [85èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:26:00</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ­£è§£</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä»»å¤§é¹  2019-02-28 08:37:53
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯¹äºé˜¿æ ¹ä¸€ä¸–åŒå­¦çš„é‚£ä¸ªç–‘é—®ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºCPUæ—¶é—´ç‰‡åˆ‡æ¢åï¼Œçº¿ç¨‹Båˆšå¥½æ‰§è¡Œåˆ°ç¬¬ä¸€æ¬¡åˆ¤æ–­instance==nullï¼Œæ­¤æ—¶ä¸ä¸ºç©ºï¼Œä¸ç”¨è¿›å…¥synchronizedé‡Œï¼Œå°±å°†è¿˜æœªåˆå§‹åŒ–çš„instanceè¿”å›äº† [67èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:33:05</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ­£è§£ï¼æ„Ÿè°¢å›å¤ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é˜¿æ ¹ä¸€ä¸–  2019-02-28 07:55:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯¹äºåŒé‡é”æ£€æŸ¥é‚£ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼ŒAå¦‚æœæ²¡æœ‰å®Œæˆå®ä¾‹çš„åˆå§‹åŒ–ï¼Œé”åº”è¯¥ä¸ä¼šé‡Šæ”¾çš„ï¼ŒBæ˜¯æ‹¿ä¸åˆ°é”çš„ï¼Œæ€ä¹ˆè¿˜ä¼šå‡ºé—®é¢˜å‘¢ï¼Ÿ [66èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:31:30</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">åé¢å¥½å¤šåŒå­¦å·²ç»å¸®æˆ‘ä½œç­”äº†ï¼Œæ•™å¥½å­¦ç”Ÿï¼Œé¥¿æ­»å¸ˆå‚…å•Š</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Blithe  2019-02-28 22:55:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯¹äºé˜¿æ ¹ä¸€ä¸–çš„æé—®ï¼Œä»¥åŠæ–‡ä¸­ä½œè€…çš„æè¿°ï¼Œæˆ‘æœ‰è‡ªå·±çš„çœ‹æ³•ã€‚é˜¿æ ¹ä¸€ä¸–çš„æé—®æ˜¯å¯¹çš„ï¼Œä½œè€…çš„æè¿°æ˜¯æœ‰è¯¯çš„ï¼Œä½†ä½œè€…çš„ç»“è®ºæ˜¯æ­£ç¡®çš„ã€‚<br>æˆ‘çš„è§£é‡Šå¦‚ä¸‹ï¼šä¸¤ä¸ªçº¿ç¨‹éƒ½è¿‡äº†ç¬¬ä¸€å±‚åˆ¤ç©ºåï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ä¸ä¼šå‡ºç°æ–‡ä¸­è¯´çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å› ä¸ºJSR-133ä¸­çš„happens-beforeè§„åˆ™ã€‚1.ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œå…ˆäºçº¿ç¨‹ä¸­çš„åç»­æ“ä½œã€‚2.å¯¹ä¸€ä¸ªé”çš„è§£é”å…ˆäºéšåå¯¹è¿™ä¸ªé”çš„è§£é”ã€‚3.ä¼ é€’è¡Œã€‚ç»¼åˆä»¥ä¸Šä¸‰æ¡è§„åˆ™ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹çš„å¯¹è±¡åˆå§‹åŒ–å®Œæˆå…ˆäºè§£é”ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹çš„è§£é”å…ˆäºç¬¬äºŒä¸ªçº¿ç¨‹çš„åŠ é”ã€‚æ‰€ä»¥ï¼ŒçœŸå¦‚ä½œè€…æ‰€è¯´ç¬¬äºŒçº¿ç¨‹å¦‚æœè¿‡äº†ç¬¬ä¸€å±‚çš„åˆ¤ç©ºæ ¡éªŒï¼Œä¸‹æ­¥å°±è¦åŠ é”ï¼ŒåŠ é”åå…¶å®å¯¹è±¡åœ¨çº¿ç¨‹ä¸€ä¸­å·²ç»åˆå§‹åŒ–ç»“æŸï¼Œä¸ä¼šå‡ºç°NPEã€‚ä½†ä¾‹å­çš„ç¡®ä¼šå‡ºç°NPEé—®é¢˜ï¼Œå‡ºç°çš„åœºæ™¯å´æ˜¯ï¼Œçº¿ç¨‹äºŒæ²¡æœ‰è¿›è¡Œåˆ°ç¬¬ä¸€å±‚åˆ¤ç©ºæ“ä½œï¼Œçº¿ç¨‹ä¸€åˆ°äº†æ–‡ä¸­è¯´çš„æ—¶é—´ç‰‡ç»“æŸï¼Œè®©å‡ºCPUï¼Œçº¿ç¨‹äºŒåˆ¤ç©ºï¼Œå¦ï¼Œæ‰§è¡Œå¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚æœ‰é—®é¢˜ï¼Œå¯åŠ å¾®ä¿¡äº¤æµBlithe-Feng [30èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 17:56:01</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œçš„ç¡®æ˜¯æˆ‘çš„æè¿°æœ‰é—®é¢˜ã€‚æ„Ÿè°¢å•Šï¼<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QIANQIANCHEN  2019-02-28 11:58:01
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åˆšçœ‹è¿‡ã€Šjavaå¹¶å‘å®æˆ˜ã€‹ï¼Œåˆæ˜¯çœ‹äº†ä¸ªå¼€å§‹å°±çœ‹ä¸ä¸‹å»äº†ğŸ˜‚ğŸ˜‚ï¼Œå¸Œæœ›è®¢é˜…ä¸“æ å¯ä»¥è·Ÿè€å¸ˆå’Œå…¶ä»–ç«¥é‹ä¸€èµ·åšæŒå­¦ä¹ å¹¶å‘ç¼–ç¨‹ğŸ˜„ğŸ˜„<br><br>æ€è€ƒé¢˜ï¼šåœ¨32ä½çš„æœºå™¨ä¸Šå¯¹longå‹å˜é‡è¿›è¡ŒåŠ å‡æ“ä½œå­˜åœ¨å¹¶å‘éšæ‚£çš„è¯´æ³•æ˜¯æ­£ç¡®çš„ã€‚<br>åŸå› å°±æ˜¯æ–‡ç« é‡Œçš„bugæºå¤´ä¹‹äºŒï¼šçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜ã€‚<br>évolatileç±»å‹çš„longå’Œdoubleå‹å˜é‡æ˜¯8å­—èŠ‚64ä½çš„ï¼Œ32ä½æœºå™¨è¯»æˆ–å†™è¿™ä¸ªå˜é‡æ—¶å¾—æŠŠäººå®¶å’”åš“åˆ†æˆä¸¤ä¸ª32ä½æ“ä½œï¼Œå¯èƒ½ä¸€ä¸ªçº¿ç¨‹è¯»äº†æŸä¸ªå€¼çš„é«˜32ä½ï¼Œä½32ä½å·²ç»è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ”¹äº†ã€‚æ‰€ä»¥å®˜æ–¹æ¨èæœ€å¥½æŠŠlong\double å˜é‡å£°æ˜ä¸ºvolatileæˆ–æ˜¯åŒæ­¥åŠ é”synchronizeä»¥é¿å…å¹¶å‘é—®é¢˜ã€‚<br><br>è´´ä¸€æ®µjavaæ–‡æ¡£çš„è¯´æ˜<br>https:&#47;&#47;docs.oracle.com&#47;javase&#47;specs&#47;jls&#47;se8&#47;html&#47;jls-17.html#jls-17.7<br><br>17.7. Non-Atomic Treatment of double and long<br><br>For the purposes of the Java programming language memory model, a single write to a non-volatile long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write.<br><br>Writes and reads of volatile long and double values are always atomic.<br><br>Writes to and reads of references are always atomic, regardless of whether they are implemented as 32-bit or 64-bit values.<br><br>Some implementations may find it convenient to divide a single write action on a 64-bit long or double value into two write actions on adjacent 32-bit values. For efficiency&#39;s sake, this behavior is implementation-specific; an implementation of the Java Virtual Machine is free to perform writes to long and double values atomically or in two parts.<br><br>Implementations of the Java Virtual Machine are encouraged to avoid splitting 64-bit values where possible. Programmers are encouraged to declare shared 64-bit values as volatile or synchronize their programs correctly to avoid possible complications. [28èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 00:00:02</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å‰å®³å‰å®³</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            xxé¼   2019-02-28 01:10:53
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            Singleton instanceæ”¹ä¸ºvolatileæˆ–è€…finalå°±å®Œç¾äº†ï¼Œè¿™é‡Œé¢å…¶å®æ¶‰åŠJavaçš„happen-beforeåŸåˆ™ã€‚ [26èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:25:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ­å–œä½ ï¼Œå­¦ä¼šæŠ¢ç­”äº†ï¼</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å˜å˜  2019-02-28 18:26:51
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            é’ˆå¯¹é˜¿æ ¹ä¸€ä¸–çš„é—®é¢˜ï¼Œé—®é¢˜å…¶å®å‡ºç°åœ¨new Singleton()è¿™é‡Œã€‚<br>è¿™ä¸€è¡Œåˆ†å¯¹äºCPUæ¥è®²ï¼Œæœ‰3ä¸ªæŒ‡ä»¤ï¼š<br>1.åˆ†é…å†…å­˜ç©ºé—´<br>2.åˆå§‹åŒ–å¯¹è±¡<br>3.instanceå¼•ç”¨æŒ‡å‘å†…å­˜ç©ºé—´<br>æ­£å¸¸æ‰§è¡Œé¡ºåº1-2-3<br>ä½†æ˜¯CPUé‡æ’åºåæ‰§è¡Œé¡ºåºå¯èƒ½ä¸º1-3-2ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†<br>æ­¥éª¤å¦‚ä¸‹ï¼š<br>1.Aã€Bçº¿ç¨‹åŒæ—¶è¿›å…¥äº†ç¬¬ä¸€ä¸ªifåˆ¤æ–­<br>2.Aé¦–å…ˆè¿›å…¥synchronizedå—ï¼Œç”±äºinstanceä¸ºnullï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œinstance = new Singleton();<br>3.ç„¶åçº¿ç¨‹Aæ‰§è¡Œ1-&gt; JVMå…ˆç”»å‡ºäº†ä¸€äº›åˆ†é…ç»™Singletonå®ä¾‹çš„ç©ºç™½å†…å­˜ï¼Œå¹¶èµ‹å€¼ç»™instance<br>4.åœ¨è¿˜æ²¡æœ‰è¿›è¡Œç¬¬ä¸‰æ­¥ï¼ˆå°†instanceå¼•ç”¨æŒ‡å‘å†…å­˜ç©ºé—´ï¼‰çš„æ—¶å€™ï¼Œçº¿ç¨‹Aç¦»å¼€äº†synchronizedå—<br>5.çº¿ç¨‹Bè¿›å…¥synchronizedå—ï¼Œè¯»å–åˆ°äº†Açº¿ç¨‹è¿”å›çš„instanceï¼Œæ­¤æ—¶è¿™ä¸ªinstanceå¹¶æœªè¿›è¡Œç‰©ç†åœ°å€æŒ‡å‘ï¼Œæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚<br>æœ‰äººè¯´å°†å¯¹è±¡è®¾ç½®æˆvolatileï¼Œå…¶å®ä¹Ÿä¸èƒ½å®Œå…¨è§£å†³é—®é¢˜ã€‚volatileåªæ˜¯ä¿è¯å¯è§æ€§ï¼Œå¹¶ä¸ä¿è¯åŸå­æ€§ã€‚<br><br>ç°è¡Œçš„æ¯”è¾ƒé€šç”¨çš„åšæ³•å°±æ˜¯é‡‡ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼æ¥å®ç°ã€‚<br>public class MySingleton {<br>	<br>	&#47;&#47;å†…éƒ¨ç±»<br>	private static class MySingletonHandler{<br>		private static MySingleton instance = new MySingleton();<br>	} <br>	<br>	private MySingleton(){}<br>	 <br>	public static MySingleton getInstance() { <br>		return MySingletonHandler.instance;<br>	}<br>} [22èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 00:25:39</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å‰å®³ï¼Œä¸€çœ‹å°±æ˜¯ç»éªŒä¸°å¯Œ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            summer_Day  2019-02-28 11:08:37
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘è§‰å¾—é˜¿æ ¹ä¸€ä¸–çš„é—®é¢˜åº”è¯¥æ˜¯<br>synchronized(Singleton.class) {<br>        if (instance == null)<br>          instance = new Singleton();<br>        }<br>å¯¹äºsynchronizedå…³é”®å­—å·²ç»å¯¹ä»£ç å—è¿›è¡ŒåŠ é”äº†<br>æˆ‘ç†è§£åº”è¯¥ç­‰ä»·äº<br>synchronized(Singleton.class) {<br>        if (instance == null) {<br>          åˆ†é…ä¸€å—å†…å­˜ Mï¼›<br>          å°† M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ï¼›<br>          æœ€ååœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ã€‚<br>        }<br>  }<br> Aå¦‚æœæ²¡æœ‰å®Œæˆå®ä¾‹çš„åˆå§‹åŒ–ï¼Œé”åº”è¯¥ä¸ä¼šé‡Šæ”¾çš„ï¼ŒBæ˜¯æ‹¿ä¸åˆ°é”çš„ï¼Œæ€ä¹ˆè¿˜ä¼šå‡ºé—®é¢˜å‘¢ï¼Ÿ<br> [15èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è½å¢¨  2019-02-28 11:08:16
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆ,è¿è¡Œæ–‡ä¸­çš„æµ‹è¯•ä»£ç ,æœ‰æ—¶ä¼šå‡ºç°9000å¤šçš„ç»“æœ,ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ? [14èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:57:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¹¶å‘ç¨‹åºçš„è¯¡å¼‚ä¹‹å¤„ï¼Œå°±åœ¨äºï¼šæˆ‘å®åœ¨ä¹Ÿæƒ³ä¸é€šã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æˆ‘ä¼šå¾—åˆ°  2019-02-28 00:26:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            é›¶ç‚¹ä¸€è¿‡åˆšå¥½çœ‹åˆ°æ›´æ–°ï¼Œæœæ–­ä¸€å£æ°”è¯»å®Œï¼Œå¸¦åŠ²ï¼å¯è§æ€§ï¼ŒåŸå­æ€§ï¼Œæœ‰åºæ€§ï¼Œæ“ä½œç³»ç»Ÿä½œä¸ºåŸºç¡€ï¼Œå†…å­˜æ¨¡å‹ï¼Œæœºå™¨æŒ‡ä»¤ï¼Œç¼–è¯‘åŸç†ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘ï¼Œå¼€å§‹æœ‰ç‚¹æ„æ€äº†ğŸ‘ [11èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:22:13</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">åé¢è®²å†…å­˜æ¨¡å‹ï¼Œä¼šæ›´æœ‰æ„æ€ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é»„æœ‹é£  2019-02-28 08:05:20
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆä½ å¥½ï¼Œè¯·é—®æ–‡ç« ä¸­çš„ç¼“å­˜å’Œå†…å­˜ä»€ä¹ˆåŒºåˆ«ï¼Œç¼“å­˜ä¸æ˜¯åœ¨å†…å­˜ä¸­å­˜æ”¾ç€å—ï¼Ÿ [8èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-02-28 23:32:24</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯¹ä¸èµ·ï¼Œæ˜¯æˆ‘æ²¡è¯´æ¸…æ¥šï¼Œè¿™é‡Œçš„ç¼“å­˜ï¼ŒæŒ‡çš„æ˜¯CPUç¼“å­˜ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ³¢æ³¢  2019-03-01 21:50:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸ºè€å¸ˆç‚¹èµï¼Œè®²äº†å¹¶å‘äº§ç”Ÿçš„å‰ä¸–ä»Šç”Ÿï¼Œé€šä¿—æ˜“æ‡‚åˆä¸å¤±æ·±åº¦ã€‚ [7èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 22:30:08</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">è¿™ä¹ˆå¤¸æˆ‘ï¼Œæˆ‘çœŸçš„ä¼šéª„å‚²çš„<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç‰§ç«¥çºªå¹´  2019-02-28 17:51:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç‹è€å¸ˆï¼Œä½ æ–‡ç« ä¸­è®²çš„ ä¼˜åŒ–æŒ‡ä»¤çš„æ‰§è¡Œæ¬¡åº ä½¿å¾—ç¼“å­˜èƒ½å¤Ÿæ›´åŠ åˆç†çš„åˆ©ç”¨æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 00:24:41</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ¯”å¦‚ç¬¬1è¡Œï¼ša=8<br>ç¬¬1000è¡Œï¼ša=a*2;<br>è¿™ä¸ªæ—¶å€™ï¼ŒæŠŠä»–ä»¬æ”¾åˆ°ä¸€èµ·æ‰§è¡Œï¼Œæ˜¯ä¸æ˜¯å°±èƒ½æ›´å¥½çš„åˆ©ç”¨ç¼“å­˜äº†ï¼Ÿ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            åˆ«çš±çœ‰  2019-03-16 10:09:12
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å‘¨æœ«äº†<br>å¯¹ç•™è¨€é—®é¢˜æ€»ç»“ä¸€ä¸‹<br>Â <br>------å¯è§æ€§é—®é¢˜------<br>å¯¹äºå¯è§æ€§é‚£ä¸ªä¾‹å­æˆ‘ä»¬å…ˆçœ‹ä¸‹å®šä¹‰:<br>å¯è§æ€§:ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°<br>Â <br>å¹¶å‘é—®é¢˜å¾€å¾€éƒ½æ˜¯ç»¼åˆè¯ï¼Œè¿™é‡Œå³ä½¿æ˜¯å•æ ¸CPUï¼Œåªè¦å‡ºç°çº¿ç¨‹åˆ‡æ¢å°±ä¼šæœ‰åŸå­æ€§é—®é¢˜ã€‚ä½†è€å¸ˆçš„ç›®çš„æ˜¯ä¸ºäº†è®©å¤§å®¶æ˜ç™½ä»€ä¹ˆæ˜¯å¯è§æ€§<br>æˆ–è®¸æˆ‘ä»¬å¯ä»¥æŠŠçº¿ç¨‹å¯¹å˜é‡çš„è¯»å¯å†™éƒ½çœ‹ä½œæ—¶åŸå­æ“ä½œï¼Œä¹Ÿå°±æ˜¯cpuå¯¹å˜é‡çš„æ“ä½œä¸­é—´çŠ¶æ€ä¸å¯è§ï¼Œè¿™æ ·å°±èƒ½æ›´åŠ ç†è§£ä»€ä¹ˆæ˜¯å¯è§æ€§äº†ã€‚<br>Â <br>------CPUç¼“å­˜åˆ·æ–°åˆ°å†…å­˜çš„æ—¶æœº------<br>cpuå°†ç¼“å­˜å†™å…¥å†…å­˜çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ã€‚é™¤éä½ è°ƒç”¨cpuç›¸å…³æŒ‡ä»¤å¼ºåˆ·<br>Â <br>------åŒé‡é”é—®é¢˜------<br>å¦‚æœAçº¿ç¨‹ä¸Bçº¿ç¨‹å¦‚æœåŒæ—¶è¿›å…¥ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºå°±æ²¡æœ‰é—®é¢˜<br>Â <br>å¦‚æœAçº¿ç¨‹å…ˆè·å–é”å¹¶å‡ºç°æŒ‡ä»¤é‡æ’åºæ—¶ï¼ŒBçº¿ç¨‹æœªè¿›å…¥ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆé—®é¢˜ï¼Œè¿™é‡Œè¯´å¯èƒ½å‡ºç°é—®é¢˜æ˜¯å› ä¸ºå½“æŠŠå†…å­˜åœ°å€èµ‹å€¼ç»™å…±äº«å˜é‡åï¼ŒCPUå°†æ•°æ®å†™å›ç¼“å­˜çš„æ—¶æœºæ˜¯éšæœºçš„<br>Â <br>------ synchronized------<br>çº¿ç¨‹åœ¨synchronizedå—ä¸­ï¼Œå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œé”æ˜¯ä¸ä¼šé‡Šæ”¾çš„<br>Â <br>------æŒ‡ä»¤ä¼˜åŒ–------<br>é™¤äº†ç¼–è¯‘ä¼˜åŒ–,æœ‰ä¸€éƒ¨åˆ†å¯ä»¥é€šè¿‡çœ‹æ±‡ç¼–ä»£ç æ¥çœ‹ï¼Œä½†æ˜¯CPUå’Œè§£é‡Šå™¨åœ¨è¿è¡ŒæœŸä¹Ÿä¼šåšä¸€éƒ¨åˆ†ä¼˜åŒ–ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™éƒ½æ˜¯çœ‹ä¸åˆ°çš„ï¼Œä¹Ÿå¾ˆéš¾é‡ç°ã€‚<br>Â <br>------JMMæ¨¡å‹å’Œç‰©ç†å†…å­˜ã€ç¼“å­˜ç­‰å…³ç³»------<br>å†…å­˜ã€cpuç¼“å­˜æ˜¯ç‰©ç†å­˜åœ¨ï¼Œjvmå†…å­˜æ˜¯è½¯ä»¶å­˜åœ¨çš„ã€‚<br>å…³äºçº¿ç¨‹çš„å·¥ä½œå†…å­˜å’Œå¯„å­˜å™¨ã€cpuç¼“å­˜çš„å…³ç³» å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <br>https:&#47;&#47;blog.csdn.net&#47;u013851082&#47;article&#47;details&#47;70314778&#47;<br>Â <br>------IOæ“ä½œ------<br>ioæ“ä½œä¸å ç”¨cpuï¼Œè¯»æ–‡ä»¶ï¼Œæ˜¯è®¾å¤‡é©±åŠ¨å¹²çš„äº‹ï¼Œcpuåªç®¡å‘å‘½ä»¤ã€‚å‘å®Œå‘½ä»¤ï¼Œå°±å¯ä»¥å¹²åˆ«çš„äº‹æƒ…äº†ã€‚<br>Â <br>Â <br>------å¯„å­˜å™¨åˆ‡æ¢------Â <br>å¯„å­˜å™¨æ˜¯å…±ç”¨çš„ï¼ŒAçº¿ç¨‹åˆ‡æ¢åˆ°Bçº¿ç¨‹çš„æ—¶å€™ï¼Œå¯„å­˜å™¨ä¼šæŠŠæ“ä½œAçš„ç›¸å…³å†…å®¹ä¼šä¿å­˜åˆ°å†…å­˜é‡Œï¼Œåˆ‡æ¢å›æ¥çš„æ—¶å€™ï¼Œä¼šä»å†…å­˜æŠŠå†…å®¹åŠ è½½åˆ°å¯„å­˜å™¨ã€‚å¯ä»¥ç†è§£ä¸ºæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„å¯„å­˜å™¨<br>Â <br>è¯·è€å¸ˆå¸®å¿™çœ‹çœ‹ï¼Œæœ‰æ²¡é—®é¢˜ã€‚å¸Œæœ›æˆ‘çš„æ€»ç»“èƒ½å¸®åˆ°æ›´å¤šäººğŸ˜„ğŸ˜„ [5èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-16 10:56:35</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ²¡é—®é¢˜ï¼Œæ€»ç»“çš„å¤ªåˆ°ä½äº†ï¼ï¼ï¼</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å‘æ¡æ©™å­ ã€‚  2019-02-28 22:13:21
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆ ï¼Œæˆ‘æœ‰å‡ ä¸ªé—®é¢˜å¸Œæœ›è€å¸ˆæŒ‡ç‚¹ ï¼Œä¹Ÿæ˜¯æ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿçš„ï¼š<br><br>1.  æ“ä½œç³»ç»Ÿæ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½å…±äº«èµ„æº ï¼Œä»¥çº¿ç¨‹å•ä½è¿›è¡Œè°ƒç”¨ ã€‚ å¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªè¿›ç¨‹çš„èµ„æº ã€‚ ä¸€ä¸ªjavaåº”ç”¨å ä¸€ä¸ªè¿›ç¨‹ï¼ˆjvmçš„å†…å­˜æ¨¡å‹çš„èµ„æºä¹Ÿåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­ï¼‰ ï¼Œä¸€ä¸ªè¿›ç¨‹å ä¸€ä¸ªcpu ï¼Œ æ‰€ä»¥è€å¸ˆæ‰€è¯´çš„å¤šæ ¸cpuç¼“å­˜ï¼Œæ¯ä¸ªcpuæœ‰è‡ªå·±çš„ç¼“å­˜ ï¼ŒABä¸¤ä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„cpuä¸Šæ“ä½œä¸å¤ªç†è§£ ï¼Œ ä¸€ä¸ªåº”ç”¨çš„ABä¸¤ä¸ªçº¿ç¨‹æ˜¯ä¸æ˜¯åº”è¯¥å¤„åœ¨åŒä¸ªcpuä¸Šé¢ ï¼Ÿï¼Ÿï¼Ÿ<br><br>2. å¦‚æœæŒ‰ç…§è€å¸ˆæ‰€è¯´ä¸åŒçº¿ç¨‹åœ¨ä¸åŒcpuä¸Šè¿è¡Œ ï¼Œ æ˜¯ä¸æ˜¯æœ‰ä¸ªå«å¹¶è¡Œå’Œå¹¶å‘çš„æ¦‚å¿µ ã€‚ å•ä¸ªcpuçš„æ—¶å€™å¤šçº¿ç¨‹å®é™…ä¸Šæ˜¯æ¨¡æ‹Ÿå¹¶å‘çš„å¹¶è¡Œï¼Œå®é™…ä¸Šcpuåªèƒ½ä¸€æ¬¡æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿æ‰§è¡Œã€‚ è€Œåˆ°äº†å¤šæ ¸ä¸­ï¼Œå¯ä»¥çœŸæ­£çš„å°†ä¸¤ä¸ªçº¿ç¨‹ABåŒæ—¶åˆ†ç»™cpu1 .cpu2åŒæ—¶æ‰§è¡Œï¼Œç§°ä¹‹ä¸ºå¹¶å‘ï¼Ÿï¼Ÿ<br><br>3. æˆ‘æ„Ÿè§‰è€å¸ˆç¬¬äºŒç‚¹åŸå­æ€§ä¸­ä¹Ÿæœ‰åŒ…å«å¯è§æ€§é—®é¢˜ï¼Œç”±äºæ—¶é—´ç‰‡åˆ°äº†ï¼Œ å½“æŠŠèµ„æºè¯»åˆ°è‡ªå·±çš„å·¥ä½œçº¿ç¨‹ä¸­æ—¶ï¼Œç”±äºä¸å¯è§æ€§ï¼Œä»¥ä¸ºè‡ªå·±æ˜¯æœ€æ–°çš„å¯¼è‡´å€¼ä¸å‡†ç¡®ï¼Œè¿™ä¸ªä¹Ÿå¯¹åº”äº†ç¬¬ä¸€ä¸ªé—®é¢˜ ï¼Œ ä¸¤ä¸ªçº¿ç¨‹æ˜¯å¦åœ¨åŒä¸ªè¿›ç¨‹å†…å…±äº«èµ„æº<br><br>é—®é¢˜æœ‰ç‚¹å¤š ï¼Œ å¯èƒ½è‡ªå·±çš„ç†è§£æœ‰åå·® ï¼Œå¸Œæœ›è€å¸ˆæŒ‡æ­£<br> [5èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 00:44:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">è¿›ç¨‹å’Œçº¿ç¨‹çš„å…³ç³»ï¼Œä½ å¯ä»¥çœ‹çœ‹æ“ä½œç³»ç»ŸåŸç†ã€‚è¿›ç¨‹ä¸å æœ‰CPUã€‚æ“ä½œç³»ç»Ÿä¼šæŠŠCPUåˆ†é…ç»™çº¿ç¨‹ã€‚åˆ†åˆ°CPUçš„çº¿ç¨‹å°±èƒ½æ‰§è¡Œã€‚<br>å¹¶è¡Œï¼Œæ˜¯åŒä¸€æ—¶åˆ»ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½åœ¨æ‰§è¡Œã€‚å¹¶å‘ï¼Œæ˜¯åŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªæ‰§è¡Œï¼Œä½†æ˜¯ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº†ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            rayjun  2019-03-03 09:01:12
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç¬¬ä¸€ä¸ªæµ‹è¯•ä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œåœ¨é™æ€æ–¹æ³•ä¸­æ€ä¹ˆèƒ½è®¿é—®éé™æ€å˜é‡å‘¢ï¼Ÿ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-03 11:34:45</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æˆ‘æœ¬åœ°æµ‹è¯•çš„ä»£ç æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼Œä¸ºäº†è¯´æ˜é—®é¢˜ï¼Œä¸ºäº†ä¸å ç”¨ç¯‡å¹…ï¼Œåšäº†åˆ å‡ã€‚final Test test = new Test();ä½¿ç”¨testè®¿é—®çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®<br><br>public class Test {<br>    private int count = 0;<br>    private void add() {<br>        int idx = 0;<br>        while(idx++ &lt; 10000000) {<br>            count += 1;<br>        }<br>    }<br>    public static int calc() throws Exception {<br>        final Test test = new Test();<br>        Thread th1 = new Thread(()-&gt;{<br>            test.add();<br>        });<br>        Thread th2 = new Thread(()-&gt;{<br>            test.add();<br>        });<br><br>        th1.start();<br>        th2.start();<br>        th1.join();<br>        th2.join();<br>        return test.count;<br>    }<br><br>    public static void main(String[] args) throws Exception {<br>        long c =calc();<br>        System.out.println(c);<br>    }<br>}<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ... ...  2019-02-28 22:43:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œä¸Šé¢çš„ä¸¤ä¸ªçº¿ç¨‹çš„ä¾‹å­åº”è¯¥ä¸æ˜¯å¯è§æ€§å¯¼è‡´è€Œæ˜¯åŸå­æ€§å¯¼è‡´çš„å§ï¼å¦‚æœæ˜¯å¯è§æ€§å¯¼è‡´çš„è¯ï¼Œæˆ‘åœ¨å˜é‡countä¸ŠåŠ ä¸ªvolatileåº”è¯¥å¯ä»¥è§£å†³é—®é¢˜å•Šï¼è¿˜å‘ç°ä¸ªå°é—®é¢˜ï¼Œéé™æ€å˜é‡åº”è¯¥ä¸èƒ½ç›´æ¥ç”¨äºé™æ€æ–¹æ³•ä¸­å§ï¼ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-03-01 00:52:57</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç¤ºä¾‹ä»£ç ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜é—®é¢˜ã€‚è€ƒè™‘åˆ°å¤§å®¶æ‰‹æœºå±å¹•çš„å°ºå¯¸ï¼Œèƒ½çœå°±çœäº†<br>è¿™ä¸ªä¾‹å­ä¸ä»…ä»…æ˜¯å¯è§æ€§çš„é—®é¢˜ï¼Œå¹¶å‘é—®é¢˜å¾€å¾€éƒ½æ˜¯ç»¼åˆè¯ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            cfreedomc  2019-02-28 12:51:48
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä»Šå¤©ä¸»è¦å­¦ä¹ äº†å¹¶å‘ç¼–ç¨‹ä¸­ä¸‰ç§ç±»å‹çš„é—®é¢˜<br>1.ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜<br>2.çº¿ç¨‹åˆ‡æ¢å¯¼è‡´çš„åŸå­æ€§é—®é¢˜<br>3.ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜<br>ä¹Ÿæ˜¯è®©æˆ‘è®¤è¯†åˆ°æˆ‘ä»¬ç¼–ç¨‹å…¶å®å’ŒåŒ»ç”Ÿçœ‹ç—…ä¸€æ ·ï¼Œé¡¹ç›®å°±æ˜¯ç—…äººï¼Œå½“ä½ ç»™ç—…äººå¼€è¯æ—¶ï¼Œè¯çš„å¥½å¤„ä¸å¿…å¤šè¯´ï¼Œæ›´é‡è¦çš„æ˜¯å¯¹äºè¯çš„å‰¯ä½œç”¨æœ‰ä¸ªæ¸…æ™°çš„è®¤è¯†æ‰æ˜¯ä¸€ä¸ªå¥½çš„åŒ»ç”Ÿ<br><br>æœ€åä»è¿™èŠ‚è¯¾åï¼Œé‡åˆ°å¹¶å‘é—®é¢˜ï¼Œæˆ‘ä¹Ÿå¯ä»¥ç³»ç»Ÿçš„é€šè¿‡å°†é—®é¢˜åˆ†ç±»åˆ°æ˜¯ä»¥ä¸Šå“ªç§æˆ–è€…å“ªå‡ ç§é—®é¢˜å»è§£å†³é—®é¢˜<br><br>å¦‚ä»Šå¤©çš„è¯¾åé¢˜ç›®ï¼Œåœ¨javaä¸­ Longç±»å‹æ˜¯64ä½çš„ï¼Œåœ¨32ä½çš„ç³»ç»Ÿä¸­ï¼ŒCpuæŒ‡ä»¤è¦è¿›è¡Œå¤šæ¬¡æ“ä½œï¼Œæ— æ³•ä¿è¯åŸå­æ€§ [4èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å°è¾‰è¾‰  2019-03-14 23:59:00
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çœ‹å®Œè¿™ä¸€ç¯‡ï¼Œè§‰å¾—æˆ‘ä¹‹å‰çœ‹çš„ã€ŠJavaé«˜å¹¶å‘ç¼–ç¨‹è¯¦è§£ã€‹å’Œã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸¤æœ¬ä¹¦æ²¡ç™½çœ‹ï¼Œè‡³å°‘çœ‹æ‡‚è€å¸ˆè¯´çš„é—®é¢˜äº†ï¼Œçœ‹å®Œè¯„è®ºï¼ˆå·®ä¸å¤šåŠå°æ—¶ï¼‰ï¼ŒåŸæ¥é«˜æ‰‹éƒ½åœ¨è¯„è®ºåŒºğŸ˜€ ğŸ˜€ ğŸ˜€  [3èµ]
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>